<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Day 11 - ä¸€éµä¸Šç·šï¼å®Œæ•´éƒ¨ç½²åˆ° Render çš„å¯¦æˆ°æµç¨‹</title>
    <url>/2025/09/25/Day11%20-%20Render-NodeJS/</url>
    <content><![CDATA[<p>æ˜¨å¤©æˆ‘å€‘å®Œæˆäº†éƒ¨ç½²çš„å‰ç½®ä½œæ¥­ï¼Œä»Šå¤©ç•¶ç„¶è¦ä¾†å¯¦æˆ°éƒ¨ç½²å•¦ï¼é€™ç¯‡æ–‡ç« æœƒå¸¶ä½ ä¸€æ­¥æ­¥æŠŠ Node.js + TypeScript å°ˆæ¡ˆéƒ¨ç½²åˆ° <strong>Render</strong>ï¼Œä¸¦é©—è­‰ API æ˜¯å¦èƒ½æ­£å¸¸é‹ä½œã€‚</p>
<span id="more"></span>

<hr>
<h2 id="Render-éƒ¨ç½²è¨­å®šæ­¥é©Ÿ"><a href="#Render-éƒ¨ç½²è¨­å®šæ­¥é©Ÿ" class="headerlink" title="Render éƒ¨ç½²è¨­å®šæ­¥é©Ÿ"></a>Render éƒ¨ç½²è¨­å®šæ­¥é©Ÿ</h2><h3 id="1-å»ºç«‹-Web-Service"><a href="#1-å»ºç«‹-Web-Service" class="headerlink" title="1. å»ºç«‹ Web Service"></a>1. å»ºç«‹ Web Service</h3><p>åˆ° Render Dashboard å³ä¸Šè§’é»æ“Š <strong>New â†’ Web Service</strong>ï¼Œå»ºç«‹ä¸€å€‹æ–°çš„æœå‹™ã€‚</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/1-new-web-service.png?raw=true"></p>
<p>æ¥è‘—é¸æ“‡ <strong>é€£çµ GitHub å°ˆæ¡ˆ</strong>ï¼Œé»æ“Š <strong>Connect</strong>ã€‚</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/2-link-github-repo.png?raw=true"></p>
<hr>
<h3 id="2-é¸æ“‡å°ˆæ¡ˆèˆ‡åˆ†æ”¯"><a href="#2-é¸æ“‡å°ˆæ¡ˆèˆ‡åˆ†æ”¯" class="headerlink" title="2. é¸æ“‡å°ˆæ¡ˆèˆ‡åˆ†æ”¯"></a>2. é¸æ“‡å°ˆæ¡ˆèˆ‡åˆ†æ”¯</h3><ul>
<li><strong>Language</strong> é¸æ“‡ <code>Node</code></li>
<li><strong>Branch</strong> é¸æ“‡ GitHub å°ˆæ¡ˆçš„ <code>develop</code> åˆ†æ”¯</li>
</ul>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/3-new-service-info.png?raw=true"></p>
<hr>
<h3 id="3-è¨­å®šå»ºç½®èˆ‡å•Ÿå‹•æŒ‡ä»¤"><a href="#3-è¨­å®šå»ºç½®èˆ‡å•Ÿå‹•æŒ‡ä»¤" class="headerlink" title="3. è¨­å®šå»ºç½®èˆ‡å•Ÿå‹•æŒ‡ä»¤"></a>3. è¨­å®šå»ºç½®èˆ‡å•Ÿå‹•æŒ‡ä»¤</h3><p>Render éœ€è¦çŸ¥é“å¦‚ä½•å»ºç½®èˆ‡å•Ÿå‹•å°ˆæ¡ˆã€‚</p>
<p><strong>å»ºç½®æŒ‡ä»¤ (Build Command)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install &amp;&amp; npm run build</span><br></pre></td></tr></table></figure>

<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/4-build-command.png?raw=true"></p>
<p><strong>å•Ÿå‹•æŒ‡ä»¤ (Start Command)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></table></figure>

<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/5-start-command.png?raw=true"></p>
<hr>
<h3 id="4-é¸æ“‡-Instance-Type"><a href="#4-é¸æ“‡-Instance-Type" class="headerlink" title="4. é¸æ“‡ Instance Type"></a>4. é¸æ“‡ Instance Type</h3><p>å¦‚æœæ˜¯å­¸ç¿’æˆ– Side Projectï¼Œå¯ä»¥å…ˆé¸æ“‡ <strong>Free æ–¹æ¡ˆ</strong>ã€‚</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/6-instance-type.png?raw=true"></p>
<hr>
<h3 id="5-é…ç½®ç’°å¢ƒè®Šæ•¸"><a href="#5-é…ç½®ç’°å¢ƒè®Šæ•¸" class="headerlink" title="5. é…ç½®ç’°å¢ƒè®Šæ•¸"></a>5. é…ç½®ç’°å¢ƒè®Šæ•¸</h3><p>æ¥è‘—åˆ° Environment Variables å€å¡Šï¼Œæ–°å¢å°ˆæ¡ˆéœ€è¦çš„ç’°å¢ƒè®Šæ•¸ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB_HOST=&lt;ä½ çš„è³‡æ–™åº«ä¸»æ©Ÿ&gt;</span><br><span class="line">DB_PORT=5432</span><br><span class="line">DB_USERNAME=&lt;ä½ çš„ä½¿ç”¨è€…åç¨±&gt;</span><br><span class="line">DB_PASSWORD=&lt;ä½ çš„å¯†ç¢¼&gt;</span><br><span class="line">DB_NAME=&lt;ä½ çš„è³‡æ–™åº«åç¨±&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/7-env.png?raw=true"></p>
<p>é»æ“Š <strong>Add from .env</strong>ã€‚</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/8-add-env.png?raw=true"></p>
<p>é»æ“Š <strong>Add variables</strong>ï¼Œå°±èƒ½çœ‹åˆ°è®Šæ•¸æˆåŠŸæ–°å¢ã€‚</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/9-env-result.png?raw=true"></p>
<hr>
<h3 id="6-é–‹å§‹éƒ¨ç½²"><a href="#6-é–‹å§‹éƒ¨ç½²" class="headerlink" title="6. é–‹å§‹éƒ¨ç½²"></a>6. é–‹å§‹éƒ¨ç½²</h3><p>è¨­å®šå®Œæˆå¾Œï¼Œé»æ“Š <strong>Deploy Web Service</strong>ï¼ŒRender å°±æœƒé–‹å§‹è‡ªå‹•å»ºç½®èˆ‡éƒ¨ç½²ã€‚</p>
<p><strong>éƒ¨ç½²ä¸­ç•«é¢</strong></p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/10-deploying.png?raw=true"></p>
<p><strong>éƒ¨ç½²æˆåŠŸç•«é¢</strong></p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/11-deployed.png?raw=true"></p>
<hr>
<h2 id="é©—è­‰éƒ¨ç½²çµæœ"><a href="#é©—è­‰éƒ¨ç½²çµæœ" class="headerlink" title="é©—è­‰éƒ¨ç½²çµæœ"></a>é©—è­‰éƒ¨ç½²çµæœ</h2><p>éƒ¨ç½²å®Œæˆå¾Œï¼ŒRender æœƒæä¾›ä¸€å€‹å…¬é–‹ç¶²å€ã€‚</p>
<p>é€éè©²ç¶²å€å³å¯å‘¼å« APIï¼š</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/12-req-link.png?raw=true"></p>
<p>ä½¿ç”¨ Postman æ¸¬è©¦æ–°å¢ Todo è³‡æ–™ï¼ŒAPI å›æ‡‰æ­£å¸¸ âœ…</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day11-Render/13-postman-test.png?raw=true"></p>
<hr>
<p>ğŸ‰ æ­å–œä½ å®Œæˆäº†ä¸€å€‹å®Œæ•´çš„ Express + TypeScript + TypeORM å¾Œç«¯å°ˆæ¡ˆï¼Œä¸¦æˆåŠŸéƒ¨ç½²åˆ° Renderï¼</p>
<p>å¾é€™ä¸€æ­¥é–‹å§‹ï¼Œä½ çš„å°ˆæ¡ˆå·²ç¶“èƒ½è®“å…¨ä¸–ç•Œå­˜å–äº† ã€‚</p>
<p>âš ï¸ <strong>å°æé†’ï¼šRender Free Plan é™åˆ¶</strong></p>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Render å…è²»æ–¹æ¡ˆï¼Œæœƒæœ‰ä»¥ä¸‹å¹¾é»éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>æœå‹™è‹¥ <strong>15 åˆ†é˜æ²’æœ‰æµé‡</strong>ï¼Œæœƒè‡ªå‹•é€²å…¥ä¼‘çœ ç‹€æ…‹ã€‚</li>
<li>ç•¶å†æ¬¡æœ‰äººå­˜å–æ™‚ï¼Œæœå‹™æœƒé‡æ–°å•Ÿå‹•ï¼Œé€šå¸¸éœ€è¦ç­‰å¾… <strong>30 ç§’å·¦å³</strong>ã€‚</li>
<li>å…è²»æ–¹æ¡ˆçš„ç¡¬é«”è³‡æºæœ‰é™ï¼Œè‹¥å°ˆæ¡ˆæµé‡å¤§æˆ–éœ€è¦é•·æ™‚é–“ç©©å®šæœå‹™ï¼Œå»ºè­°å‡ç´šåˆ°ä»˜è²»æ–¹æ¡ˆã€‚</li>
</ul>
<hr>
<h2 id="çµèªï¼šå¾æº–å‚™åˆ°ä¸Šç·š-ğŸš€"><a href="#çµèªï¼šå¾æº–å‚™åˆ°ä¸Šç·š-ğŸš€" class="headerlink" title="çµèªï¼šå¾æº–å‚™åˆ°ä¸Šç·š ğŸš€"></a>çµèªï¼šå¾æº–å‚™åˆ°ä¸Šç·š ğŸš€</h2><p>åœ¨ <strong>Day 10</strong>ï¼Œæˆ‘å€‘å®Œæˆäº†éƒ¨ç½²çš„æ‰€æœ‰å‰ç½®ä½œæ¥­ï¼š</p>
<ul>
<li>èªè­˜ Render èˆ‡é›²ç«¯å¹³å°çš„å®šä½</li>
<li>ä¿®æ”¹ <code>package.json</code>ï¼ŒæŒ‡å®š Node.js ç‰ˆæœ¬</li>
<li>èª¿æ•´ç¨‹å¼ç¢¼ä»¥æ”¯æ´ç’°å¢ƒè®Šæ•¸çš„ <code>PORT</code></li>
<li>å­¸æœƒé€é GitHub PR æŠŠ <code>feature</code> åˆ†æ”¯åˆä½µåˆ° <code>develop</code></li>
</ul>
<p>æ¥è‘—åœ¨ <strong>Day 11</strong>ï¼Œæˆ‘å€‘å‰‡æŠŠ <code>develop</code> åˆ†æ”¯éƒ¨ç½²åˆ° Renderï¼Œä¸¦å®Œæˆï¼š</p>
<ul>
<li>å»ºç«‹ Web Service</li>
<li>è¨­å®š Build èˆ‡ Start æŒ‡ä»¤</li>
<li>é…ç½®è³‡æ–™åº«ç’°å¢ƒè®Šæ•¸</li>
<li>é©—è­‰éƒ¨ç½²æˆåŠŸï¼ŒAPI å¯ä»¥æ­£å¸¸ä½¿ç”¨</li>
</ul>
<p>è‡³æ­¤ï¼Œæˆ‘å€‘å·²ç¶“æŠŠå°ˆæ¡ˆå¾ã€Œæœ¬åœ°ç«¯ã€æ­£å¼æ¨ä¸Šã€Œé›²ç«¯ã€ï¼Œè®“å…¨ä¸–ç•Œéƒ½èƒ½é€éç¶²å€å­˜å– ã€‚</p>
<p>æ¥ä¸‹ä¾†çš„ç¯‡ç« ï¼Œæˆ‘å€‘å°‡ä¾†é»è¼•é¬†çš„ä¸»é¡Œï¼Œä»‹ç´¹ Prettier ã€ESLint å°å·¥å…·ï¼Œä¸¦é€æ­¥æ¢ç´¢æ›´å¤šé€²éšä¸»é¡Œï¼ˆæª”æ¡ˆä¸Šå‚³ã€é©—è­‰ç³»çµ±ç­‰ï¼‰ï¼Œè®“å°ˆæ¡ˆæ›´æ¥è¿‘çœŸå¯¦å•†æ¥­æ‡‰ç”¨ã€‚</p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Render</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 12 - ç¨‹å¼ç¢¼è‡ªå‹•æ’ç‰ˆç¥å™¨ï¼šPrettier å¯¦æˆ°å°å…¥</title>
    <url>/2025/09/26/Day12%20-%20Prettier/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨åœ˜éšŠé–‹ç™¼æ™‚ï¼Œå¤§å®¶å¸¸å¸¸æœƒå› ç‚ºä¸€äº›å°ç´°ç¯€çˆ­å¾—ä¸å¯é–‹äº¤ï¼š</p>
<p>æœ‰äººæ„›ç”¨å–®å¼•è™Ÿ <code>&#39;</code>ï¼Œæœ‰äººå»å …æŒé›™å¼•è™Ÿ <code>&quot;</code>ï¼›æœ‰äººåœ¨æ¯è¡Œçµå°¾å¿…åŠ åˆ†è™Ÿï¼Œæœ‰äººå‰‡è¦ºå¾—çœç•¥æ›´ç°¡æ½”ï¼›ç”šè‡³é€£ä¸€è¡Œç¨‹å¼ç¢¼èƒ½å¯«å¤šé•·ï¼Œéƒ½å¯èƒ½æˆç‚ºçˆ­è«–ç„¦é»ã€‚</p>
<p>é€™äº›å·®ç•°é›–ç„¶ä¸å½±éŸ¿ç¨‹å¼èƒ½ä¸èƒ½è·‘ï¼Œä½†æœƒå°è‡´å°ˆæ¡ˆè¶Šä¾†è¶Šå‡Œäº‚ï¼ŒCode Review ä¹Ÿå¸¸å¸¸æ·ªç‚ºã€Œå¼•è™Ÿå¤§æˆ°ã€ã€ã€Œç¸®æ’å¤§æˆ°ã€ã€‚</p>
<p>é€™äº›é—œæ–¼ Coding Style çš„å•é¡Œï¼Œç•¶ç„¶è¦ä¾†åˆ©ç”¨ä¸€äº›å¥½ç”¨çš„å·¥å…·ä¾†è§£æ±ºã€‚</p>
<span id="more"></span>

<hr>
<h2 id="ç‚ºä»€éº¼éœ€è¦-Coding-Styleï¼Ÿ"><a href="#ç‚ºä»€éº¼éœ€è¦-Coding-Styleï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼éœ€è¦ Coding Styleï¼Ÿ"></a>ç‚ºä»€éº¼éœ€è¦ Coding Styleï¼Ÿ</h2><p>åœ¨é–‹ç™¼å°ˆæ¡ˆæ™‚ï¼Œæ¯å€‹äººéƒ½æœ‰è‡ªå·±çš„ç¿’æ…£ï¼š</p>
<ul>
<li>æœ‰äººå–œæ­¡ <code>å–®å¼•è™Ÿ</code>ï¼Œæœ‰äººå …æŒ <code>é›™å¼•è™Ÿ</code>ã€‚</li>
<li>æœ‰äººæœƒåœ¨æ¯è¡Œ <strong>80 å­—å…ƒ</strong>å°±æ›è¡Œï¼Œæœ‰äººè¦ºå¾— <strong>120 å­—å…ƒ</strong>ä¹Ÿæ²’å•é¡Œã€‚</li>
<li>æœ‰äººå …æŒåœ¨æ¯è¡Œçµå°¾åŠ ä¸Š <code>;</code>ï¼Œæœ‰äººèªç‚ºå¯ä»¥çœç•¥ã€‚</li>
</ul>
<p>é€™äº›å·®ç•°é›–ç„¶ä¸æœƒå½±éŸ¿ç¨‹å¼èƒ½ä¸èƒ½åŸ·è¡Œï¼Œä½†æœƒé€ æˆï¼š</p>
<ol>
<li><strong>å¯è®€æ€§é™ä½</strong>ï¼šç¨‹å¼ç¢¼é¢¨æ ¼ä¸ä¸€è‡´ï¼Œåœ˜éšŠé–±è®€æ™‚éœ€è¦é¡å¤–çš„è…¦åŠ›è½‰æ›ã€‚</li>
<li><strong>å”ä½œæˆæœ¬ä¸Šå‡</strong>ï¼šCode Review æ™‚æœƒæµªè²»æ™‚é–“åœ¨ã€Œå¼•è™Ÿã€ã€ã€Œç¸®æ’ã€é€™äº›å°äº‹ï¼Œè€Œä¸æ˜¯ç¨‹å¼é‚è¼¯ã€‚</li>
<li><strong>ç¶­è­·å›°é›£</strong>ï¼šå°ˆæ¡ˆè¶Šå¤§ï¼Œé¢¨æ ¼è¶Šä¸ä¸€è‡´ï¼Œæ—¥å¾Œæ¥æ‰‹çš„äººæœƒæ›´ç—›è‹¦ã€‚</li>
</ol>
<p>ğŸ‘‰ ç‚ºäº†é¿å…é€™ç¨®æƒ…æ³ï¼Œæˆ‘å€‘éœ€è¦ä¸€å€‹ã€Œçµ±ä¸€çš„ Coding Style å·¥å…·ã€ä¾†å¹«å¿™ã€‚é€™å°±æ˜¯ <strong>Prettier</strong> å‡ºç¾çš„ç†ç”±ã€‚</p>
<hr>
<h2 id="Prettier-æ˜¯ä»€éº¼ï¼Ÿ"><a href="#Prettier-æ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="Prettier æ˜¯ä»€éº¼ï¼Ÿ"></a>Prettier æ˜¯ä»€éº¼ï¼Ÿ</h2><p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day12-Prettier/1-Prettier.png?raw=true"></p>
<p><a href="https://prettier.io/">Prettier</a> æ˜¯ä¸€å€‹ã€Œæœ‰ä¸»è¦‹çš„ç¨‹å¼ç¢¼æ ¼å¼åŒ–å·¥å…·ã€ã€‚</p>
<p>å®ƒæœƒè‡ªå‹•å¹«ä½ æ’ç‰ˆç¨‹å¼ç¢¼ï¼Œç¢ºä¿æ•´å€‹å°ˆæ¡ˆçš„é¢¨æ ¼ä¸€è‡´ã€‚</p>
<h3 id="ç‰¹é»"><a href="#ç‰¹é»" class="headerlink" title="ç‰¹é»"></a>ç‰¹é»</h3><ul>
<li><strong>å°ˆæ³¨åœ¨æ’ç‰ˆ</strong>ï¼ˆç¸®æ’ã€å¼•è™Ÿã€æ›è¡Œã€é€—è™Ÿâ€¦ï¼‰ã€‚</li>
<li><strong>é¿å…çˆ­è«–</strong>ï¼šå¤§å®¶éƒ½ç”¨ç›¸åŒè¦å‰‡ï¼Œé–‹ç™¼è€…ä¸éœ€è¦å†ç‚ºé¢¨æ ¼åµæ¶ã€‚</li>
<li><strong>æ”¯æ´å¤šç¨®èªè¨€</strong>ï¼šJavaScriptã€TypeScriptã€JSONã€Markdownã€HTMLã€CSSâ€¦</li>
</ul>
<p>ğŸ“Œ ç°¡å–®æ¯”å–»ï¼š</p>
<ul>
<li><strong>Prettier</strong> &#x3D; å¹«ä½ ã€Œæ•´ç†æˆ¿é–“ã€ï¼Œè®“ç¨‹å¼ç¢¼æ•´é½Šä¹¾æ·¨ã€‚</li>
<li><strong>ESLint</strong>ï¼ˆæ˜å¤©æœƒä»‹ç´¹ï¼‰&#x3D; è¦ç¯„ä½ çš„ã€Œç”Ÿæ´»ç¿’æ…£ã€ï¼Œæª¢æŸ¥ç¨‹å¼å¯«æ³•æ˜¯å¦ç¬¦åˆæœ€ä½³å¯¦è¸ã€‚</li>
</ul>
<hr>
<h2 id="VSCode-å®‰è£-Prettier-å¥—ä»¶"><a href="#VSCode-å®‰è£-Prettier-å¥—ä»¶" class="headerlink" title="VSCode å®‰è£ Prettier å¥—ä»¶"></a>VSCode å®‰è£ Prettier å¥—ä»¶</h2><p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day12-Prettier/2-vscode-prettier.png?raw=true"></p>
<h2 id="å°ˆæ¡ˆåŠ å…¥-Prettier"><a href="#å°ˆæ¡ˆåŠ å…¥-Prettier" class="headerlink" title="å°ˆæ¡ˆåŠ å…¥ Prettier"></a>å°ˆæ¡ˆåŠ å…¥ Prettier</h2><p>å®‰è£ Prettierï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save-dev prettier</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="è¨­å®š-Prettier"><a href="#è¨­å®š-Prettier" class="headerlink" title="è¨­å®š Prettier"></a>è¨­å®š Prettier</h2><p>åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„æ–°å¢ <code>.prettierrc</code>ï¼Œçµ±ä¸€è¦å‰‡ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;semi&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;singleQuote&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;trailingComma&quot;</span><span class="punctuation">:</span> <span class="string">&quot;all&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tabWidth&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;printWidth&quot;</span><span class="punctuation">:</span> <span class="number">140</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>èªªæ˜ï¼š</p>
<ul>
<li><code>semi: true</code> â†’ æ¯è¡Œçµå°¾åŠ ä¸Šåˆ†è™Ÿ</li>
<li><code>singleQuote: false</code> â†’ ä½¿ç”¨é›™å¼•è™Ÿ</li>
<li><code>trailingComma: &quot;all&quot;</code> â†’ ç‰©ä»¶æœ€å¾Œä¸€é …ä¹ŸåŠ é€—è™Ÿï¼ˆæ–¹ä¾¿æ—¥å¾Œæ–°å¢é …ç›®ï¼‰</li>
<li><code>tabWidth: 2</code> â†’ ç¸®æ’ 2 æ ¼</li>
<li><code>printWidth: 140</code> â†’ æ¯è¡Œæœ€é•· 140 å­—å…ƒ</li>
</ul>
<hr>
<h2 id="å¿½ç•¥æª”æ¡ˆï¼š-prettierignore"><a href="#å¿½ç•¥æª”æ¡ˆï¼š-prettierignore" class="headerlink" title="å¿½ç•¥æª”æ¡ˆï¼š.prettierignore"></a>å¿½ç•¥æª”æ¡ˆï¼š<code>.prettierignore</code></h2><p>å’Œ <code>.gitignore</code> é¡ä¼¼ï¼Œé€™è£¡è¨­å®š Prettier ä¸è¦è™•ç†çš„æª”æ¡ˆï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># å¿½ç•¥ä¾è³´å¥—ä»¶</span><br><span class="line">node_modules</span><br><span class="line"></span><br><span class="line"># å¿½ç•¥ç·¨è­¯å¾Œçš„è¼¸å‡º</span><br><span class="line">dist</span><br><span class="line">build</span><br><span class="line"></span><br><span class="line"># å¿½ç•¥ç’°å¢ƒè®Šæ•¸è¨­å®šæª”</span><br><span class="line">.env</span><br><span class="line">.env.*</span><br><span class="line"></span><br><span class="line"># å¿½ç•¥ç‰ˆæœ¬æ§åˆ¶èˆ‡é–æª”</span><br><span class="line">.git</span><br><span class="line">.gitignore</span><br><span class="line">package-lock.json</span><br><span class="line">yarn.lock</span><br><span class="line">pnpm-lock.yaml</span><br><span class="line"></span><br><span class="line"># æ¸¬è©¦è¦†è“‹ç‡å ±å‘Š</span><br><span class="line">coverage</span><br><span class="line"></span><br><span class="line"># Log æª”æ¡ˆèˆ‡ç´€éŒ„</span><br><span class="line">logs</span><br><span class="line">*.log</span><br><span class="line"></span><br><span class="line"># éœæ…‹è³‡æºæˆ–ä¸Šå‚³è³‡æ–™</span><br><span class="line">public/</span><br><span class="line">static/</span><br><span class="line">uploads/</span><br><span class="line"></span><br><span class="line"># å¿½ç•¥ Prettier è‡ªå·±çš„ ignore è¨­å®š</span><br><span class="line">.prettierignore</span><br><span class="line"></span><br><span class="line"># åœ–ç‰‡èˆ‡åª’é«”æª”æ¡ˆ</span><br><span class="line">*.png</span><br><span class="line">*.jpg</span><br><span class="line">*.jpeg</span><br><span class="line">*.svg</span><br><span class="line">*.gif</span><br><span class="line">*.mp4</span><br><span class="line">*.webm</span><br><span class="line"></span><br><span class="line"># å¯é¸ï¼šå¿½ç•¥è³‡æ–™åº«æª”æ¡ˆæˆ– dump æª”</span><br><span class="line">*.sqlite</span><br><span class="line">*.sql</span><br><span class="line">*.dump</span><br></pre></td></tr></table></figure>

<h3 id="ç‚ºä»€éº¼è¦æ–°å¢-prettierignoreï¼Ÿ"><a href="#ç‚ºä»€éº¼è¦æ–°å¢-prettierignoreï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼è¦æ–°å¢ .prettierignoreï¼Ÿ"></a>ç‚ºä»€éº¼è¦æ–°å¢ <code>.prettierignore</code>ï¼Ÿ</h3><ol>
<li><strong>ä¸å¿…è¦æ ¼å¼åŒ–</strong>ï¼šåƒ <code>node_modules</code> æˆ– <code>dist</code>ï¼Œä¸æ˜¯æˆ‘å€‘è‡ªå·±å¯«çš„ç¨‹å¼ç¢¼ã€‚</li>
<li><strong>æ•ˆèƒ½è€ƒé‡</strong>ï¼šé¿å… Prettier è™•ç†å¤§é‡ç„¡æ„ç¾©çš„æª”æ¡ˆã€‚</li>
<li><strong>é¿å…è¡çª</strong>ï¼šåƒ <code>.env</code> ï¼Œæ ¼å¼è¢«æ”¹å¯èƒ½æœƒå‡ºéŒ¯ã€‚</li>
</ol>
<hr>
<h2 id="å°ˆæ¡ˆæ ¼å¼åŒ–ç¯„ä¾‹"><a href="#å°ˆæ¡ˆæ ¼å¼åŒ–ç¯„ä¾‹" class="headerlink" title="å°ˆæ¡ˆæ ¼å¼åŒ–ç¯„ä¾‹"></a>å°ˆæ¡ˆæ ¼å¼åŒ–ç¯„ä¾‹</h2><p>åœ¨ <code>package.json</code> åŠ å…¥ scriptsï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettier --write \&quot;src/**/*.&#123;js,ts&#125;\&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format:check&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettier --check \&quot;src/**/*.&#123;js,ts&#125;\&quot;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>npm run format:check</code>ï¼šåªæª¢æŸ¥ï¼Œä¸æœƒä¿®æ”¹ç¨‹å¼ç¢¼ (å¯ç™¼ç¾ <code>todoController.ts</code> å’Œ <code>todoRoutes.ts</code> æœ‰æ ¼å¼ä¸Šçš„å•é¡Œ)<br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day12-Prettier/3-format-check.png?raw=true"></li>
<li><code>npm run format</code>ï¼šè‡ªå‹•æ ¼å¼åŒ– <code>src</code> åº•ä¸‹çš„ç¨‹å¼ç¢¼<br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day12-Prettier/4-format-code.png?raw=true"></li>
<li>é™„ä¸Šå°ˆæ¡ˆç¨‹å¼ç¢¼ç¶“é prettier æ ¼å¼åŒ–å¾Œçš„çµæœ (<a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commits/feature/init-ts-express/">https://github.com/ArvinYang1925/iThome2025-node-ts/commits/feature/init-ts-express/</a>)</li>
</ul>
<p><code>todoController.ts</code></p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day12-Prettier/5-format-controller.png?raw=true"></p>
<p><code>todoRoutes.ts</code></p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day12-Prettier/6-format-route.png?raw=true"></p>
<p>æˆåŠŸé€é Prettier æ ¼å¼åŒ–ç¨‹å¼ç¢¼ ğŸ’ª</p>
<hr>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><ul>
<li><strong>Coding Style</strong>ï¼šé¿å…å°ˆæ¡ˆè®Šå¾—å‡Œäº‚ï¼Œæé«˜åœ˜éšŠå”ä½œæ•ˆç‡ã€‚</li>
<li><strong>Prettier</strong>ï¼šå°ˆæ³¨åœ¨ã€Œæ’ç‰ˆã€ï¼Œè®“ç¨‹å¼ç¢¼çœ‹èµ·ä¾†çµ±ä¸€ä¸”ä¹¾æ·¨ã€‚</li>
<li><strong>æ­é… ESLint</strong>ï¼šPrettier è² è²¬ã€Œé•·ç›¸ã€ï¼ŒESLint è² è²¬ã€Œç¿’æ…£ã€ï¼Œå…©è€…æ­é…æ‰å®Œæ•´ã€‚</li>
</ul>
<p>ğŸ‘‰ æ˜å¤© (Day12) æˆ‘å€‘æœƒä»‹ç´¹ <strong>ESLint</strong>ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•å¹«åŠ©æˆ‘å€‘å¯«å‡ºæ›´æ­£ç¢ºã€æ›´æœ‰å“è³ªçš„ç¨‹å¼ç¢¼ã€‚</p>
<hr>
<h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/ce334a8f7f3366eb00ba95c1977326a03e3e72e2">Github é€£çµ</a></p>
<blockquote>
<p>commit : setup prettier</p>
</blockquote>
<p><a href="https://ithelp.ithome.com.tw/m/articles/10294321">éš¨æ™‚éš¨åœ°æ ¼å¼åŒ– - Prettier</a></p>
<p><a href="https://israynotarray.com/javascript/20231031/1586150719/">ä½ çµ‚ç©¶è¦ç”¨ Prettierï¼Œç‚ºä»€éº¼ä¸ä¸€é–‹å§‹å°±ç”¨ã€ŒPrettierã€å‘¢ï¼Ÿ</a></p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 14 - API é©—è­‰æ•‘æ˜Ÿï¼šç”¨ Zod é©—è­‰ä¾†æª¢æŸ¥</title>
    <url>/2025/09/28/Day14%20-%20Zod/</url>
    <content><![CDATA[<p>åœ¨é–‹ç™¼å¾Œç«¯ API çš„æ™‚å€™ï¼Œä½ ä¸€å®šé‡éé€™äº›ç‹€æ³ï¼š</p>
<ul>
<li>å‰ç«¯å‚³ä¾†çš„è³‡æ–™å°‘äº†ä¸€å€‹æ¬„ä½ã€‚</li>
<li>è¼¸å…¥çš„å­—ä¸²å¤ªé•·ï¼Œç›´æ¥è®“è³‡æ–™åº«å ±éŒ¯ã€‚</li>
<li>åŸæœ¬æ‡‰è©²æ˜¯ <code>boolean</code>ï¼Œçµæœå»æ”¶åˆ° <code>&quot;true&quot;</code> æˆ– <code>1</code>ã€‚</li>
</ul>
<p>å¦‚æœæ¯æ¬¡éƒ½è¦æ‰‹å‹•æª¢æŸ¥ <code>req.body</code>ï¼Œç¨‹å¼ç¢¼æœƒè®Šå¾—åˆé•·åˆé›£ç¶­è­·ã€‚</p>
<p>ğŸ‘‰ é€™æ™‚å€™ï¼Œ<strong>Zod å°±æ˜¯æˆ‘å€‘çš„é˜²å‘†ç¥å™¨</strong>ã€‚</p>
<span id="more"></span>

<hr>
<h2 id="1-ç‚ºä»€éº¼è¦ç”¨-Zodï¼Ÿ"><a href="#1-ç‚ºä»€éº¼è¦ç”¨-Zodï¼Ÿ" class="headerlink" title="1. ç‚ºä»€éº¼è¦ç”¨ Zodï¼Ÿ"></a>1. ç‚ºä»€éº¼è¦ç”¨ Zodï¼Ÿ</h2><p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day14-Zod/1-zod.png?raw=true"></p>
<p>Zod æ˜¯ä¸€å€‹ <strong>TypeScript-first çš„è³‡æ–™é©—è­‰å·¥å…·</strong>ï¼Œå®ƒçš„ç‰¹é»åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>èªæ³•ç›´è¦º</strong>ï¼š<code>z.string().min(1)</code> å°±èƒ½å®šç¾©è¦å‰‡ã€‚</li>
<li><strong>èˆ‡ TS æ•´åˆ</strong>ï¼šSchema æœ¬èº«å°±æ˜¯å‹åˆ¥ï¼Œå¯ä»¥ç›´æ¥æ¨å°ã€‚</li>
<li><strong>å¾Œç«¯é˜²å‘†</strong>ï¼šé¿å…éŒ¯èª¤è³‡æ–™å¯«é€²è³‡æ–™åº«ã€‚</li>
</ul>
<hr>
<h2 id="2-Zod-åŸºç¤çŸ¥è­˜"><a href="#2-Zod-åŸºç¤çŸ¥è­˜" class="headerlink" title="2. Zod åŸºç¤çŸ¥è­˜"></a>2. Zod åŸºç¤çŸ¥è­˜</h2><p>å…ˆä¾†çœ‹ä¸€å€‹å°ç¯„ä¾‹ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; z &#125; <span class="keyword">from</span> <span class="string">&quot;zod&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šç¾© schema</span></span><br><span class="line"><span class="keyword">const</span> userSchema = z.<span class="title function_">object</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: z.<span class="title function_">string</span>().<span class="title function_">min</span>(<span class="number">1</span>, <span class="string">&quot;Name is required&quot;</span>),</span><br><span class="line">  <span class="attr">age</span>: z.<span class="title function_">number</span>().<span class="title function_">int</span>().<span class="title function_">min</span>(<span class="number">0</span>),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é©—è­‰è³‡æ–™</span></span><br><span class="line"><span class="keyword">const</span> result = userSchema.<span class="title function_">safeParse</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;&quot;</span>, <span class="attr">age</span>: -<span class="number">1</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!result.<span class="property">success</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">error</span>.<span class="property">errors</span>);</span><br><span class="line">  <span class="comment">// [</span></span><br><span class="line">  <span class="comment">//   &#123; message: &quot;Name is required&quot;, path: [&quot;name&quot;] &#125;,</span></span><br><span class="line">  <span class="comment">//   &#123; message: &quot;Number must be greater than or equal to 0&quot;, path: [&quot;age&quot;] &#125;</span></span><br><span class="line">  <span class="comment">// ]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¸¸è¦‹å‹åˆ¥ï¼š</p>
<ul>
<li><code>z.string()</code>ï¼šå­—ä¸²</li>
<li><code>z.number()</code>ï¼šæ•¸å­—</li>
<li><code>z.boolean()</code>ï¼šå¸ƒæ—</li>
<li><code>z.object(&#123;...&#125;)</code>ï¼šç‰©ä»¶</li>
</ul>
<p>å¸¸ç”¨é©—è­‰æ–¹æ³•ï¼š</p>
<ul>
<li><code>.min(n)</code> &#x2F; <code>.max(n)</code>ï¼šé™åˆ¶ç¯„åœ</li>
<li><code>.optional()</code>ï¼šæ¬„ä½å¯é¸</li>
<li><code>.email()</code>ï¼šæª¢æŸ¥ Email æ ¼å¼</li>
</ul>
<p>ä¹Ÿå¯ç”¨ç·šä¸Š Zod Playground å¿«é€Ÿæ¸¬è©¦ä¸€ä¸‹:</p>
<p><a href="https://zod-playground.vercel.app/?appdata=N4IgzgxgFgpgtgQxALhALwHQHsBGArGCAFwApgAdAOwAJrKE4ZlrMwiAnAS0oHMSBKDHG4kAjABpq5EADkGMapzDV2MAI4BXTqoAm0-uKq0EPJiwyUNcHDHYCM3UoOGUSABgNUAvvwDcIcRAANwQAGw0YMBQAbRBgOnlmaQApLChKaUkTMwAmN2ovEABdQKDbME4sShQQABYMUQbRAJAlAC0sHQBZbk4UADMwsBgvIA">https://zod-playground.vercel.app/?appdata=N4IgzgxgFgpgtgQxALhALwHQHsBGArGCAFwApgAdAOwAJrKE4ZlrMwiAnAS0oHMSBKDHG4kAjABpq5EADkGMapzDV2MAI4BXTqoAm0-uKq0EPJiwyUNcHDHYCM3UoOGUSABgNUAvvwDcIcRAANwQAGw0YMBQAbRBgOnlmaQApLChKaUkTMwAmN2ovEABdQKDbME4sShQQABYMUQbRAJAlAC0sHQBZbk4UADMwsBgvIA</a></p>
<hr>
<h2 id="3-å®‰è£-Zod"><a href="#3-å®‰è£-Zod" class="headerlink" title="3. å®‰è£ Zod"></a>3. å®‰è£ Zod</h2><p>åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install zod</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-å»ºç«‹é©—è­‰-Schema"><a href="#4-å»ºç«‹é©—è­‰-Schema" class="headerlink" title="4. å»ºç«‹é©—è­‰ Schema"></a>4. å»ºç«‹é©—è­‰ Schema</h2><p>å»ºç«‹ <code>src/validator/todoValidation.ts</code>ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; z &#125; <span class="keyword">from</span> <span class="string">&quot;zod&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createTodoSchema = z.<span class="title function_">object</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: z</span><br><span class="line">    .<span class="title function_">string</span>()</span><br><span class="line">    .<span class="title function_">min</span>(<span class="number">1</span>, &#123; <span class="attr">message</span>: <span class="string">&quot;Title is required&quot;</span> &#125;)</span><br><span class="line">    .<span class="title function_">max</span>(<span class="number">100</span>, &#123; <span class="attr">message</span>: <span class="string">&quot;Title must be at most 100 characters&quot;</span> &#125;),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> updateTodoSchema = z.<span class="title function_">object</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: z.<span class="title function_">string</span>().<span class="title function_">optional</span>(),</span><br><span class="line">  <span class="attr">completed</span>: z.<span class="title function_">boolean</span>().<span class="title function_">optional</span>(),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-åœ¨-Controller-ä½¿ç”¨é©—è­‰"><a href="#5-åœ¨-Controller-ä½¿ç”¨é©—è­‰" class="headerlink" title="5. åœ¨ Controller ä½¿ç”¨é©—è­‰"></a>5. åœ¨ Controller ä½¿ç”¨é©—è­‰</h2><p>åœ¨ <code>todoController.ts</code> ä¸­å° <code>createTodo</code>ã€<code>updateTodo</code> å¥—ç”¨ <code>.safeParse()</code>ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Request</span>, <span class="title class_">Response</span>, <span class="title class_">NextFunction</span> &#125; <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppDataSource</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../config/db&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Todo</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../entities/Todo&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  createTodoSchema,</span><br><span class="line">  updateTodoSchema,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;../validator/todoValidation&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todoRepository = <span class="title class_">AppDataSource</span>.<span class="title function_">getRepository</span>(<span class="title class_">Todo</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createTodo</span>(<span class="params"></span></span><br><span class="line"><span class="params">  req: Request,</span></span><br><span class="line"><span class="params">  res: Response,</span></span><br><span class="line"><span class="params">  next: NextFunction</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> parsed = createTodoSchema.<span class="title function_">safeParse</span>(req.<span class="property">body</span>);</span><br><span class="line">    <span class="keyword">if</span> (!parsed.<span class="property">success</span>) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;failed&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;æ¨™é¡Œéé•·æˆ–éçŸ­&quot;</span> &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> newTodo = todoRepository.<span class="title function_">create</span>(&#123; <span class="attr">title</span>: parsed.<span class="property">data</span>.<span class="property">title</span> &#125;);</span><br><span class="line">    <span class="keyword">const</span> savedTodo = <span class="keyword">await</span> todoRepository.<span class="title function_">save</span>(newTodo);</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">201</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">data</span>: savedTodo &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateTodo</span>(<span class="params"></span></span><br><span class="line"><span class="params">  req: Request,</span></span><br><span class="line"><span class="params">  res: Response,</span></span><br><span class="line"><span class="params">  next: NextFunction</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; id &#125; = req.<span class="property">params</span>;</span><br><span class="line">    <span class="keyword">const</span> parsed = updateTodoSchema.<span class="title function_">safeParse</span>(req.<span class="property">body</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!parsed.<span class="property">success</span>) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;failed&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;æ›´æ–°è³‡æ–™æ ¼å¼éŒ¯èª¤&quot;</span> &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> todo = <span class="keyword">await</span> todoRepository.<span class="title function_">findOneBy</span>(&#123; id &#125;);</span><br><span class="line">    <span class="keyword">if</span> (!todo) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;error&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;Todo not found&quot;</span> &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    todo.<span class="property">title</span> = parsed.<span class="property">data</span>.<span class="property">title</span> ?? todo.<span class="property">title</span>;</span><br><span class="line">    todo.<span class="property">completed</span> = parsed.<span class="property">data</span>.<span class="property">completed</span> ?? todo.<span class="property">completed</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> updatedTodo = <span class="keyword">await</span> todoRepository.<span class="title function_">save</span>(todo);</span><br><span class="line">    res.<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">data</span>: updatedTodo &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="6-æˆæœå±•ç¤º"><a href="#6-æˆæœå±•ç¤º" class="headerlink" title="6. æˆæœå±•ç¤º"></a>6. æˆæœå±•ç¤º</h2><ul>
<li>âœ… æ­£ç¢ºè³‡æ–™ â†’ æ­£å¸¸æ–°å¢ &#x2F; æ›´æ–°</li>
<li>âŒ éŒ¯èª¤è³‡æ–™ â†’ ç›´æ¥è¢«æ“‹ä¸‹ä¸¦å›å‚³éŒ¯èª¤è¨Šæ¯<br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day14-Zod/2-postman-test.png?raw=true"></li>
</ul>
<hr>
<h2 id="7-ç¸½çµ"><a href="#7-ç¸½çµ" class="headerlink" title="7. ç¸½çµ"></a>7. ç¸½çµ</h2><p>ä»Šå¤©æˆ‘å€‘å­¸åˆ°ï¼š</p>
<ul>
<li>Zod æ˜¯ä¸€å€‹ç°¡å–®ç›´è¦ºçš„ <strong>é©—è­‰å·¥å…·</strong>ã€‚</li>
<li>é€é <code>safeParse()</code> å¯ä»¥æœ‰æ•ˆæ””æˆªä¸åˆæ³•è³‡æ–™ã€‚</li>
<li>åœ¨ API Controller ç›´æ¥ä½¿ç”¨ Schemaï¼Œå°±èƒ½å¤§å¹…æå‡å°ˆæ¡ˆçš„å®‰å…¨æ€§èˆ‡å¯ç¶­è­·æ€§ã€‚</li>
</ul>
<p>ä¸‹æ¬¡å¯« API æ™‚ï¼Œåˆ¥å¿˜äº†é€™å€‹å°å¹«æ‰‹ï¼</p>
<hr>
<h2 id="è£œå……è³‡æº"><a href="#è£œå……è³‡æº" class="headerlink" title="è£œå……è³‡æº"></a>è£œå……è³‡æº</h2><blockquote>
<p>commit : add zod validation</p>
</blockquote>
<p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/2bf8d89d9096edd2960abf384ceb98528f43fc99">Github é€£çµ</a></p>
<ul>
<li><a href="https://zod.dev/">Zod å®˜æ–¹æ–‡ä»¶</a></li>
<li><a href="https://www.youtube.com/results?search_query=zod+validation">Zod YouTube æ•™å­¸</a></li>
</ul>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 15 - API å®‰å…¨å‡ç´šï¼šJWT ç™»å…¥é©—è­‰å…¨æµç¨‹å¯¦ä½œ</title>
    <url>/2025/09/29/Day15%20-%20JWT/</url>
    <content><![CDATA[<p>åˆ°ç›®å‰ç‚ºæ­¢ï¼Œæˆ‘å€‘çš„ TodoList API å·²ç¶“èƒ½è·‘èµ·ä¾†ï¼Œé‚„èƒ½æŠŠè³‡æ–™å­˜é€²è³‡æ–™åº«ã€‚</p>
<p>ä½†æ˜¯ï¼Œæœ‰æ²’æœ‰ç™¼ç¾ä¸€å€‹å¤§æ¼æ´ï¼Ÿ</p>
<p>ğŸ‘‰ <strong>ä»»ä½•äººéƒ½å¯ä»¥æ“ä½œ todosï¼Œä¸éœ€è¦ç™»å…¥ï¼</strong></p>
<p>ä½†ç¾åœ¨æˆ‘å€‘å¸Œæœ›åšåˆ°ã€Œä¸€äººä¸€å¸³è™Ÿï¼Œä¸€äººä¸€ä»½ TodoListã€ã€‚</p>
<p>ä»Šå¤©æˆ‘å€‘å°±ä¾†å¹« API åŠ ä¸Š <strong>JWT ç™»å…¥é©—è­‰</strong>ï¼Œè®“ç³»çµ±æ›´æœ‰å®‰å…¨æ„Ÿ ğŸ’ªã€‚</p>
<span id="more"></span>

<p>P.S æœ¬æ¬¡å°ˆæ¡ˆç¨‹å¼ç¢¼ä¿®æ”¹å¹…åº¦è¼ƒå¤§ï¼Œä¸‹é¢åˆ—å‡ºé‡é»æ­¥é©Ÿï¼Œè©³ç´°å¯åƒè€ƒæœ€ä¸‹æ–¹<strong>è£œå……è³‡æº</strong>çš„å…§å®¹ã€‚</p>
<hr>
<h2 id="1-å…ˆè£ä¸Šå…©å¤§ç¥å™¨"><a href="#1-å…ˆè£ä¸Šå…©å¤§ç¥å™¨" class="headerlink" title="1. å…ˆè£ä¸Šå…©å¤§ç¥å™¨"></a>1. å…ˆè£ä¸Šå…©å¤§ç¥å™¨</h2><p>è¦å¯¦ä½œç™»å…¥é©—è­‰ï¼Œé€šå¸¸æœƒç”¨åˆ°é€™å…©å€‹å¥—ä»¶ï¼š</p>
<ul>
<li><strong>jsonwebtoken</strong>ï¼šç”¢ç”Ÿèˆ‡é©—è­‰ JWTï¼ˆJSON Web Tokenï¼‰ï¼Œç”¨ä¾†ç¢ºèªä½¿ç”¨è€…èº«ä»½ã€‚</li>
<li><strong>bcryptjs</strong>ï¼šå¹«å¯†ç¢¼åšé›œæ¹Šï¼ˆHashï¼‰ï¼Œç¢ºä¿ä¸æœƒæŠŠæ˜ç¢¼å­˜é€²è³‡æ–™åº«ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install jsonwebtoken bcryptjs</span><br><span class="line">npm install -D @types/jsonwebtoken @types/bcryptjs</span><br></pre></td></tr></table></figure>

<p>è£å¥½ä¹‹å¾Œï¼Œæˆ‘å€‘å°±èƒ½é–‹å§‹æå®š <strong>è¨»å†Š &#x2F; ç™»å…¥ &#x2F; é©—è­‰ middleware</strong> äº† ğŸš€ã€‚</p>
<hr>
<h2 id="2-æ–°å¢-User-å¯¦é«”"><a href="#2-æ–°å¢-User-å¯¦é«”" class="headerlink" title="2. æ–°å¢ User å¯¦é«”"></a>2. æ–°å¢ User å¯¦é«”</h2><p>æˆ‘å€‘éœ€è¦ä¸€å€‹ä½¿ç”¨è€…è³‡æ–™è¡¨ï¼Œæ‰èƒ½ç¶å®š Todoã€‚</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/entities/User.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">Entity</span>,</span><br><span class="line">  <span class="title class_">PrimaryGeneratedColumn</span>,</span><br><span class="line">  <span class="title class_">Column</span>,</span><br><span class="line">  <span class="title class_">CreateDateColumn</span>,</span><br><span class="line">  <span class="title class_">UpdateDateColumn</span>,</span><br><span class="line">  <span class="title class_">OneToMany</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;typeorm&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Todo</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./Todo&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="meta">@PrimaryGeneratedColumn</span>(<span class="string">&quot;uuid&quot;</span>)</span><br><span class="line">  id!: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Column</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;varchar&quot;</span>, <span class="attr">length</span>: <span class="number">50</span>, <span class="attr">nullable</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">  name!: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Column</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;varchar&quot;</span>, <span class="attr">length</span>: <span class="number">320</span>, <span class="attr">unique</span>: <span class="literal">true</span>, <span class="attr">nullable</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">  email!: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Column</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;varchar&quot;</span>, <span class="attr">length</span>: <span class="number">72</span>, <span class="attr">nullable</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">  password!: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@CreateDateColumn</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;created_at&quot;</span> &#125;)</span><br><span class="line">  createdAt!: <span class="title class_">Date</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@UpdateDateColumn</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;updated_at&quot;</span> &#125;)</span><br><span class="line">  updatedAt!: <span class="title class_">Date</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// èˆ‡ Todo çš„ä¸€å°å¤šé—œä¿‚</span></span><br><span class="line">  <span class="meta">@OneToMany</span>(<span class="function">() =&gt;</span> <span class="title class_">Todo</span>, <span class="function">(<span class="params">todo</span>) =&gt;</span> todo.<span class="property">user</span>)</span><br><span class="line">  todos?: <span class="title class_">Todo</span>[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†ä¾†ï¼ŒæŠŠ Todo ä¹Ÿé€£ä¸Šä½¿ç”¨è€…ï¼š(å¯ä»¥è¦†è“‹æœ¬ä¾†çš„ Todo.ts ç¨‹å¼ç¢¼)</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/entities/Todo.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">Entity</span>,</span><br><span class="line">  <span class="title class_">PrimaryGeneratedColumn</span>,</span><br><span class="line">  <span class="title class_">Column</span>,</span><br><span class="line">  <span class="title class_">CreateDateColumn</span>,</span><br><span class="line">  <span class="title class_">UpdateDateColumn</span>,</span><br><span class="line">  <span class="title class_">ManyToOne</span>,</span><br><span class="line">  <span class="title class_">JoinColumn</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;typeorm&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">User</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./User&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Todo</span> &#123;</span><br><span class="line">  <span class="meta">@PrimaryGeneratedColumn</span>(<span class="string">&quot;uuid&quot;</span>)</span><br><span class="line">  id!: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Column</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;varchar&quot;</span>, <span class="attr">length</span>: <span class="number">255</span>, <span class="attr">nullable</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">  title!: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Column</span>(&#123; <span class="attr">default</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">  completed!: <span class="built_in">boolean</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@CreateDateColumn</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;created_at&quot;</span> &#125;)</span><br><span class="line">  createdAt!: <span class="title class_">Date</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@UpdateDateColumn</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;updated_at&quot;</span> &#125;)</span><br><span class="line">  updatedAt!: <span class="title class_">Date</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// èˆ‡ User çš„å¤šå°ä¸€é—œä¿‚</span></span><br><span class="line">  <span class="meta">@Column</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;user_id&quot;</span> &#125;)</span><br><span class="line">  userId!: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@ManyToOne</span>(<span class="function">() =&gt;</span> <span class="title class_">User</span>, <span class="function">(<span class="params">user</span>) =&gt;</span> user.<span class="property">todos</span>, &#123; <span class="attr">onDelete</span>: <span class="string">&quot;CASCADE&quot;</span> &#125;)</span><br><span class="line">  <span class="meta">@JoinColumn</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;user_id&quot;</span> &#125;)</span><br><span class="line">  user!: <span class="title class_">User</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€™æ¨£ä¸€ä¾†ï¼ŒTodo å°±æœƒè·Ÿ User ç¶å®šå›‰ ã€‚</p>
<hr>
<h2 id="3-å¯†ç¢¼åŠ å¯†å·¥å…·"><a href="#3-å¯†ç¢¼åŠ å¯†å·¥å…·" class="headerlink" title="3. å¯†ç¢¼åŠ å¯†å·¥å…·"></a>3. å¯†ç¢¼åŠ å¯†å·¥å…·</h2><p>ä¸å»ºè­°æŠŠä½¿ç”¨è€…è¼¸å…¥çš„å¯†ç¢¼ç›´æ¥å­˜é€² DBã€‚</p>
<p>æ‰€ä»¥æˆ‘å€‘å…ˆå¯«ä¸€å€‹å°å·¥å…·ä¾†è™•ç†åŠ å¯†èˆ‡æ¯”å°ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/utils/passwordUtils.ts</span></span><br><span class="line"><span class="keyword">import</span> bcrypt <span class="keyword">from</span> <span class="string">&quot;bcryptjs&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">hashPassword</span>(<span class="params">plain: <span class="built_in">string</span></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> salt = <span class="keyword">await</span> bcrypt.<span class="title function_">genSalt</span>(<span class="number">10</span>);</span><br><span class="line">  <span class="keyword">return</span> bcrypt.<span class="title function_">hash</span>(plain, salt);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">comparePassword</span>(<span class="params"></span></span><br><span class="line"><span class="params">  plain: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  hashed: <span class="built_in">string</span></span></span><br><span class="line"><span class="params"></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">boolean</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> bcrypt.<span class="title function_">compare</span>(plain, hashed);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-JWT-å·¥å…·"><a href="#4-JWT-å·¥å…·" class="headerlink" title="4. JWT å·¥å…·"></a>4. JWT å·¥å…·</h2><p>JWT å°±åƒæ˜¯ä½¿ç”¨è€…çš„ã€Œé€šè¡Œè­‰ã€ã€‚</p>
<p>æˆ‘å€‘éœ€è¦èƒ½å¤  <strong>ç°½ç™¼ token</strong> ä»¥åŠ <strong>é©—è­‰ token</strong>ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/utils/jwtUtils.ts</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> jwt <span class="keyword">from</span> <span class="string">&quot;jsonwebtoken&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">JWTPayload</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">email</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Missing JWT_SECRET in .env&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">SECRET</span> = process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">EXPIRES_IN</span> = process.<span class="property">env</span>.<span class="property">JWT_EXPIRES_IN</span> || <span class="string">&quot;24h&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">generateToken</span>(<span class="params">payload: JWTPayload</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> jwt.<span class="title function_">sign</span>(payload, <span class="variable constant_">SECRET</span>, &#123;</span><br><span class="line">    <span class="attr">expiresIn</span>: <span class="variable constant_">EXPIRES_IN</span> <span class="keyword">as</span> jwt.<span class="property">SignOptions</span>[<span class="string">&quot;expiresIn&quot;</span>],</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">verifyToken</span>(<span class="params">token: <span class="built_in">string</span></span>): <span class="title class_">JWTPayload</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> jwt.<span class="title function_">verify</span>(token, <span class="variable constant_">SECRET</span>) <span class="keyword">as</span> <span class="title class_">JWTPayload</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-è¨»å†Šèˆ‡ç™»å…¥æµç¨‹"><a href="#5-è¨»å†Šèˆ‡ç™»å…¥æµç¨‹" class="headerlink" title="5. è¨»å†Šèˆ‡ç™»å…¥æµç¨‹"></a>5. è¨»å†Šèˆ‡ç™»å…¥æµç¨‹</h2><p>ç¾åœ¨ä¾†å¯« APIï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/controllers/authController.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Request</span>, <span class="title class_">Response</span>, <span class="title class_">NextFunction</span> &#125; <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  registerSchema,</span><br><span class="line">  loginSchema,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;../validator/authValidationSchemas&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppDataSource</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../config/db&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">User</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../entities/User&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; hashPassword, comparePassword &#125; <span class="keyword">from</span> <span class="string">&quot;../utils/passwordUtils&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; generateToken &#125; <span class="keyword">from</span> <span class="string">&quot;../utils/jwtUtils&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> jwt <span class="keyword">from</span> <span class="string">&quot;jsonwebtoken&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userRepo = <span class="title class_">AppDataSource</span>.<span class="title function_">getRepository</span>(<span class="title class_">User</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">register</span>(<span class="params"></span></span><br><span class="line"><span class="params">  req: Request,</span></span><br><span class="line"><span class="params">  res: Response,</span></span><br><span class="line"><span class="params">  next: NextFunction</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> parsed = registerSchema.<span class="title function_">safeParse</span>(req.<span class="property">body</span>);</span><br><span class="line">    <span class="keyword">if</span> (!parsed.<span class="property">success</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> issue = parsed.<span class="property">error</span>.<span class="property">issues</span>[<span class="number">0</span>];</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;failed&quot;</span>, <span class="attr">message</span>: issue.<span class="property">message</span> &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> &#123; name, email, password &#125; = parsed.<span class="property">data</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æª¢æŸ¥æ˜¯å¦å·²è¨»å†Š</span></span><br><span class="line">    <span class="keyword">const</span> exists = <span class="keyword">await</span> userRepo.<span class="title function_">findOneBy</span>(&#123; email &#125;);</span><br><span class="line">    <span class="keyword">if</span> (exists) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">409</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;failed&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;Email å·²è¢«ä½¿ç”¨&quot;</span> &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºç«‹ Userï¼ˆç§»é™¤è§’è‰²ç›¸é—œé‚è¼¯ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> hashed = <span class="keyword">await</span> <span class="title function_">hashPassword</span>(password);</span><br><span class="line">    <span class="keyword">const</span> user = userRepo.<span class="title function_">create</span>(&#123;</span><br><span class="line">      name,</span><br><span class="line">      email,</span><br><span class="line">      <span class="attr">password</span>: hashed,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> saved = <span class="keyword">await</span> userRepo.<span class="title function_">save</span>(user);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆ token</span></span><br><span class="line">    <span class="keyword">const</span> token = <span class="title function_">generateToken</span>(&#123; <span class="attr">id</span>: saved.<span class="property">id</span>, <span class="attr">email</span>: saved.<span class="property">email</span> &#125;);</span><br><span class="line">    <span class="keyword">const</span> &#123; exp, iat &#125; = jwt.<span class="title function_">decode</span>(token) <span class="keyword">as</span> &#123; <span class="attr">exp</span>: <span class="built_in">number</span>; <span class="attr">iat</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> expiresIn = exp - iat;</span><br><span class="line"></span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">201</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;è¨»å†ŠæˆåŠŸ&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        token,</span><br><span class="line">        expiresIn,</span><br><span class="line">        <span class="attr">userInfo</span>: &#123;</span><br><span class="line">          <span class="attr">id</span>: saved.<span class="property">id</span>,</span><br><span class="line">          <span class="attr">name</span>: saved.<span class="property">name</span>,</span><br><span class="line">          <span class="attr">email</span>: saved.<span class="property">email</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="title function_">next</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params">req: Request, res: Response, next: NextFunction</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> parsed = loginSchema.<span class="title function_">safeParse</span>(req.<span class="property">body</span>);</span><br><span class="line">    <span class="keyword">if</span> (!parsed.<span class="property">success</span>) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;failed&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤&quot;</span> &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> &#123; email, password &#125; = parsed.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> userRepo.<span class="title function_">findOneBy</span>(&#123; email &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!user || !(<span class="keyword">await</span> <span class="title function_">comparePassword</span>(password, user.<span class="property">password</span>))) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;failed&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤&quot;</span> &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> token = <span class="title function_">generateToken</span>(&#123; <span class="attr">id</span>: user.<span class="property">id</span>, <span class="attr">email</span>: user.<span class="property">email</span> &#125;);</span><br><span class="line">    <span class="keyword">const</span> &#123; exp, iat &#125; = jwt.<span class="title function_">decode</span>(token) <span class="keyword">as</span> &#123; <span class="attr">exp</span>: <span class="built_in">number</span>; <span class="attr">iat</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> expiresIn = exp - iat;</span><br><span class="line"></span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;ç™»å…¥æˆåŠŸ&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        token,</span><br><span class="line">        expiresIn,</span><br><span class="line">        <span class="attr">userInfo</span>: &#123;</span><br><span class="line">          <span class="attr">id</span>: user.<span class="property">id</span>,</span><br><span class="line">          <span class="attr">name</span>: user.<span class="property">name</span>,</span><br><span class="line">          <span class="attr">email</span>: user.<span class="property">email</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="title function_">next</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">logout</span>(<span class="params">req: Request, res: Response, next: NextFunction</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;ç™»å‡ºæˆåŠŸ&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="title function_">next</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç™»å…¥çš„æµç¨‹å‰‡æ˜¯æ¯”å°å¯†ç¢¼ â†’ ç™¼ tokenã€‚</p>
<p>ç„¶å¾Œ routes æ–°å¢ authRoutes.ts</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/routes/authRoutes.ts</span></span><br><span class="line">import <span class="punctuation">&#123;</span> Router <span class="punctuation">&#125;</span> from <span class="string">&quot;express&quot;</span>;</span><br><span class="line">import <span class="punctuation">&#123;</span> register<span class="punctuation">,</span> login<span class="punctuation">,</span> logout <span class="punctuation">&#125;</span> from <span class="string">&quot;../controllers/authController&quot;</span>;</span><br><span class="line">import <span class="punctuation">&#123;</span> isAuth <span class="punctuation">&#125;</span> from <span class="string">&quot;../middleware/isAuth&quot;</span>;</span><br><span class="line"></span><br><span class="line">const router = Router();</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">&quot;/register&quot;</span><span class="punctuation">,</span> register);</span><br><span class="line">router.post(<span class="string">&quot;/login&quot;</span><span class="punctuation">,</span> login);</span><br><span class="line">router.post(<span class="string">&quot;/logout&quot;</span><span class="punctuation">,</span> isAuth<span class="punctuation">,</span> logout);</span><br><span class="line"></span><br><span class="line">export default router;</span><br></pre></td></tr></table></figure>

<p>.env è¨˜å¾—ä¹Ÿè¦åŠ ä¸Š <code>JWT_SECRET</code></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">JWT_SECRET=jwt_secret</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="6-èªè­‰ä¸­é–“ä»¶"><a href="#6-èªè­‰ä¸­é–“ä»¶" class="headerlink" title="6. èªè­‰ä¸­é–“ä»¶"></a>6. èªè­‰ä¸­é–“ä»¶</h2><p>æœ‰äº† token ä¹‹å¾Œï¼Œé‚„è¦èƒ½æª¢æŸ¥å®ƒæ˜¯å¦åˆæ³•ã€‚</p>
<p>é€™æ™‚å€™å°±éœ€è¦ middleware å‡ºå ´å•¦ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/middleware/isAuth.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Request</span>, <span class="title class_">Response</span>, <span class="title class_">NextFunction</span> &#125; <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; verifyToken, <span class="title class_">JWTPayload</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../utils/jwtUtils&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">AuthRequest</span> <span class="keyword">extends</span> <span class="title class_">Request</span> &#123;</span><br><span class="line">  user?: <span class="title class_">JWTPayload</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isAuth</span>(<span class="params">req: AuthRequest, res: Response, next: NextFunction</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> auth = req.<span class="property">headers</span>.<span class="property">authorization</span>;</span><br><span class="line">  <span class="keyword">if</span> (!auth?.<span class="title function_">startsWith</span>(<span class="string">&quot;Bearer &quot;</span>)) &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;failed&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;è«‹å…ˆç™»å…¥&quot;</span> &#125;);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> token = auth.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>)[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> payload = <span class="title function_">verifyToken</span>(token);</span><br><span class="line">    req.<span class="property">user</span> = payload;</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;failed&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;Token ç„¡æ•ˆæˆ–å·²éæœŸ&quot;</span> &#125;);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="7-ä¿è­·-Todo-API"><a href="#7-ä¿è­·-Todo-API" class="headerlink" title="7. ä¿è­· Todo API"></a>7. ä¿è­· Todo API</h2><p>æœ€å¾Œï¼Œè®“æ‰€æœ‰ Todo æ“ä½œéƒ½å¿…é ˆå¸¶ä¸Š token æ‰èƒ½åŸ·è¡Œï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/routes/todoRoutes.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Router</span> &#125; <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  getTodos,</span><br><span class="line">  createTodo,</span><br><span class="line">  updateTodo,</span><br><span class="line">  deleteTodo,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;../controllers/todoController&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; isAuth &#125; <span class="keyword">from</span> <span class="string">&quot;../middleware/isAuth&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, isAuth, getTodos);</span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/&quot;</span>, isAuth, createTodo);</span><br><span class="line">router.<span class="title function_">put</span>(<span class="string">&quot;/:id&quot;</span>, isAuth, updateTodo);</span><br><span class="line">router.<span class="title function_">delete</span>(<span class="string">&quot;/:id&quot;</span>, isAuth, deleteTodo);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="8-å¯¦ä½œæˆæœ"><a href="#8-å¯¦ä½œæˆæœ" class="headerlink" title="8.å¯¦ä½œæˆæœ"></a>8.å¯¦ä½œæˆæœ</h2><p>ç”¨ postman æ¸¬è©¦è¨»å†Š API :</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day15-JWT/1-register.png?raw=true"></p>
<p>æ¸¬è©¦ç™»å…¥ API :</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day15-JWT/2-login.png?raw=true"></p>
<p>åœ¨ postman å‚³é€è«‹æ±‚æ™‚å¸¶ä¸Š token</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day15-JWT/3-token.png?raw=true"></p>
<p>å˜—è©¦æ–°å¢å¾…è¾¦äº‹é …</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day15-JWT/4-add-todo.png?raw=true"></p>
<p>å¯ç™¼ç¾å¾…è¾¦äº‹é …ç¶å®šäº† userId</p>
<p>ç¾åœ¨ï¼Œæ¯å€‹äººéƒ½åªèƒ½æ“ä½œè‡ªå·±çš„ Todoï¼ğŸ‰</p>
<hr>
<h2 id="ğŸ”‘-æœ¬æ—¥é‡é»è¤‡ç¿’"><a href="#ğŸ”‘-æœ¬æ—¥é‡é»è¤‡ç¿’" class="headerlink" title="ğŸ”‘ æœ¬æ—¥é‡é»è¤‡ç¿’"></a>ğŸ”‘ æœ¬æ—¥é‡é»è¤‡ç¿’</h2><ol>
<li><strong>bcryptjs</strong>ï¼šåŠ å¯†å¯†ç¢¼ï¼Œä¿è­·ä½¿ç”¨è€…è³‡æ–™ã€‚</li>
<li><strong>jsonwebtoken</strong>ï¼šç°½ç™¼ &#x2F; é©—è­‰ Tokenï¼Œå¯¦ç¾ç™»å…¥é©—è­‰ã€‚</li>
<li><strong>middleware</strong>ï¼šä¿è­· APIï¼Œåªå…è¨±åˆæ³•ä½¿ç”¨è€…æ“ä½œã€‚</li>
<li><strong>User èˆ‡ Todo é—œè¯</strong>ï¼šå¯¦ç¾ä¸€äººä¸€ä»½ TodoListã€‚</li>
</ol>
<hr>
<h2 id="å¯«åœ¨æœ€å¾Œ"><a href="#å¯«åœ¨æœ€å¾Œ" class="headerlink" title="å¯«åœ¨æœ€å¾Œ"></a>å¯«åœ¨æœ€å¾Œ</h2><p>åšåˆ°é€™è£¡ï¼Œæˆ‘å€‘çš„ TodoList API å·²ç¶“å‡ç´šåˆ°ã€Œå¤šäººç³»çµ±ã€ã€‚</p>
<p>æ¯å€‹äººéƒ½å¿…é ˆè¨»å†Š &#x2F; ç™»å…¥ï¼Œæ‰èƒ½å»ºç«‹å±¬æ–¼è‡ªå·±çš„ Todoã€‚</p>
<hr>
<h2 id="è£œå……è³‡æº"><a href="#è£œå……è³‡æº" class="headerlink" title="è£œå……è³‡æº"></a>è£œå……è³‡æº</h2><blockquote>
<p>commit : install jwt plugin and implement auth feature</p>
</blockquote>
<p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/cbaf0b87023e4232ee25ca63cfe873dde4613b4a">Github é€£çµ</a></p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 16 - Firebase Storage åˆæ¢ï¼šè¼•é¬†æå®šå°ˆæ¡ˆæª”æ¡ˆä¸Šå‚³å‰ç½®ä½œæ¥­</title>
    <url>/2025/09/30/Day16%20-%20Firebase-Intro/</url>
    <content><![CDATA[<p>åœ¨å‰å¹¾å¤©ï¼Œæˆ‘å€‘çš„ API ä¸»è¦è™•ç†ã€Œè³‡æ–™ã€çš„ CRUDã€‚</p>
<p>ä½†åœ¨çœŸå¯¦å°ˆæ¡ˆè£¡ï¼Œé™¤äº†æ–‡å­—è³‡æ–™ï¼Œ<strong>åœ–ç‰‡èˆ‡æª”æ¡ˆä¸Šå‚³</strong> ä¹Ÿå¹¾ä¹æ˜¯å¿…å‚™åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼šæœƒå“¡å¤§é ­è²¼ã€å•†å“åœ–ç‰‡ã€æ–‡ç« é…åœ–ï¼‰ã€‚</p>
<p>é€™æ™‚å€™ï¼Œ<strong>Firebase Storage</strong> å°±èƒ½æ´¾ä¸Šç”¨å ´å•¦ï¼</p>
<p>å®ƒæ˜¯ Google æä¾›çš„é›²ç«¯æª”æ¡ˆå„²å­˜æœå‹™ï¼Œé©åˆé–‹ç™¼è€…å¿«é€Ÿä¸Šæ‰‹ï¼Œç‰¹åˆ¥é©åˆ side project æˆ– prototypeã€‚</p>
<span id="more"></span>

<hr>
<h2 id="1-Firebase-Storage-æ˜¯ä»€éº¼ï¼Ÿ"><a href="#1-Firebase-Storage-æ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="1. Firebase Storage æ˜¯ä»€éº¼ï¼Ÿ"></a>1. Firebase Storage æ˜¯ä»€éº¼ï¼Ÿ</h2><ul>
<li>ç”± Google Firebase æä¾›çš„ <strong>é›²ç«¯ç‰©ä»¶å„²å­˜</strong> æœå‹™</li>
<li>ä¸»è¦æ‹¿ä¾†å­˜æ”¾ <strong>åœ–ç‰‡ã€å½±ç‰‡ã€éŸ³è¨Šã€PDFâ€¦</strong> å„ç¨®æª”æ¡ˆ</li>
<li>å„ªé»ï¼š<ul>
<li>ç›´æ¥ç¶ Firebase å°ˆæ¡ˆï¼ˆä¸ç”¨é¡å¤–ç¶­è­·ä¼ºæœå™¨ï¼‰</li>
<li>æä¾›å®‰å…¨è¦å‰‡ï¼ˆSecurity Rulesï¼‰æ§åˆ¶èª°èƒ½è®€å¯«</li>
<li>æœ‰å…è²»é¡åº¦ï¼ˆé©åˆ side projectï¼‰</li>
</ul>
</li>
</ul>
<hr>
<h2 id="2-å»ºç«‹-Firebase-å°ˆæ¡ˆ-é–‹å•Ÿ-Storage"><a href="#2-å»ºç«‹-Firebase-å°ˆæ¡ˆ-é–‹å•Ÿ-Storage" class="headerlink" title="2. å»ºç«‹ Firebase å°ˆæ¡ˆ &amp; é–‹å•Ÿ Storage"></a>2. å»ºç«‹ Firebase å°ˆæ¡ˆ &amp; é–‹å•Ÿ Storage</h2><h3 id="æ­¥é©Ÿä¸€ï¼šå»ºç«‹-Firebase-å°ˆæ¡ˆ"><a href="#æ­¥é©Ÿä¸€ï¼šå»ºç«‹-Firebase-å°ˆæ¡ˆ" class="headerlink" title="æ­¥é©Ÿä¸€ï¼šå»ºç«‹ Firebase å°ˆæ¡ˆ"></a>æ­¥é©Ÿä¸€ï¼šå»ºç«‹ Firebase å°ˆæ¡ˆ</h3><ol>
<li><p>å‰å¾€ <a href="https://console.firebase.google.com/">Firebase Console</a> (é»æ“Šå³ä¸Šè§’ Go to console)</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/1-friebase.png?raw=true"></p>
</li>
<li><p>é»æ“Š<strong>å»ºç«‹æ–°çš„ Firebase å°ˆæ¡ˆ</strong></p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/2-new-project.png?raw=true"></p>
</li>
<li><p>è¼¸å…¥å°ˆæ¡ˆåç¨±ï¼ˆä¾‹å¦‚ï¼š<code>iThome2025-storage-demo</code>ï¼‰</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/3-project-name.png?raw=true"></p>
</li>
<li><p>å®Œæˆå»ºç«‹å¾Œï¼Œå°±èƒ½é€²åˆ°å°ˆæ¡ˆå„€è¡¨æ¿</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/4-proj-dashboard.png?raw=true"></p>
</li>
</ol>
<h3 id="æ­¥é©ŸäºŒï¼šå•Ÿç”¨-Firebase-Storage"><a href="#æ­¥é©ŸäºŒï¼šå•Ÿç”¨-Firebase-Storage" class="headerlink" title="æ­¥é©ŸäºŒï¼šå•Ÿç”¨ Firebase Storage"></a>æ­¥é©ŸäºŒï¼šå•Ÿç”¨ Firebase Storage</h3><ol>
<li><p>åœ¨å·¦å´é¸å–®é¸ <strong>Storage</strong></p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/5-menu-storage.png?raw=true"></p>
</li>
<li><p>é»æ“Š <strong>å‡ç´šå°ˆæ¡ˆ (é€™é‚Šæœƒéœ€è¦é€£æ¥ä¿¡ç”¨å¡å¸³æˆ¶)</strong></p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/6-upgrade-proj.png?raw=true"></p>
</li>
<li><p>é»æ“Šé€£çµå¸³æˆ¶ (å…è²»é¡åº¦ï¼š<strong>1 GB å„²å­˜ç©ºé–“)</strong></p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/7-link-account.png?raw=true"></p>
</li>
<li><p>é¸æ“‡åœ°å€ï¼ˆå…ä»˜è²»ä½ç½®ï¼‰</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/8-choose-area.png?raw=true"></p>
</li>
<li><p>å‹¾é¸ä»¥æ­£å¼æ¨¡å¼å•Ÿå‹•</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/9-stander-start.png?raw=true"></p>
</li>
<li><p>å®Œæˆå¾Œæœƒè‡ªå‹•å»ºç«‹ä¸€å€‹ <strong>Bucket</strong>ï¼ˆå…¶å¯¦å°±æ˜¯ä¸€å€‹å„²å­˜æª”æ¡ˆçš„ç©ºé–“ï¼‰</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/10-finish-bucket.png?raw=true"></p>
</li>
</ol>
<p>ğŸ“Œ ä¹‹å¾Œæˆ‘å€‘çš„å°ˆæ¡ˆå°±æœƒé€éé€™å€‹ bucket ä¾†å­˜å–æª”æ¡ˆã€‚</p>
<hr>
<h2 id="3-å°ˆæ¡ˆè¨­å®šèˆ‡é‡‘é‘°ä¸‹è¼‰"><a href="#3-å°ˆæ¡ˆè¨­å®šèˆ‡é‡‘é‘°ä¸‹è¼‰" class="headerlink" title="3. å°ˆæ¡ˆè¨­å®šèˆ‡é‡‘é‘°ä¸‹è¼‰"></a>3. å°ˆæ¡ˆè¨­å®šèˆ‡é‡‘é‘°ä¸‹è¼‰</h2><ol>
<li><p>é»æ“Šå°é½’è¼ªé¸å°ˆæ¡ˆè¨­å®š</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/11-proj-setting.png?raw=true"></p>
</li>
<li><p>é¸æ“‡æœå‹™å¸³æˆ¶ â†’ Firebase Admin SDK â†’ é¸ Node.js â†’ ç”¢ç”Ÿæ–°çš„ç§å¯†é‡‘é‘°</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/12-firebase-sdk.png?raw=true"></p>
</li>
<li><p>é»æ“Šç”¢ç”Ÿé‡‘é‘°å¾ŒæŠŠé€™ä»½ JSON æª”æ¡ˆä¿å­˜å¥½ï¼Œå¾Œé¢æœƒä½¿ç”¨åˆ° (<strong>é‡‘é‘°ä¸è¦å­˜åœ¨å…¬é–‹çš„åœ°æ–¹</strong>)</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/13-gen-key.png?raw=true"></p>
</li>
<li><p>JSON æª”æ¡ˆå¤§è‡´å¦‚ä¸‹</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/14-json-file.png?raw=true"></p>
</li>
</ol>
<hr>
<h2 id="4-å°ˆæ¡ˆè¨­å®šï¼š-env-æª”æ¡ˆ"><a href="#4-å°ˆæ¡ˆè¨­å®šï¼š-env-æª”æ¡ˆ" class="headerlink" title="4. å°ˆæ¡ˆè¨­å®šï¼š.env æª”æ¡ˆ"></a>4. å°ˆæ¡ˆè¨­å®šï¼š.env æª”æ¡ˆ</h2><p>åœ¨ <code>.env</code> æª”æ¡ˆä¸­è¨­å®šç’°å¢ƒè®Šæ•¸ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FIREBASE_SERVICE_ACCOUNT=&#123;æ”¾å…¥å°‡ JSON æª”æ¡ˆå£“ç¸®æˆä¸€è¡Œçš„è³‡è¨Š&#125;</span><br><span class="line">FIREBASE_STORAGE_BUCKET=ithome2025-storage-demo.firebasestorage.app</span><br></pre></td></tr></table></figure>

<p>1.è¨­å®š <code>FIREBASE_SERVICE_ACCOUNT</code> â†’ å°æŠ€å·§ (å°‡ JSON æª”æ¡ˆå£“ç¸®æˆä¸€è¡Œ)</p>
<p>VSCode â†’ cmd+shift+P â†’ Join Lines</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/15-join-lines.png?raw=true"></p>
<p>2.è¨­å®š <code>FIREBASE_STORAGE_BUCKET</code> â†’ é»æ“Šè¤‡è£½è³‡æ–™å¤¾è·¯å¾‘ â†’ å»é™¤ (gs:&#x2F;&#x2F;)</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day16-Firebase/16-bucket-name.png?raw=true"></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">ithome2025-storage-demo.firebasestorage.app</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-çµèª"><a href="#5-çµèª" class="headerlink" title="5.çµèª"></a>5.çµèª</h2><p>åˆ°é€™è£¡ï¼Œæˆ‘å€‘å·²ç¶“æŠŠ Firebase Storage çš„åŸºç¤ç’°å¢ƒæº–å‚™å¥½ï¼š</p>
<ul>
<li>å»ºç«‹ Firebase å°ˆæ¡ˆ</li>
<li>å•Ÿç”¨ Storage ä¸¦å»ºç«‹ Bucket</li>
<li>ä¸‹è¼‰æœå‹™é‡‘é‘° &amp; è¨­å®š <code>.env</code></li>
</ul>
<p>æ›å¥è©±èªªï¼Œ<strong>æˆ‘å€‘å·²ç¶“æº–å‚™å¥½è®“å°ˆæ¡ˆå…·å‚™ã€Œæª”æ¡ˆä¸Šå‚³ã€çš„èƒ½åŠ›</strong>å•¦ï¼ ğŸš€</p>
<p>ä¸éä»Šå¤©é‚„æ²’å¯«ç¨‹å¼ç¢¼ï¼Œå…ˆåˆ°é€™è£¡æ”¶å°¾ã€‚</p>
<p>æ˜å¤© Day 17 âœ¨ï¼Œæˆ‘å€‘æœƒé€²å…¥å¯¦æˆ°ï¼Œä½¿ç”¨ <strong>Node.js + multer</strong> ä¸²æ¥ Firebase Storageï¼Œå¯¦éš›æ¸¬è©¦æª”æ¡ˆä¸Šå‚³ï¼Œä¸¦å–å¾—å…¬é–‹ URLã€‚</p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 13 - ä¸€è‡´çš„ç¨‹å¼ç¢¼ï¼šESLint å°å…¥</title>
    <url>/2025/09/27/Day13%20-%20ESLint/</url>
    <content><![CDATA[<h2 id="ESLint-çš„æ­·å²èˆ‡ç°¡ä»‹"><a href="#ESLint-çš„æ­·å²èˆ‡ç°¡ä»‹" class="headerlink" title="ESLint çš„æ­·å²èˆ‡ç°¡ä»‹"></a>ESLint çš„æ­·å²èˆ‡ç°¡ä»‹</h2><p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day13-ESLint/1-eslint.png?raw=true"></p>
<p>åœ¨ JavaScript çš„æ—©æœŸï¼Œé–‹ç™¼è€…ç¼ºä¹çµ±ä¸€çš„è¦ç¯„ï¼Œç¨‹å¼ç¢¼å®¹æ˜“å› å€‹äººç¿’æ…£è€Œè®Šå¾—æ··äº‚ã€‚</p>
<ul>
<li>2000 å¹´ä»£ï¼Œå‡ºç¾äº† <strong>JSLint</strong>ï¼ˆç”± Douglas Crockford é–‹ç™¼ï¼ŒJavaScript èªè¨€å®ˆè­·è€…ä¹‹ä¸€ï¼‰ï¼Œç”¨ä¾†æª¢æŸ¥å¸¸è¦‹éŒ¯èª¤ã€‚</li>
<li>ä¹‹å¾Œç¤¾ç¾¤åˆç™¼å±•å‡º <strong>JSHint</strong>ï¼Œæä¾›æ›´å½ˆæ€§çš„è¦å‰‡èˆ‡è¨­å®šã€‚</li>
<li>åˆ°äº† <strong>2013 å¹´</strong>ï¼ŒNicholas C. Zakasï¼ˆå‰ Yahoo! JS åœ˜éšŠæˆå“¡ï¼‰æ¨å‡º <strong>ESLint</strong>ï¼Œé€éã€Œè¦å‰‡é©…å‹• + æ’ä»¶æ©Ÿåˆ¶ã€ï¼Œè®“é–‹ç™¼è€…å¯ä»¥è‡ªç”±æ“´å±•ä¸¦åˆ¶å®šå°ˆæ¡ˆå°ˆå±¬è¦ç¯„ã€‚</li>
</ul>
<p>ä»Šå¤©ï¼ŒESLint å·²ç¶“æˆç‚º JavaScript&#x2F;TypeScript å°ˆæ¡ˆè£¡æœ€å¸¸è¦‹çš„ç¨‹å¼ç¢¼æª¢æŸ¥å·¥å…·ã€‚</p>
<span id="more"></span>

<hr>
<h2 id="ç‚ºä»€éº¼éœ€è¦-ESLintï¼Ÿ"><a href="#ç‚ºä»€éº¼éœ€è¦-ESLintï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼éœ€è¦ ESLintï¼Ÿ"></a>ç‚ºä»€éº¼éœ€è¦ ESLintï¼Ÿ</h2><p>å’Œæ˜¨å¤©çš„ <strong>Prettier</strong> ä¸åŒï¼ŒESLint å°ˆæ³¨æ–¼ <strong>ç¨‹å¼é‚è¼¯èˆ‡æœ€ä½³å¯¦è¸</strong>ã€‚</p>
<h3 id="å¸¸è¦‹æª¢æŸ¥ç¯„ä¾‹"><a href="#å¸¸è¦‹æª¢æŸ¥ç¯„ä¾‹" class="headerlink" title="å¸¸è¦‹æª¢æŸ¥ç¯„ä¾‹"></a>å¸¸è¦‹æª¢æŸ¥ç¯„ä¾‹</h3><ul>
<li><strong>ç¨‹å¼éŒ¯èª¤</strong>ï¼šæœªå®šç¾©è®Šæ•¸ã€æœªä½¿ç”¨çš„è®Šæ•¸ã€éŒ¯èª¤çš„èªæ³•ã€‚</li>
<li><strong>æœ€ä½³å¯¦è¸</strong>ï¼šç¦æ­¢ä½¿ç”¨ <code>var</code>ã€é¿å… <code>any</code>ã€è¦å®šå‡½å¼å®£å‘Šé¢¨æ ¼ã€‚</li>
</ul>
<h3 id="ç‚ºä»€éº¼é‡è¦ï¼Ÿ"><a href="#ç‚ºä»€éº¼é‡è¦ï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼é‡è¦ï¼Ÿ"></a>ç‚ºä»€éº¼é‡è¦ï¼Ÿ</h3><ol>
<li><strong>é™ä½ Bug é¢¨éšª</strong>ï¼šææ—©ç™¼ç¾æ½›åœ¨éŒ¯èª¤ï¼Œé¿å…ç¨‹å¼åœ¨ runtime æ‰çˆ†ç‚¸ã€‚</li>
<li><strong>æå‡å¯è®€æ€§</strong>ï¼šåœ˜éšŠéƒ½éµå®ˆç›¸åŒè¦ç¯„ï¼Œç¨‹å¼ç¢¼æ›´ä¸€è‡´ã€‚</li>
<li><strong>æ”¹å–„å”ä½œé«”é©—</strong>ï¼šCode Review æ™‚ï¼Œæ©Ÿå™¨æœƒå…ˆæŠ“èªæ³•èˆ‡è¦ç¯„å•é¡Œï¼Œè®“äººé¡å°ˆæ³¨æ–¼å•†æ¥­é‚è¼¯ã€‚</li>
</ol>
<p>ğŸ‘‰ ç°¡å–®ä¾†èªªï¼š</p>
<ul>
<li><strong>Prettier</strong>ï¼šè®“ç¨‹å¼ç¢¼ã€Œå¥½çœ‹ã€</li>
<li><strong>ESLint</strong>ï¼šè®“ç¨‹å¼ç¢¼ã€Œæ­£ç¢ºã€</li>
</ul>
<hr>
<h2 id="VSCode-å®‰è£-ESLint"><a href="#VSCode-å®‰è£-ESLint" class="headerlink" title="VSCode å®‰è£ ESLint"></a>VSCode å®‰è£ ESLint</h2><p>é€™é‚Šä¹Ÿå»ºè­°åœ¨ VSCode è£¡å®‰è£ ESLint å¥—ä»¶ï¼š</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day13-ESLint/2-vscode-eslint.png?raw=true"></p>
<hr>
<h2 id="å°ˆæ¡ˆå®‰è£-ESLint"><a href="#å°ˆæ¡ˆå®‰è£-ESLint" class="headerlink" title="å°ˆæ¡ˆå®‰è£ ESLint"></a>å°ˆæ¡ˆå®‰è£ ESLint</h2><p>åœ¨å°ˆæ¡ˆè£¡å®‰è£ ESLint ä»¥åŠç›¸é—œå¥—ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install eslint @eslint/js eslint-config-prettier eslint-plugin-prettier @typescript-eslint/parser @typescript-eslint/eslint-plugin --save-dev</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="è¨­å®š-ESLint"><a href="#è¨­å®š-ESLint" class="headerlink" title="è¨­å®š ESLint"></a>è¨­å®š ESLint</h2><p>åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„æ–°å¢ <code>eslint.config.js</code>ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> js = <span class="built_in">require</span>(<span class="string">&quot;@eslint/js&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> globals = <span class="built_in">require</span>(<span class="string">&quot;globals&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> prettier = <span class="built_in">require</span>(<span class="string">&quot;eslint-config-prettier&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> tsParser = <span class="built_in">require</span>(<span class="string">&quot;@typescript-eslint/parser&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> tsPlugin = <span class="built_in">require</span>(<span class="string">&quot;@typescript-eslint/eslint-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&quot;**/*.ts&quot;</span>], <span class="comment">// æª¢æŸ¥ .ts æª”æ¡ˆ</span></span><br><span class="line">    <span class="attr">languageOptions</span>: &#123;</span><br><span class="line">      <span class="attr">parser</span>: tsParser, <span class="comment">// ç”¨ TypeScript çš„è§£æå™¨</span></span><br><span class="line">      <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span>, <span class="comment">// æ”¯æ´ ES æ¨¡çµ„</span></span><br><span class="line">      <span class="attr">globals</span>: &#123;</span><br><span class="line">        ...globals.<span class="property">node</span>, <span class="comment">// Node.js çš„å…¨åŸŸè®Šæ•¸ï¼ˆåƒ processï¼‰</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: &#123;</span><br><span class="line">      <span class="string">&quot;@typescript-eslint&quot;</span>: tsPlugin, <span class="comment">// TypeScript å°ˆå±¬æ’ä»¶</span></span><br><span class="line">      <span class="attr">prettier</span>: <span class="built_in">require</span>(<span class="string">&quot;eslint-plugin-prettier&quot;</span>), <span class="comment">// Prettier æ’ä»¶</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">      ...js.<span class="property">configs</span>.<span class="property">recommended</span>.<span class="property">rules</span>, <span class="comment">// ESLint åŸºæœ¬è¦å‰‡</span></span><br><span class="line">      ...tsPlugin.<span class="property">configs</span>.<span class="property">recommended</span>.<span class="property">rules</span>, <span class="comment">// TypeScript æ¨è–¦è¦å‰‡</span></span><br><span class="line">      ...prettier.<span class="property">rules</span>, <span class="comment">// æ­£ç¢ºä½¿ç”¨ prettier é…ç½®</span></span><br><span class="line">      <span class="string">&quot;prettier/prettier&quot;</span>: <span class="string">&quot;error&quot;</span>, <span class="comment">// Prettier æ ¼å¼éŒ¯èª¤æœƒé¡¯ç¤º</span></span><br><span class="line">      <span class="attr">semi</span>: [<span class="string">&quot;error&quot;</span>, <span class="string">&quot;always&quot;</span>], <span class="comment">// è¡Œå°¾ä¸€å®šè¦æœ‰åˆ†è™Ÿ</span></span><br><span class="line">      <span class="attr">quotes</span>: [<span class="string">&quot;error&quot;</span>, <span class="string">&quot;double&quot;</span>], <span class="comment">// ç”¨é›™å¼•è™Ÿ</span></span><br><span class="line">      <span class="string">&quot;no-var&quot;</span>: <span class="string">&quot;error&quot;</span>, <span class="comment">// ä¸å‡†ç”¨ var</span></span><br><span class="line">      <span class="string">&quot;@typescript-eslint/no-unused-vars&quot;</span>: [<span class="string">&quot;error&quot;</span>], <span class="comment">// ä¸å‡†æœ‰æ²’ç”¨åˆ°çš„è®Šæ•¸</span></span><br><span class="line">      <span class="string">&quot;@typescript-eslint/no-explicit-any&quot;</span>: <span class="string">&quot;error&quot;</span>, <span class="comment">// ç¦æ­¢ä½¿ç”¨ any é¡å‹</span></span><br><span class="line">      <span class="comment">// æ”¹ç”¨ TypeScript ç‰ˆæœ¬çš„ func-style</span></span><br><span class="line">      <span class="string">&quot;func-style&quot;</span>: [<span class="string">&quot;error&quot;</span>, <span class="string">&quot;declaration&quot;</span>, &#123; <span class="attr">allowArrowFunctions</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">      <span class="comment">// ç¦æ­¢ä¸€èˆ¬å‡½å¼è¡¨é”å¼</span></span><br><span class="line">      <span class="string">&quot;no-restricted-syntax&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;error&quot;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">selector</span>: <span class="string">&quot;FunctionExpression&quot;</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&quot;è«‹ä½¿ç”¨å‡½å¼å®£å‘Šå¼æˆ–ç®­é ­å‡½å¼ï¼Œé¿å…ä½¿ç”¨ä¸€èˆ¬å‡½å¼è¡¨é”å¼ ğŸ˜&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>package.json</code> è£¡åŠ ä¸Š scriptï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint \&quot;src/**/*.ts\&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint:fix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint \&quot;src/**/*.ts\&quot; --fix&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>npm run lint</code>ï¼šæª¢æŸ¥ç¨‹å¼ç¢¼è¦å‰‡</li>
<li><code>npm run lint:fix</code>ï¼šè‡ªå‹•ä¿®å¾©èƒ½ä¿®çš„éŒ¯èª¤</li>
</ul>
<hr>
<h2 id="æ¸¬è©¦-ESLint"><a href="#æ¸¬è©¦-ESLint" class="headerlink" title="æ¸¬è©¦ ESLint"></a>æ¸¬è©¦ ESLint</h2><p>åœ¨ <code>/src</code> ä¸‹æ–°å¢ <code>testLint.ts</code>ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é•å 1: sayHello å®£å‘Šä½†æœªä½¿ç”¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params">name: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="comment">// é•å 2: ç”¨ any å‹åˆ¥ï¼ˆTypeScript è¦å‰‡ï¼‰</span></span><br><span class="line">  <span class="keyword">var</span> greeting = <span class="string">&quot;Hello &quot;</span> + name; <span class="comment">// é•å 3: ç”¨ var å®£å‘Š</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> unusedVar = <span class="number">42</span>; <span class="comment">// é•å 4: æœªä½¿ç”¨çš„è®Šæ•¸</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(greeting);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é•å 5:è«‹ä½¿ç”¨å‡½å¼å®£å‘Šå¼æˆ–ç®­é ­å‡½å¼ï¼Œé¿å…ä½¿ç”¨ä¸€èˆ¬å‡½å¼è¡¨é”å¼</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="keyword">function</span> (<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">a</span>(<span class="string">&quot;Peter&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/test&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;Test route&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server running on port 3000&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åŸ·è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run lint</span><br></pre></td></tr></table></figure>

<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day13-ESLint/3-npm-run-lint.png?raw=true"></p>
<p>ä½ æœƒçœ‹åˆ° ESLint æŠŠæ‰€æœ‰é•è¦éƒ½åˆ—å‡ºä¾†ï¼Œå¹«åŠ©ä½ æ›´å¿«æ‰¾åˆ°å•é¡Œã€‚</p>
<hr>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><ul>
<li>ESLint èª•ç”Ÿæ–¼ 2013 å¹´ï¼Œæ˜¯ç›®å‰æœ€å¸¸è¦‹çš„ JavaScript&#x2F;TypeScript ç¨‹å¼ç¢¼æª¢æŸ¥å·¥å…·ã€‚</li>
<li>èˆ‡ Prettier æ­é…ï¼š<ul>
<li><strong>Prettier</strong> â†’ æ’ç‰ˆé¢¨æ ¼ä¸€è‡´</li>
<li><strong>ESLint</strong> â†’ é‚è¼¯èˆ‡è¦ç¯„æ­£ç¢º</li>
</ul>
</li>
<li>åœ¨å°ˆæ¡ˆä¸­å®‰è£ã€è¨­å®šå¾Œï¼Œå¯ä»¥è‡ªå‹•æª¢æŸ¥ã€ä¿®å¾©ç¨‹å¼ï¼Œé¿å…éŒ¯èª¤ã€‚</li>
</ul>
<hr>
<h2 id="è£œå……è³‡æ–™"><a href="#è£œå……è³‡æ–™" class="headerlink" title="è£œå……è³‡æ–™"></a>è£œå……è³‡æ–™</h2><blockquote>
<p>commit : setup ESLint</p>
</blockquote>
<p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/2786c17e588e8598f42e8349a901f3d6717afe46">Github é€£çµ</a></p>
<p>ğŸ‘‰ æ˜å¤© (Day14) æˆ‘å€‘å‰‡æœƒä¾†ä»‹ç´¹ Zod é©—è­‰ (API é©—è­‰å®ˆè­·ç¥)ï¼ŒæœŸå¾…æœŸå¾… ğŸ’ª</p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 17 - Firebase Storage å¯¦æˆ°ï¼šç”¨ Node.js + multer ä¸Šå‚³åœ–ç‰‡åˆ°é›²ç«¯</title>
    <url>/2025/10/01/Day17%20-%20Firebase-Multer/</url>
    <content><![CDATA[<p>æ˜¨å¤©æˆ‘å€‘å®Œæˆäº† <strong>Firebase Storage çš„ç’°å¢ƒè¨­å®š</strong>ï¼š</p>
<ul>
<li>å»ºç«‹å°ˆæ¡ˆ &amp; Bucket</li>
<li>ä¸‹è¼‰æœå‹™é‡‘é‘°</li>
<li>è¨­å®š <code>.env</code></li>
</ul>
<p>ä»Šå¤©å°±è¦æ­£å¼é€²å…¥<strong>å¯¦æˆ°ç¯‡</strong>ï¼</p>
<p>æƒ³åƒä¸€ä¸‹ï¼šç¾åœ¨æˆ‘å€‘çš„æœå‹™éœ€è¦è®“ä½¿ç”¨è€…å¯ä»¥ä¸Šå‚³<strong>å¤§é ­è²¼</strong>ã€‚</p>
<p>é‚£æˆ‘å€‘è©²æ€éº¼åšï¼Ÿ</p>
<p>ğŸ‘‰ å°±æ˜¯ç”¨ <strong>Node.js + multer</strong> ä¸²æ¥ Firebase Storageï¼ŒæŠŠæª”æ¡ˆå®‰å…¨åœ°å­˜åˆ°é›²ç«¯ï¼Œæœ€å¾Œç”¢ç”Ÿä¸€å€‹å…¬é–‹å¯å­˜å–çš„ URLã€‚</p>
<span id="more"></span>

<h3 id="æ­¥é©Ÿ-1ï¼šå®‰è£å¿…è¦å¥—ä»¶"><a href="#æ­¥é©Ÿ-1ï¼šå®‰è£å¿…è¦å¥—ä»¶" class="headerlink" title="æ­¥é©Ÿ 1ï¼šå®‰è£å¿…è¦å¥—ä»¶"></a><strong>æ­¥é©Ÿ 1ï¼šå®‰è£å¿…è¦å¥—ä»¶</strong></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ ¸å¿ƒå¥—ä»¶</span></span><br><span class="line">npm install multer firebase-admin</span><br><span class="line"></span><br><span class="line"><span class="comment"># TypeScript é–‹ç™¼ä¾è³´ï¼ˆå¦‚æœä½¿ç”¨ TypeScriptï¼‰</span></span><br><span class="line">npm install -D @types/multer</span><br></pre></td></tr></table></figure>

<p><strong>å¥—ä»¶èªªæ˜ï¼š</strong></p>
<ul>
<li><code>multer</code>: è™•ç† <code>multipart/form-data</code> çš„æ–‡ä»¶ä¸Šå‚³ä¸­é–“ä»¶</li>
<li><code>firebase-admin</code>: Firebase Admin SDKï¼Œç”¨æ–¼æ“ä½œ Firebase Storage</li>
</ul>
<hr>
<h3 id="æ­¥é©Ÿ-2ï¼šè¨­å®šç’°å¢ƒè®Šæ•¸-env"><a href="#æ­¥é©Ÿ-2ï¼šè¨­å®šç’°å¢ƒè®Šæ•¸-env" class="headerlink" title="æ­¥é©Ÿ 2ï¼šè¨­å®šç’°å¢ƒè®Šæ•¸ (.env)"></a><strong>æ­¥é©Ÿ 2ï¼šè¨­å®šç’°å¢ƒè®Šæ•¸ (.env)</strong></h3><p>åœ¨ <code>.env</code> æª”æ¡ˆä¸­åŠ å…¥ Firebase è¨­å®šï¼ˆè©³ç´°å¯åƒè€ƒ Day16 æ–‡ç« )</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Firebase è¨­å®š</span></span><br><span class="line">FIREBASE_SERVICE_ACCOUNT=&#123;<span class="string">&quot;type&quot;</span>:<span class="string">&quot;service_account&quot;</span>,...,<span class="string">&quot;client_x509_cert_url&quot;</span>:<span class="string">&quot;xxx&gt;&quot;</span>&#125;</span><br><span class="line">FIREBASE_STORAGE_BUCKET=your-project.appspot.com</span><br></pre></td></tr></table></figure>

<p><strong>é‡è¦æé†’ï¼š</strong></p>
<ul>
<li><code>FIREBASE_SERVICE_ACCOUNT</code> å¿…é ˆæ˜¯<strong>å®Œæ•´çš„ JSON å­—ä¸²</strong>ï¼ˆå–®è¡Œï¼‰</li>
<li>è¨˜å¾—æŠŠ <code>.env</code> åŠ å…¥ <code>.gitignore</code>ï¼Œé¿å…æ´©æ¼é‡‘é‘°</li>
</ul>
<hr>
<h3 id="æ­¥é©Ÿ-3ï¼šæ–°å¢-User-Entity-æ¬„ä½"><a href="#æ­¥é©Ÿ-3ï¼šæ–°å¢-User-Entity-æ¬„ä½" class="headerlink" title="æ­¥é©Ÿ 3ï¼šæ–°å¢ User Entity æ¬„ä½"></a><strong>æ­¥é©Ÿ 3ï¼šæ–°å¢ User Entity æ¬„ä½</strong></h3><p>åœ¨ <code>User.ts</code> å¢åŠ  <code>profileUrl</code>ï¼Œç”¨ä¾†å­˜æ”¾å¤§é ­è²¼ä½å€ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">@Entity()</span><br><span class="line">export class User <span class="punctuation">&#123;</span></span><br><span class="line">  @PrimaryGeneratedColumn(<span class="string">&quot;uuid&quot;</span>)</span><br><span class="line">  id!<span class="punctuation">:</span> string;</span><br><span class="line"></span><br><span class="line">  @Column(<span class="punctuation">&#123;</span> type<span class="punctuation">:</span> <span class="string">&quot;varchar&quot;</span><span class="punctuation">,</span> length<span class="punctuation">:</span> <span class="number">50</span><span class="punctuation">,</span> nullable<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span> <span class="punctuation">&#125;</span>)</span><br><span class="line">  name!<span class="punctuation">:</span> string;</span><br><span class="line"></span><br><span class="line">  @Column(<span class="punctuation">&#123;</span> type<span class="punctuation">:</span> <span class="string">&quot;varchar&quot;</span><span class="punctuation">,</span> length<span class="punctuation">:</span> <span class="number">320</span><span class="punctuation">,</span> unique<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> nullable<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span> <span class="punctuation">&#125;</span>)</span><br><span class="line">  email!<span class="punctuation">:</span> string;</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  @Column(<span class="punctuation">&#123;</span> name<span class="punctuation">:</span> <span class="string">&quot;profile_url&quot;</span><span class="punctuation">,</span> length<span class="punctuation">:</span> <span class="number">2048</span><span class="punctuation">,</span> nullable<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span>)</span><br><span class="line">  profileUrl?<span class="punctuation">:</span> string;</span><br><span class="line"></span><br><span class="line">	...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="æ­¥é©Ÿ-4ï¼šå»ºç«‹-Firebase-å·¥å…·æª”-utils-firebaseUtils-ts"><a href="#æ­¥é©Ÿ-4ï¼šå»ºç«‹-Firebase-å·¥å…·æª”-utils-firebaseUtils-ts" class="headerlink" title="æ­¥é©Ÿ 4ï¼šå»ºç«‹ Firebase å·¥å…·æª” (utils&#x2F;firebaseUtils.ts)"></a><strong>æ­¥é©Ÿ 4ï¼šå»ºç«‹ Firebase å·¥å…·æª” (utils&#x2F;firebaseUtils.ts)</strong></h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> admin <span class="keyword">from</span> <span class="string">&quot;firebase-admin&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> dotenv <span class="keyword">from</span> <span class="string">&quot;dotenv&quot;</span>;</span><br><span class="line"></span><br><span class="line">dotenv.<span class="title function_">config</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£æç’°å¢ƒè®Šæ•¸ä¸­çš„ JSON å­—ä¸²</span></span><br><span class="line"><span class="keyword">const</span> serviceAccount = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(process.<span class="property">env</span>.<span class="property">FIREBASE_SERVICE_ACCOUNT</span>!);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ– Firebase Admin</span></span><br><span class="line">admin.<span class="title function_">initializeApp</span>(&#123;</span><br><span class="line">  <span class="attr">credential</span>: admin.<span class="property">credential</span>.<span class="title function_">cert</span>(serviceAccount),</span><br><span class="line">  <span class="attr">storageBucket</span>: process.<span class="property">env</span>.<span class="property">FIREBASE_STORAGE_BUCKET</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–å¾— Storage Bucket</span></span><br><span class="line"><span class="keyword">const</span> bucket = admin.<span class="title function_">storage</span>().<span class="title function_">bucket</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; admin, bucket &#125;;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="æ­¥é©Ÿ-5ï¼šå»ºç«‹åœ–ç‰‡ä¸Šå‚³ä¸­é–“ä»¶-middleware-imageUpload-ts"><a href="#æ­¥é©Ÿ-5ï¼šå»ºç«‹åœ–ç‰‡ä¸Šå‚³ä¸­é–“ä»¶-middleware-imageUpload-ts" class="headerlink" title="æ­¥é©Ÿ 5ï¼šå»ºç«‹åœ–ç‰‡ä¸Šå‚³ä¸­é–“ä»¶ (middleware&#x2F;imageUpload.ts)"></a><strong>æ­¥é©Ÿ 5ï¼šå»ºç«‹åœ–ç‰‡ä¸Šå‚³ä¸­é–“ä»¶ (middleware&#x2F;imageUpload.ts)</strong></h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> multer <span class="keyword">from</span> <span class="string">&quot;multer&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&quot;path&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Request</span> &#125; <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Express</span> &#125; <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨è¨˜æ†¶é«”å„²å­˜ï¼ˆä¸å¯«å…¥ç¡¬ç¢Ÿï¼‰</span></span><br><span class="line"><span class="keyword">const</span> storage = multer.<span class="title function_">memoryStorage</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æª”æ¡ˆéæ¿¾å™¨ï¼šåªæ¥å— JPG å’Œ PNG</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">imageFileFilter</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  req: Request,</span></span><br><span class="line"><span class="params">  file: Express.Multer.File,</span></span><br><span class="line"><span class="params">  cb: multer.FileFilterCallback</span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> ext = path.<span class="title function_">extname</span>(file.<span class="property">originalname</span>).<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="keyword">if</span> (![<span class="string">&quot;.jpg&quot;</span>, <span class="string">&quot;.png&quot;</span>, <span class="string">&quot;.jpeg&quot;</span>].<span class="title function_">includes</span>(ext)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">cb</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;åªæ¥å— JPG/PNG æ ¼å¼çš„åœ–ç‰‡æª”æ¡ˆ&quot;</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">cb</span>(<span class="literal">null</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é™åˆ¶ï¼š2 MBã€JPG/PNG æ ¼å¼</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> imageUpload = <span class="title function_">multer</span>(&#123;</span><br><span class="line">  storage,</span><br><span class="line">  <span class="attr">limits</span>: &#123; <span class="attr">fileSize</span>: <span class="number">2</span> * <span class="number">1024</span> * <span class="number">1024</span> &#125;, <span class="comment">// 2 MB</span></span><br><span class="line">  <span class="attr">fileFilter</span>: imageFileFilter,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>è¨­è¨ˆé‡é»ï¼š</strong></p>
<ul>
<li><code>memoryStorage()</code>: æª”æ¡ˆå­˜åœ¨è¨˜æ†¶é«”ä¸­ï¼ˆ<code>req.file.buffer</code>ï¼‰ï¼Œé©åˆç›´æ¥ä¸Šå‚³åˆ°é›²ç«¯</li>
<li><code>fileFilter</code>: é™åˆ¶åªæ¥å—åœ–ç‰‡æ ¼å¼</li>
<li><code>limits</code>: é™åˆ¶æª”æ¡ˆå¤§å°ç‚º 2 MB</li>
</ul>
<hr>
<h3 id="æ­¥é©Ÿ-6ï¼šå»ºç«‹ä¸Šå‚³-Controller-controllers-uploadController-ts"><a href="#æ­¥é©Ÿ-6ï¼šå»ºç«‹ä¸Šå‚³-Controller-controllers-uploadController-ts" class="headerlink" title="æ­¥é©Ÿ 6ï¼šå»ºç«‹ä¸Šå‚³ Controller (controllers&#x2F;uploadController.ts)"></a><strong>æ­¥é©Ÿ 6ï¼šå»ºç«‹ä¸Šå‚³ Controller (controllers&#x2F;uploadController.ts)</strong></h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Response</span>, <span class="title class_">NextFunction</span> &#125; <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&quot;path&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; bucket &#125; <span class="keyword">from</span> <span class="string">&quot;../utils/firebaseUtils&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AuthRequest</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../middleware/isAuth&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppDataSource</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../config/db&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">User</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../entities/User&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸Šå‚³å¤§é ­ç…§åˆ° Firebase Storage</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">uploadAvatar</span>(<span class="params"></span></span><br><span class="line"><span class="params">  req: AuthRequest,</span></span><br><span class="line"><span class="params">  res: Response,</span></span><br><span class="line"><span class="params">  next: NextFunction</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 1. æª¢æŸ¥æ˜¯å¦æœ‰ä¸Šå‚³æª”æ¡ˆ</span></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="property">file</span>) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">        <span class="attr">status</span>: <span class="string">&quot;failed&quot;</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;è«‹é¸æ“‡è¦ä¸Šå‚³çš„åœ–ç‰‡æª”æ¡ˆ&quot;</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. æª¢æŸ¥ä½¿ç”¨è€…æ˜¯å¦å·²ç™»å…¥</span></span><br><span class="line">    <span class="keyword">if</span> (!req.<span class="property">user</span>) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">        <span class="attr">status</span>: <span class="string">&quot;failed&quot;</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&quot;è«‹å…ˆç™»å…¥&quot;</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. ç”¢ç”Ÿé ç«¯æª”æ¡ˆè·¯å¾‘</span></span><br><span class="line">    <span class="keyword">const</span> timestamp = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">const</span> ext = path.<span class="title function_">extname</span>(req.<span class="property">file</span>.<span class="property">originalname</span>).<span class="title function_">toLowerCase</span>();</span><br><span class="line">    <span class="keyword">const</span> remotePath = <span class="string">`images/avatars/user-<span class="subst">$&#123;req.user.id&#125;</span>-<span class="subst">$&#123;timestamp&#125;</span><span class="subst">$&#123;ext&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. å–å¾— Firebase Storage æª”æ¡ˆåƒè€ƒ</span></span><br><span class="line">    <span class="keyword">const</span> file = bucket.<span class="title function_">file</span>(remotePath);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. å»ºç«‹å¯«å…¥ä¸²æµ</span></span><br><span class="line">    <span class="keyword">const</span> stream = file.<span class="title function_">createWriteStream</span>(&#123;</span><br><span class="line">      <span class="attr">metadata</span>: &#123;</span><br><span class="line">        <span class="attr">contentType</span>: req.<span class="property">file</span>.<span class="property">mimetype</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6. éŒ¯èª¤è™•ç†</span></span><br><span class="line">    stream.<span class="title function_">on</span>(<span class="string">&quot;error&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> <span class="title function_">next</span>(err));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 7. ä¸Šå‚³å®Œæˆå¾Œçš„è™•ç†</span></span><br><span class="line">    stream.<span class="title function_">on</span>(<span class="string">&quot;finish&quot;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// è¨­å®šæª”æ¡ˆç‚ºå…¬é–‹å­˜å–</span></span><br><span class="line">        <span class="keyword">await</span> file.<span class="title function_">makePublic</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”¢ç”Ÿå…¬é–‹ URL</span></span><br><span class="line">        <span class="keyword">const</span> publicUrl = <span class="string">`https://storage.googleapis.com/<span class="subst">$&#123;bucket.name&#125;</span>/<span class="subst">$&#123;remotePath&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 8. æ›´æ–°è³‡æ–™åº«ï¼ˆæ ¹æ“šä½ çš„ ORM/è³‡æ–™åº«æ¶æ§‹èª¿æ•´ï¼‰</span></span><br><span class="line">        <span class="keyword">await</span> <span class="title class_">AppDataSource</span>.<span class="title function_">getRepository</span>(<span class="title class_">User</span>).<span class="title function_">update</span>(</span><br><span class="line">          &#123; <span class="attr">id</span>: req.<span class="property">user</span>?.<span class="property">id</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">profileUrl</span>: publicUrl &#125;</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 9. å›å‚³æˆåŠŸè¨Šæ¯</span></span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">          <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&quot;å¤§é ­ç…§ä¸Šå‚³æˆåŠŸ&quot;</span>,</span><br><span class="line">          <span class="attr">data</span>: &#123; <span class="attr">avatarUrl</span>: publicUrl &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="title function_">next</span>(err);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 10. å°‡æª”æ¡ˆç·©è¡å€å¯«å…¥ä¸²æµ</span></span><br><span class="line">    stream.<span class="title function_">end</span>(req.<span class="property">file</span>.<span class="property">buffer</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="title function_">next</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="æ­¥é©Ÿ-7ï¼šè¨­å®šè·¯ç”±-routes-uploadRoutes-ts"><a href="#æ­¥é©Ÿ-7ï¼šè¨­å®šè·¯ç”±-routes-uploadRoutes-ts" class="headerlink" title="æ­¥é©Ÿ 7ï¼šè¨­å®šè·¯ç”± (routes&#x2F;uploadRoutes.ts)"></a><strong>æ­¥é©Ÿ 7ï¼šè¨­å®šè·¯ç”± (routes&#x2F;uploadRoutes.ts)</strong></h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Router</span> &#125; <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; uploadAvatar &#125; <span class="keyword">from</span> <span class="string">&quot;../controllers/uploadController&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; imageUpload &#125; <span class="keyword">from</span> <span class="string">&quot;../middleware/imageUpload&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; isAuth &#125; <span class="keyword">from</span> <span class="string">&quot;../middleware/isAuth&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(</span><br><span class="line">  <span class="string">&quot;/avatar&quot;</span>,</span><br><span class="line">  isAuth, <span class="comment">// 1. é©—è­‰ JWT token</span></span><br><span class="line">  imageUpload.<span class="title function_">single</span>(<span class="string">&quot;file&quot;</span>), <span class="comment">// 2. è™•ç†å–®ä¸€æª”æ¡ˆä¸Šå‚³ï¼Œæ¬„ä½åç¨±ç‚º &quot;file&quot;</span></span><br><span class="line">  uploadAvatar <span class="comment">// 3. åŸ·è¡Œä¸Šå‚³é‚è¼¯</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>

<p><strong>ä¸­é–“ä»¶é †åºå¾ˆé‡è¦ï¼š</strong></p>
<ol>
<li>å…ˆé©—è­‰ä½¿ç”¨è€…èº«ä»½ (<code>isAuth</code>)</li>
<li>å†è™•ç†æª”æ¡ˆä¸Šå‚³ (<code>imageUpload.single(&quot;file&quot;)</code>)</li>
<li>æœ€å¾ŒåŸ·è¡Œæ¥­å‹™é‚è¼¯ (<code>uploadAvatar</code>)</li>
</ol>
<hr>
<h3 id="æ­¥é©Ÿ-8ï¼šè¨»å†Šè·¯ç”±åˆ°ä¸»æ‡‰ç”¨ç¨‹å¼-app-ts"><a href="#æ­¥é©Ÿ-8ï¼šè¨»å†Šè·¯ç”±åˆ°ä¸»æ‡‰ç”¨ç¨‹å¼-app-ts" class="headerlink" title="æ­¥é©Ÿ 8ï¼šè¨»å†Šè·¯ç”±åˆ°ä¸»æ‡‰ç”¨ç¨‹å¼ (app.ts)"></a><strong>æ­¥é©Ÿ 8ï¼šè¨»å†Šè·¯ç”±åˆ°ä¸»æ‡‰ç”¨ç¨‹å¼ (app.ts)</strong></h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> uploadRoutes <span class="keyword">from</span> <span class="string">&quot;./routes/uploadRoutes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ... å…¶ä»–ä¸­é–“ä»¶è¨­å®š</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¨»å†Šä¸Šå‚³è·¯ç”±</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/api/upload&quot;</span>, uploadRoutes); <span class="comment">// ä¸Šå‚³è·¯ç”±</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> app;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="æ­¥é©Ÿ-9ï¼šä¸Šå‚³ç¯„ä¾‹"><a href="#æ­¥é©Ÿ-9ï¼šä¸Šå‚³ç¯„ä¾‹" class="headerlink" title="æ­¥é©Ÿ 9ï¼šä¸Šå‚³ç¯„ä¾‹"></a><strong>æ­¥é©Ÿ 9ï¼šä¸Šå‚³ç¯„ä¾‹</strong></h3><p>ä½¿ç”¨ <strong>Postman</strong> æ¸¬è©¦ï¼š</p>
<ol>
<li>é¸æ“‡ <code>POST</code> æ–¹æ³•</li>
<li>URL: <code>http://localhost:3000/api/upload/avatar</code></li>
<li>Headers: <code>Authorization: Bearer YOUR_JWT_TOKEN</code></li>
<li>Body â†’ form-data â†’ Key: <code>file</code> (é¸æ“‡ File é¡å‹) â†’ é¸æ“‡åœ–ç‰‡</li>
</ol>
<p>ç¶“ç”± Postman å›å‚³çµæœå¯å¾—çŸ¥æˆåŠŸä¸Šå‚³ï¼æˆåŠŸå¾Œå°±èƒ½æ‹¿åˆ°ä¸€å€‹ Firebase Storage çš„å…¬é–‹ URL ğŸ‰</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day17-Firebase-Multer/1-postman.png?raw=true"></p>
<p>æ¥è‘—ï¼ŒæŸ¥çœ‹ä¸€ä¸‹è³‡æ–™åº« <code>profileUrl</code> æ¬„ä½ â†’ ç™¼ç¾å·²ç¶“æœ‰æ­£ç¢ºçš„ URL å­˜å…¥</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day17-Firebase-Multer/2-database.png?raw=true"></p>
<p>æœ€å¾Œï¼Œå†åˆ°æˆ‘å€‘çš„ Firebase Storage æŸ¥çœ‹æª”æ¡ˆ :</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day17-Firebase-Multer/3-firebase.png?raw=true"></p>
<p>å¤ªæ£’äº†ï¼æˆ‘å€‘ç”¨ Node.js + multer æˆåŠŸä¸²æ¥äº† Firebase Storage æœå‹™ ğŸ»</p>
<hr>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><p>ä»Šå¤©æˆ‘å€‘å®Œæˆäº†ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>multer</code> è™•ç†åœ–ç‰‡ä¸Šå‚³</li>
<li>ä¸²æ¥ Firebase Storage</li>
<li>æŠŠæª”æ¡ˆå­˜é›²ç«¯ä¸¦å–å¾—å…¬é–‹é€£çµ</li>
<li>æ›´æ–°è³‡æ–™åº«ï¼Œè®“ä½¿ç”¨è€…èƒ½æ“æœ‰è‡ªå·±çš„å¤§é ­è²¼</li>
</ul>
<p>åˆ°é€™è£¡ï¼Œæˆ‘å€‘çš„æœå‹™å…·å‚™äº†ã€Œåœ–ç‰‡ä¸Šå‚³ã€çš„èƒ½åŠ›ï¼ ğŸš€</p>
<h2 id="è£œå……è³‡æº"><a href="#è£œå……è³‡æº" class="headerlink" title="è£œå……è³‡æº"></a>è£œå……è³‡æº</h2><blockquote>
<p>commit : use multer and firebase storage to upload file</p>
</blockquote>
<p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/e46e7f49aa707b49da1f733534fd2747898974d1">Github é€£çµ</a></p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 18 - console.log é€€å½¹å•¦ï¼Node.js Pino å¸¶ä½ å‡ç´šå°ˆæ¡ˆ Log</title>
    <url>/2025/10/02/Day18%20-%20NodeJS-Pino/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å¯«ç¨‹å¼çš„éç¨‹ä¸­ï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿå¸¸å¸¸é€™æ¨£åšï¼Ÿ</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è³‡æ–™æœ‰é€²ä¾†å—ï¼Ÿ&quot;</span>, data);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;API å›å‚³çµæœï¼š&quot;</span>, response);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;é€²åˆ°é€™è£¡äº†å—ï¼Ÿ&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ğŸ‘† é€™äº› <code>console.log</code> å¹¾ä¹æ˜¯æ¯å€‹å·¥ç¨‹å¸«çš„ã€Œäººç”Ÿå¿…ç¶“ä¹‹è·¯ã€ã€‚å®ƒå¿«é€Ÿã€ç›´è¦ºï¼Œç”šè‡³å¸¶é»å®‰å…¨æ„Ÿï¼Œå› ç‚ºæˆ‘å€‘å¯ä»¥ç«‹å³çŸ¥é“ç¨‹å¼æœ‰æ²’æœ‰è·‘åˆ°æŸä¸€æ®µã€‚</p>
<p>ä¸éï¼Œç•¶å°ˆæ¡ˆè¶Šä¾†è¶Šå¤§ã€åŠŸèƒ½è¶Šä¾†è¶Šè¤‡é›œï¼Œ<code>console.log</code> çš„ç¼ºé»å°±æœƒæš´éœ²å‡ºä¾†ã€‚ä»Šå¤©ï¼Œæˆ‘å€‘ä¾†èŠèŠä»€éº¼æ˜¯ã€Œæ—¥èªŒ (log)ã€ï¼Œä»¥åŠå®ƒåœ¨å°ˆæ¡ˆä¸­çš„åƒ¹å€¼ï¼Œä¸¦å¯¦æˆ°ä»‹ç´¹ä¸€å€‹è¶…å¥½ç”¨çš„ Node.js æ—¥èªŒå¥—ä»¶ <strong>Pino</strong> ã€‚</p>
<span id="more"></span>

<hr>
<h2 id="ç‚ºä»€éº¼éœ€è¦æ—¥èªŒ-Log-ï¼Ÿ"><a href="#ç‚ºä»€éº¼éœ€è¦æ—¥èªŒ-Log-ï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼éœ€è¦æ—¥èªŒ (Log)ï¼Ÿ"></a>ç‚ºä»€éº¼éœ€è¦æ—¥èªŒ (Log)ï¼Ÿ</h2><p>åœ¨ç³»çµ±é–‹ç™¼ä¸­ï¼Œæ—¥èªŒå°±æ˜¯ç¨‹å¼çš„ã€Œé»‘ç›’å­ç´€éŒ„å™¨ã€ã€‚å®ƒèƒ½å¹«åŠ©æˆ‘å€‘ï¼š</p>
<ul>
<li><strong>Debug é™¤éŒ¯</strong>ï¼šå¿«é€Ÿæ‰¾åˆ°ç¨‹å¼ç¢¼çš„åŸ·è¡Œç‹€æ³èˆ‡éŒ¯èª¤ä¾†æºã€‚</li>
<li><strong>ç›£æ§ç³»çµ±</strong>ï¼šè§€å¯Ÿ API è«‹æ±‚ã€ä¼ºæœå™¨æ•ˆèƒ½èˆ‡éŒ¯èª¤æ¯”ä¾‹ã€‚</li>
<li><strong>è¿½è¹¤ä½¿ç”¨è€…è¡Œç‚º</strong>ï¼šç´€éŒ„èª°ç™»å…¥äº†ç³»çµ±ã€èª°åˆªé™¤äº†å“ªç­†è³‡æ–™ã€‚</li>
<li><strong>é è­¦é€šçŸ¥</strong>ï¼šç•¶éŒ¯èª¤ç•°å¸¸å¢åŠ æ™‚ï¼Œå¯ä»¥è§¸ç™¼å‘Šè­¦ï¼Œé¦¬ä¸Šé€šçŸ¥å·¥ç¨‹å¸«ã€‚</li>
</ul>
<p>ç°¡å–®ä¾†èªªï¼Œlog æ˜¯å°ˆæ¡ˆç©©å®šæ€§å’Œç¶­é‹æ•ˆç‡çš„ã€Œé—œéµå¾Œç›¾ã€ã€‚</p>
<hr>
<h2 id="console-log-çš„å•é¡Œ"><a href="#console-log-çš„å•é¡Œ" class="headerlink" title="console.log çš„å•é¡Œ"></a><code>console.log</code> çš„å•é¡Œ</h2><p>é›–ç„¶ <code>console.log</code> å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒåœ¨å¤§å‹å°ˆæ¡ˆä¸­æœ‰è¨±å¤šé™åˆ¶ï¼š</p>
<ol>
<li><strong>æ²’æœ‰å±¤ç´š</strong>ï¼šéŒ¯èª¤èˆ‡æç¤ºé•·å¾—ä¸€æ¨£ï¼Œé›£ä»¥éæ¿¾ã€‚</li>
<li><strong>ç¼ºä¹çµæ§‹</strong>ï¼šåªæœƒå°æ–‡å­—ï¼Œä¸åˆ©æ–¼å¾ŒçºŒåˆ†æã€‚</li>
<li><strong>é›£ä»¥é›†ä¸­ç®¡ç†</strong>ï¼šå¦‚æœ‰å¤šå°ä¼ºæœå™¨å„å° log çš„æƒ…æ³ï¼Œè¼ƒé›£å½™æ•´ã€‚</li>
<li><strong>æ•ˆèƒ½å•é¡Œ</strong>ï¼šé«˜ä½µç™¼ç’°å¢ƒä¸‹ï¼Œ<code>console.log</code> æœƒæ‹–æ…¢ç¨‹å¼é€Ÿåº¦ã€‚</li>
</ol>
<p>æ‰€ä»¥ï¼Œæˆ‘å€‘éœ€è¦ä¸€å€‹æ›´å°ˆæ¥­çš„è§£æ±ºæ–¹æ¡ˆï¼š<strong>Pino</strong>ã€‚</p>
<hr>
<h2 id="Pino-æ˜¯ä»€éº¼ï¼Ÿ"><a href="#Pino-æ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="Pino æ˜¯ä»€éº¼ï¼Ÿ"></a>Pino æ˜¯ä»€éº¼ï¼Ÿ</h2><p><code>Pino</code> æ˜¯ç›®å‰ Node.js ç”Ÿæ…‹ä¸­æœ€ç†±é–€çš„æ—¥èªŒå¥—ä»¶ä¹‹ä¸€ï¼Œç‰¹è‰²åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æ•ˆèƒ½è¶…å¿«</strong>ï¼ˆæ¯” winston å¿« 5â€“10 å€ï¼‰ã€‚</li>
<li><strong>é è¨­ JSON æ ¼å¼</strong>ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†ï¼ˆå¦‚ Grafana Lokiï¼‰ã€‚</li>
<li><strong>é–‹ç™¼æ¨¡å¼å‹å–„</strong>ï¼Œå¯æ­é… <code>pino-pretty</code> è¼¸å‡ºå½©è‰²ã€äººé¡å¯è®€çš„ logã€‚</li>
<li><strong>æ”¯æ´å¤šå±¤ç´š</strong>ï¼ˆinfoã€warnã€errorã€debugâ€¦ï¼‰ï¼Œé¿å…è¨Šæ¯æ··é›œã€‚</li>
</ul>
<p>æ¥ä¸‹ä¾†å°±å¯¦æˆ°ï¼Œå¸¶ä½ æŠŠå°ˆæ¡ˆçš„ <code>console.log</code> å…¨éƒ¨å‡ç´šæˆ Pino å§ï¼</p>
<hr>
<h2 id="æ­¥é©Ÿ-1ï¼šå®‰è£å¥—ä»¶-ğŸ“¦"><a href="#æ­¥é©Ÿ-1ï¼šå®‰è£å¥—ä»¶-ğŸ“¦" class="headerlink" title="æ­¥é©Ÿ 1ï¼šå®‰è£å¥—ä»¶ ğŸ“¦"></a>æ­¥é©Ÿ 1ï¼šå®‰è£å¥—ä»¶ ğŸ“¦</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install pino</span><br><span class="line">npm install -D pino-pretty @types/pino</span><br></pre></td></tr></table></figure>

<p><strong>å¥—ä»¶èªªæ˜ï¼š</strong></p>
<ul>
<li><code>pino</code>ï¼šä¸»è¦çš„æ—¥èªŒè¨˜éŒ„å¥—ä»¶ã€‚</li>
<li><code>pino-pretty</code>ï¼šé–‹ç™¼ç’°å¢ƒç”¨çš„ç¾åŒ–è¼¸å‡ºå·¥å…·ï¼ˆdevDependenciesï¼‰ã€‚</li>
<li><code>@types/pino</code>ï¼šTypeScript å‹åˆ¥å®šç¾©ã€‚</li>
</ul>
<hr>
<h2 id="æ­¥é©Ÿ-2ï¼šå»ºç«‹-Logger-é…ç½®-ğŸ“"><a href="#æ­¥é©Ÿ-2ï¼šå»ºç«‹-Logger-é…ç½®-ğŸ“" class="headerlink" title="æ­¥é©Ÿ 2ï¼šå»ºç«‹ Logger é…ç½® ğŸ“"></a>æ­¥é©Ÿ 2ï¼šå»ºç«‹ Logger é…ç½® ğŸ“</h2><p>åœ¨ <code>src/utils/logger.ts</code> ä¸­å»ºç«‹ä¸€å€‹å…±ç”¨çš„ loggerï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pino <span class="keyword">from</span> <span class="string">&quot;pino&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–·æ˜¯å¦ç‚ºé–‹ç™¼ç’°å¢ƒ</span></span><br><span class="line"><span class="keyword">const</span> isDevelopment = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&quot;production&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»ºç«‹ logger å¯¦ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> logger = <span class="title function_">pino</span>(&#123;</span><br><span class="line">  <span class="attr">level</span>: process.<span class="property">env</span>.<span class="property">LOG_LEVEL</span> || <span class="string">&quot;info&quot;</span>,</span><br><span class="line">  <span class="attr">transport</span>: isDevelopment</span><br><span class="line">    ? &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&quot;pino-pretty&quot;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="attr">colorize</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">translateTime</span>: <span class="string">&quot;SYS:yyyy-mm-dd HH:MM:ss&quot;</span>,</span><br><span class="line">          <span class="attr">ignore</span>: <span class="string">&quot;pid,hostname&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    : <span class="literal">undefined</span>, <span class="comment">// ç”Ÿç”¢ç’°å¢ƒç›´æ¥è¼¸å‡º JSON</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> logger;</span><br></pre></td></tr></table></figure>

<p>é€™æ¨£ï¼Œæˆ‘å€‘å°±æœ‰ä¸€å€‹å¯ä»¥éš¨æ™‚å‘¼å«çš„ <code>logger</code>ï¼Œè€Œä¸”æœƒæ ¹æ“šç’°å¢ƒè‡ªå‹•èª¿æ•´è¼¸å‡ºæ ¼å¼ã€‚</p>
<hr>
<h2 id="æ­¥é©Ÿ-3ï¼šåœ¨-app-ts-ä½¿ç”¨-Logger-ğŸš€"><a href="#æ­¥é©Ÿ-3ï¼šåœ¨-app-ts-ä½¿ç”¨-Logger-ğŸš€" class="headerlink" title="æ­¥é©Ÿ 3ï¼šåœ¨ app.ts ä½¿ç”¨ Logger ğŸš€"></a>æ­¥é©Ÿ 3ï¼šåœ¨ app.ts ä½¿ç”¨ Logger ğŸš€</h2><p>ä¿®æ”¹ <code>app.ts</code>ï¼Œæ¸¬è©¦ä¸åŒç´šåˆ¥çš„æ—¥èªŒï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;reflect-metadata&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppDataSource</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./config/db&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> todoRoutes <span class="keyword">from</span> <span class="string">&quot;./routes/todoRoutes&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> authRoutes <span class="keyword">from</span> <span class="string">&quot;./routes/authRoutes&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> uploadRoutes <span class="keyword">from</span> <span class="string">&quot;./routes/uploadRoutes&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> dotenv <span class="keyword">from</span> <span class="string">&quot;dotenv&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> logger <span class="keyword">from</span> <span class="string">&quot;./utils/logger&quot;</span>; <span class="comment">// å°å…¥ logger</span></span><br><span class="line"></span><br><span class="line">dotenv.<span class="title function_">config</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸¬è©¦ä¸åŒç´šåˆ¥çš„æ—¥èªŒ</span></span><br><span class="line">logger.<span class="title function_">info</span>(<span class="string">&quot;é€™æ˜¯ä¸€èˆ¬è³‡è¨Š&quot;</span>);</span><br><span class="line">logger.<span class="title function_">debug</span>(<span class="string">&quot;é€™æ˜¯é™¤éŒ¯è¨Šæ¯&quot;</span>);</span><br><span class="line">logger.<span class="title function_">warn</span>(<span class="string">&quot;é€™æ˜¯è­¦å‘Š&quot;</span>);</span><br><span class="line">logger.<span class="title function_">error</span>(<span class="string">&quot;é€™æ˜¯éŒ¯èª¤&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/api/todos&quot;</span>, todoRoutes);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/api/auth&quot;</span>, authRoutes);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/api/upload&quot;</span>, uploadRoutes);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;Hello, iThome 2025!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">AppDataSource</span>.<span class="title function_">initialize</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    logger.<span class="title function_">info</span>(<span class="string">&quot;ğŸ“¦ DB Connected!&quot;</span>);</span><br><span class="line">    app.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      logger.<span class="title function_">info</span>(<span class="string">`ğŸš€ Server running on http://localhost:<span class="subst">$&#123;PORT&#125;</span>`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    logger.<span class="title function_">error</span>(&#123; err &#125;, <span class="string">&quot;âŒ DB connection failed:&quot;</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ä¸åŒç´šåˆ¥çš„æ—¥èªŒæ¸¬è©¦çµæœ :</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day18-Pino/1-log-test.png?raw=true"></p>
<hr>
<h2 id="æ­¥é©Ÿ-4ï¼šHTTP-Request-Logger-ä¸­é–“ä»¶-ğŸ”"><a href="#æ­¥é©Ÿ-4ï¼šHTTP-Request-Logger-ä¸­é–“ä»¶-ğŸ”" class="headerlink" title="æ­¥é©Ÿ 4ï¼šHTTP Request Logger ä¸­é–“ä»¶ ğŸ”"></a>æ­¥é©Ÿ 4ï¼šHTTP Request Logger ä¸­é–“ä»¶ ğŸ”</h2><p>æƒ³è¦ç´€éŒ„ API è«‹æ±‚ï¼ŸåŠ ä¸Š <code>pino-http</code> å°±æå®šï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install pino-http</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>app.ts</code> åŠ å…¥ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pinoHttp <span class="keyword">from</span> <span class="string">&quot;pino-http&quot;</span>;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">pinoHttp</span>(&#123; logger &#125;));</span><br></pre></td></tr></table></figure>

<p>é€™æ¨£ï¼Œæ¯ä¸€æ¬¡ API è«‹æ±‚å’Œå›æ‡‰éƒ½æœƒè‡ªå‹•è¢«è¨˜éŒ„ã€‚</p>
<hr>
<h2 id="æ­¥é©Ÿ-5ï¼šåœ¨-Controller-ä¸­ä½¿ç”¨-Logger-ğŸ’¡"><a href="#æ­¥é©Ÿ-5ï¼šåœ¨-Controller-ä¸­ä½¿ç”¨-Logger-ğŸ’¡" class="headerlink" title="æ­¥é©Ÿ 5ï¼šåœ¨ Controller ä¸­ä½¿ç”¨ Logger ğŸ’¡"></a>æ­¥é©Ÿ 5ï¼šåœ¨ Controller ä¸­ä½¿ç”¨ Logger ğŸ’¡</h2><p>åœ¨ä»»ä½•æª”æ¡ˆéƒ½èƒ½é€™æ¨£å‘¼å«ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logger <span class="keyword">from</span> <span class="string">&quot;../utils/logger&quot;</span>;</span><br><span class="line"></span><br><span class="line">logger.<span class="title function_">info</span>(<span class="string">&quot;ä¸€èˆ¬è³‡è¨Š&quot;</span>);</span><br><span class="line">logger.<span class="title function_">debug</span>(<span class="string">&quot;é™¤éŒ¯è¨Šæ¯&quot;</span>);</span><br><span class="line">logger.<span class="title function_">warn</span>(<span class="string">&quot;è­¦å‘Šè¨Šæ¯&quot;</span>);</span><br><span class="line">logger.<span class="title function_">error</span>(<span class="string">&quot;éŒ¯èª¤è¨Šæ¯&quot;</span>);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å¯¦éš›æ¸¬è©¦"><a href="#å¯¦éš›æ¸¬è©¦" class="headerlink" title="å¯¦éš›æ¸¬è©¦"></a>å¯¦éš›æ¸¬è©¦</h2><p>ç•¶æˆ‘å€‘æ–°å¢ä¸€å€‹ Todo æ™‚ï¼Œlog æœƒé•·é€™æ¨£ï¼š(ç´€éŒ„ API è«‹æ±‚å’Œå›æ‡‰)</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="number">2025</span><span class="number">-10</span><span class="number">-02</span> <span class="number">15</span><span class="punctuation">:</span><span class="number">34</span><span class="punctuation">:</span><span class="number">09</span><span class="punctuation">]</span> INFO<span class="punctuation">:</span> request completed</span><br><span class="line">    req<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;POST&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/api/todos&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;query&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;params&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;headers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;content-type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;application/json&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;authorization&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bearer &lt;token&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;user-agent&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PostmanRuntime/7.48.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;accept&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;postman-token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;77cca9bc-0c90-4539-9df1-923e409eddc7&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;host&quot;</span><span class="punctuation">:</span> <span class="string">&quot;localhost:3000&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;accept-encoding&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gzip, deflate, br&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;connection&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keep-alive&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;content-length&quot;</span><span class="punctuation">:</span> <span class="string">&quot;38&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;remoteAddress&quot;</span><span class="punctuation">:</span> <span class="string">&quot;::1&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;remotePort&quot;</span><span class="punctuation">:</span> <span class="number">63412</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    res<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;statusCode&quot;</span><span class="punctuation">:</span> <span class="number">201</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;headers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;x-powered-by&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Express&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;content-type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;application/json; charset=utf-8&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;content-length&quot;</span><span class="punctuation">:</span> <span class="string">&quot;245&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;etag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;W/\&quot;f5-HbNtbBTEZGIV/ZC0+J4ggDvV1Qo\&quot;&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    responseTime<span class="punctuation">:</span> <span class="number">1033</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="é¡å¤–æç¤º-ğŸ’¡"><a href="#é¡å¤–æç¤º-ğŸ’¡" class="headerlink" title="é¡å¤–æç¤º ğŸ’¡"></a>é¡å¤–æç¤º ğŸ’¡</h2><ol>
<li><p><strong>ç’°å¢ƒè®Šæ•¸</strong></p>
<p>åœ¨ <code>.env</code> æª”è¨­å®š log å±¤ç´šï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">LOG_LEVEL=debug</span><br><span class="line">NODE_ENV=development</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æ—¥èªŒå±¤ç´šé †åºï¼ˆä½ â†’ é«˜ï¼‰</strong></p>
<p><code>trace &lt; debug &lt; info &lt; warn &lt; error &lt; fatal</code></p>
</li>
<li><p><strong>ç”Ÿç”¢ç’°å¢ƒå»ºè­°</strong></p>
<ul>
<li>è¼¸å‡º JSON æ ¼å¼ï¼ˆæ–¹ä¾¿é›†ä¸­æ”¶é›†ï¼‰ã€‚</li>
<li>æ­é… log ç®¡ç†å·¥å…·ï¼ˆå¦‚ Grafana Lokiï¼‰ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h2 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h2><ul>
<li><code>console.log</code> ç¼ºä¹å±¤ç´šã€çµæ§‹åŒ–ï¼Œä¸­å¤§å‹ç³»çµ±ç¶­è­·ä¸Šè¼ƒé›£ã€‚</li>
<li><strong>Pino</strong> æä¾›é«˜æ•ˆèƒ½ã€çµæ§‹åŒ–ã€å¯æ“´å±•çš„ log è§£æ±ºæ–¹æ¡ˆã€‚</li>
<li>é€éå±¤ç´šã€æ ¼å¼åŒ–ã€HTTP ä¸­é–“ä»¶ï¼Œæˆ‘å€‘èƒ½è¼•é¬†æŒæ¡ç³»çµ±å¥åº·ç‹€æ³ã€‚</li>
</ul>
<p>ğŸ‘‰ å¾ä»Šå¤©é–‹å§‹ï¼Œè®“æˆ‘å€‘è·Ÿ <code>console.log</code> èªªæ°æ°ï¼Œè¿æ¥æ›´å°ˆæ¥­çš„æ—¥èªŒç®¡ç†å§ï¼</p>
<hr>
<h2 id="åƒè€ƒè³‡æº"><a href="#åƒè€ƒè³‡æº" class="headerlink" title="åƒè€ƒè³‡æº"></a>åƒè€ƒè³‡æº</h2><blockquote>
<p>commit : add pino plugin</p>
</blockquote>
<p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/1fd0dd5fc31366fb503f98116fd2ab2166647263">Github é€£çµ</a></p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 2 - ç‚ºä»€éº¼è¦ç”¨ TypeScript é–‹ç™¼ Node.jsï¼Ÿï¼ˆåƒ¹å€¼ã€è¶¨å‹¢ï¼‰</title>
    <url>/2025/09/16/Day2%20-%20Why%20use%20TypeScript/</url>
    <content><![CDATA[<p>åœ¨é–‹å§‹ä¹‹å‰ï¼Œå…ˆè®“æˆ‘å€‘ä¾†è«‡è«‡ä»Šå¤©çš„ä¸»è§’ â€”â€” <strong>TypeScript</strong>ã€‚</p>
<p>è¨±å¤šäººåœ¨æ¥è§¸ TypeScript çš„ç¬¬ä¸€åæ‡‰æ˜¯ï¼šã€Œé€™ä¸å°±æ˜¯ JavaScript åŠ ä¸Šå‹åˆ¥å—ï¼Ÿã€æ²’éŒ¯ï¼Œé€™å¥è©±é›–ç„¶ç°¡åŒ–äº†å¾ˆå¤šç´°ç¯€ï¼Œä½†å»èªªä¸­äº†æ ¸å¿ƒã€‚TypeScript æœ¬è³ªä¸Šå°±æ˜¯ <strong>JavaScript çš„è¶…é›†ï¼ˆsupersetï¼‰</strong>ï¼Œå®ƒåœ¨ JavaScript çš„åŸºç¤ä¸ŠåŠ ä¸Šäº†å‹åˆ¥ç³»çµ±èˆ‡ä¸€äº›é€²éšèªæ³•ç³–ï¼Œè®“é–‹ç™¼è€…èƒ½å¯«å‡ºæ›´å¯é ã€æ›´å¯ç¶­è­·çš„ç¨‹å¼ã€‚</p>
<span id="more"></span>

<hr>
<h2 id="ä¸€ã€TypeScript-ç°¡ä»‹èˆ‡ç™¼å±•æ­·å²"><a href="#ä¸€ã€TypeScript-ç°¡ä»‹èˆ‡ç™¼å±•æ­·å²" class="headerlink" title="ä¸€ã€TypeScript ç°¡ä»‹èˆ‡ç™¼å±•æ­·å²"></a>ä¸€ã€TypeScript ç°¡ä»‹èˆ‡ç™¼å±•æ­·å²</h2><p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day2/typescript-officle.png?raw=true"></p>
<p>TypeScript ç”± <strong>å¾®è»Ÿï¼ˆMicrosoftï¼‰</strong> åœ˜éšŠåœ¨ <strong>2012 å¹´</strong>ç™¼è¡¨ï¼Œè¨­è¨ˆä¹‹çˆ¶æ˜¯è‘—åçš„ç¨‹å¼èªè¨€å°ˆå®¶ <strong>Anders Hejlsberg</strong>ï¼Œä»–åŒæ™‚ä¹Ÿæ˜¯ C# çš„ä¸»è¦è¨­è¨ˆè€…ã€‚ç•¶æ™‚ JavaScript åœ¨å¤§å‹å°ˆæ¡ˆä¸­ç¶“å¸¸é‡åˆ°å¯ç¶­è­·æ€§èˆ‡éŒ¯èª¤æª¢æŸ¥çš„ç“¶é ¸ï¼Œå› æ­¤ TypeScript èª•ç”Ÿçš„ç›®æ¨™å°±æ˜¯ï¼š</p>
<p>ğŸ‘‰ <strong>è®“ JavaScript æ›´é©åˆå¤§å‹å°ˆæ¡ˆçš„é–‹ç™¼</strong>ã€‚</p>
<p>éš¨è‘—å‰ç«¯æ¡†æ¶ï¼ˆAngularã€Reactã€Vueï¼‰é€æ¼¸å£¯å¤§ï¼Œä»¥åŠ Node.js é€²è»å¾Œç«¯ï¼ŒTypeScript çš„ç”Ÿæ…‹åœˆä¹Ÿè¿…é€Ÿæ“´å±•ã€‚</p>
<hr>
<h2 id="äºŒã€TypeScript-èˆ‡-JavaScript-çš„é—œä¿‚"><a href="#äºŒã€TypeScript-èˆ‡-JavaScript-çš„é—œä¿‚" class="headerlink" title="äºŒã€TypeScript èˆ‡ JavaScript çš„é—œä¿‚"></a>äºŒã€TypeScript èˆ‡ JavaScript çš„é—œä¿‚</h2><p>å¯ä»¥æŠŠ TypeScript æƒ³æˆæ˜¯ <strong>åŠ å¼·ç‰ˆçš„ JavaScript</strong>ã€‚</p>
<ul>
<li><strong>JavaScript</strong>ï¼šç€è¦½å™¨å’Œ Node.js éƒ½èƒ½ç›´æ¥åŸ·è¡Œçš„èªè¨€ã€‚</li>
<li><strong>TypeScript</strong>ï¼šåœ¨ JavaScript çš„åŸºç¤ä¸Šï¼Œå¢åŠ äº† <strong>å‹åˆ¥ç³»çµ±</strong>ã€<strong>ä»‹é¢ï¼ˆinterfaceï¼‰</strong>ã€<strong>æ³›å‹ï¼ˆgenericsï¼‰</strong> ç­‰åŠŸèƒ½ã€‚</li>
</ul>
<p>æ‰€æœ‰ TypeScript ç¨‹å¼ç¢¼æœ€çµ‚éƒ½æœƒè¢«ã€Œç·¨è­¯ï¼ˆ<strong>compile</strong>ï¼‰ã€æˆç´” JavaScriptï¼Œæ‰èƒ½åœ¨ Node.js æˆ–ç€è¦½å™¨ä¸­åŸ·è¡Œã€‚æ›å¥è©±èªªï¼š</p>
<p>ğŸ’¡ <strong>ä»»ä½•åˆæ³•çš„ JavaScript ç¨‹å¼ç¢¼ï¼Œæœ¬èº«å°±æ˜¯åˆæ³•çš„ TypeScript ç¨‹å¼ç¢¼ã€‚</strong></p>
<hr>
<h2 id="ä¸‰ã€TypeScript-çš„å„ªé»"><a href="#ä¸‰ã€TypeScript-çš„å„ªé»" class="headerlink" title="ä¸‰ã€TypeScript çš„å„ªé»"></a>ä¸‰ã€TypeScript çš„å„ªé»</h2><p>é‚£éº¼ TypeScript åˆ°åº•è§£æ±ºäº†ä»€éº¼ç—›é»å‘¢ï¼Ÿä»¥ä¸‹åˆ—å¹¾å€‹ä¸»è¦å„ªé»ï¼š</p>
<ol>
<li><strong>éœæ…‹å‹åˆ¥æª¢æŸ¥</strong><ul>
<li>åœ¨ç·¨è­¯éšæ®µå°±èƒ½ç™¼ç¾å‹åˆ¥éŒ¯èª¤ï¼Œæ¸›å°‘ runtime bugã€‚</li>
<li>ä¾‹å¦‚ï¼š<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">25</span>;</span><br><span class="line">age = <span class="string">&quot;twenty-five&quot;</span>; <span class="comment">// ç·¨è­¯éŒ¯èª¤ï¼</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong>æ›´å¥½çš„ IDE æ”¯æ´</strong><ul>
<li>è‡ªå‹•è£œå…¨ã€å³æ™‚å‹åˆ¥æç¤ºèˆ‡éŒ¯èª¤æª¢æŸ¥ï¼Œéƒ½æ¯”ç´” JavaScript æ›´ç²¾æº–ã€‚</li>
<li>é€™èƒ½å¤§å¹…æå‡é–‹ç™¼é«”é©—ï¼Œå°¤å…¶åœ¨å¤§å‹å°ˆæ¡ˆä¸­ã€‚</li>
</ul>
</li>
<li><strong>ç¨‹å¼çµæ§‹æ›´æ¸…æ™°</strong><ul>
<li>ä½¿ç”¨ interfaceã€typeã€enum å¯ä»¥æ¸…æ¥šæè¿°è³‡æ–™çµæ§‹ï¼Œåœ˜éšŠæˆå“¡æ›´å®¹æ˜“ç†è§£ã€‚</li>
</ul>
</li>
<li><strong>é™ä½ç¶­è­·æˆæœ¬</strong><ul>
<li>å‹åˆ¥æç¤ºèˆ‡åš´æ ¼æª¢æŸ¥ï¼Œè®“æ–°æˆå“¡æ¥æ‰‹å°ˆæ¡ˆæ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œä¹Ÿé¿å…ã€Œçœ‹åå­—çŒœå‹åˆ¥ã€çš„æƒ…æ³ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h2 id="å››ã€ç‚ºä»€éº¼è¦ç”¨-TypeScript-é–‹ç™¼-Node-jsï¼Ÿï¼ˆåƒ¹å€¼èˆ‡è¶¨å‹¢ï¼‰"><a href="#å››ã€ç‚ºä»€éº¼è¦ç”¨-TypeScript-é–‹ç™¼-Node-jsï¼Ÿï¼ˆåƒ¹å€¼èˆ‡è¶¨å‹¢ï¼‰" class="headerlink" title="å››ã€ç‚ºä»€éº¼è¦ç”¨ TypeScript é–‹ç™¼ Node.jsï¼Ÿï¼ˆåƒ¹å€¼èˆ‡è¶¨å‹¢ï¼‰"></a>å››ã€ç‚ºä»€éº¼è¦ç”¨ TypeScript é–‹ç™¼ Node.jsï¼Ÿï¼ˆåƒ¹å€¼èˆ‡è¶¨å‹¢ï¼‰</h2><p>å¾ˆå¤šäººæœƒå•ï¼š</p>
<blockquote>
<p>Node.js å·²ç¶“ç”¨ JavaScript å°±èƒ½é–‹ç™¼äº†ï¼Œç‚ºä»€éº¼é‚„è¦å¤šå­¸ä¸€å€‹ TypeScriptï¼Ÿ</p>
</blockquote>
<p>ç†ç”±å…¶å¯¦å¾ˆç°¡å–®ï¼Œæ­¸ç´æˆå…©å€‹é—œéµå­—ï¼š<strong>åƒ¹å€¼</strong>èˆ‡<strong>è¶¨å‹¢</strong>ã€‚</p>
<h3 id="1-åƒ¹å€¼"><a href="#1-åƒ¹å€¼" class="headerlink" title="1. åƒ¹å€¼"></a>1. åƒ¹å€¼</h3><ul>
<li><strong>æå‡å°ˆæ¡ˆå¯é åº¦</strong>ï¼šä¼ºæœå™¨ç«¯é€šå¸¸ç‰½æ¶‰åˆ°è³‡æ–™åº«ã€APIã€ä½¿ç”¨è€…è³‡æ–™ï¼Œä»»ä½•éŒ¯èª¤éƒ½å¯èƒ½å°è‡´é‡å¤§å•é¡Œã€‚TypeScript çš„å‹åˆ¥æª¢æŸ¥èƒ½å¤§å¹…é™ä½é€™ç¨®é¢¨éšªã€‚</li>
<li><strong>æ›´å¥½çš„åœ˜éšŠå”ä½œ</strong>ï¼šNode.js å°ˆæ¡ˆé€šå¸¸ä¸æ˜¯ä¸€äººç¨è‡ªé–‹ç™¼ï¼Œè€Œæ˜¯å¤šäººå”ä½œã€‚TypeScript çš„å‹åˆ¥å®šç¾©å°±æ˜¯åœ˜éšŠä¹‹é–“çš„ã€Œå¥‘ç´„ï¼ˆcontractï¼‰ã€ï¼Œé¿å…èª¤è§£ã€‚</li>
<li><strong>é•·æœŸç¶­è­·æ›´è¼•é¬†</strong>ï¼šå¾Œç«¯ç³»çµ±å¸¸å¸¸éœ€è¦è·‘å¥½å¹¾å¹´ï¼ŒTypeScript èƒ½è®“å°ˆæ¡ˆåœ¨ 1 å¹´ã€3 å¹´å¾Œä¾ç„¶å¯è®€ã€å¯ç¶­è­·ã€‚</li>
</ul>
<h3 id="2-è¶¨å‹¢"><a href="#2-è¶¨å‹¢" class="headerlink" title="2. è¶¨å‹¢"></a>2. è¶¨å‹¢</h3><ul>
<li><strong>ä¸»æµæ¡†æ¶å…¨é¢æ”¯æ´</strong>ï¼šåƒæ˜¯ NestJSã€Next.js éƒ½æ˜¯ä»¥ TypeScript ç‚ºæ ¸å¿ƒæ‰“é€ ã€‚</li>
<li><strong>é–‹ç™¼è€…å¸‚å ´éœ€æ±‚</strong>ï¼šæ±‚è·ç¶²ç«™ä¸Šï¼ŒTypeScript å¹¾ä¹å·²ç¶“æ˜¯ Node.js å·¥ç¨‹å¸«çš„å¿…å‚™æŠ€èƒ½ã€‚</li>
<li><strong>ç”Ÿæ…‹ç³»æˆç†Ÿ</strong>ï¼šè¶Šä¾†è¶Šå¤š npm å¥—ä»¶éƒ½æä¾›å®˜æ–¹çš„å‹åˆ¥å®šç¾©ï¼Œä¸å†éœ€è¦è‡ªå·±é¡å¤–è£œé½Šã€‚</li>
</ul>
<p>æ›å¥è©±èªªï¼Œç¾åœ¨çš„ TypeScript å·²ç¶“ä¸æ˜¯ã€Œå¯æœ‰å¯ç„¡çš„åŠ åˆ†é¡Œã€ï¼Œè€Œæ˜¯ Node.js é–‹ç™¼ä¸­é€æ¼¸æˆç‚ºã€ŒåŸºæœ¬é…å‚™ã€çš„æŠ€èƒ½ã€‚</p>
<hr>
<h2 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h2><p>ç¸½çµä¾†èªªï¼ŒTypeScript ä¸æ˜¯è¦å–ä»£ JavaScriptï¼Œè€Œæ˜¯è¦ <strong>è®“ JavaScript æ›´é©åˆåœ¨å¤§å‹ã€é•·æœŸã€å¤šäººå”ä½œçš„å°ˆæ¡ˆä¸­ç™¼å…‰ç™¼ç†±</strong>ã€‚</p>
<p>åœ¨ Node.js çš„å¾Œç«¯é–‹ç™¼ä¸–ç•Œï¼Œå¯é æ€§ã€ç¶­è­·æ€§èˆ‡å¯æ“´å±•æ€§æ˜¯ç¬¬ä¸€å„ªå…ˆï¼Œè€Œé€™æ­£æ˜¯ TypeScript æœ€æ“…é•·çš„é ˜åŸŸã€‚</p>
<p>æ‰€ä»¥ï¼Œèˆ‡å…¶å•ã€Œç‚ºä»€éº¼è¦ç”¨ TypeScriptï¼Ÿã€æ›´æ‡‰è©²å•çš„æ˜¯ï¼š</p>
<p>ğŸ‘‰ <strong>å¦‚æœä¸ç”¨ TypeScriptï¼Œæˆ‘æœƒæå¤±ä»€éº¼ï¼Ÿ</strong></p>
<p>åœ¨æœªä¾†çš„ç³»åˆ—æ–‡ç« è£¡ï¼Œæˆ‘å€‘æœƒå…ˆä»‹ç´¹ä¸€äº› TypeScript åŸºç¤ï¼Œç„¶å¾Œä¸€æ­¥ä¸€æ­¥ç¤ºç¯„ï¼Œå¦‚ä½•æŠŠ TypeScript å’Œ Node.js çµåˆèµ·ä¾†ï¼Œæ‰“é€ ä¸€å€‹å°ˆæ¡ˆç´šçš„é–‹ç™¼ç’°å¢ƒ ğŸš€ã€‚</p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 20 - å¾ 0 åˆ°è‡ªå‹•åŒ–ï¼šé–‹å•Ÿä½ çš„ç¬¬ä¸€å€‹ GitHub Actions æ—…ç¨‹</title>
    <url>/2025/10/04/Day20%20-%20Github-Actions/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å°ˆæ¡ˆé–‹ç™¼çš„éç¨‹ä¸­ï¼Œå¸¸å¸¸æœƒé‡åˆ°é€™ç¨®æƒ…æ³ï¼š</p>
<ul>
<li>æœ‰æ™‚å€™æ˜¯å¿˜äº†è·‘ ESLintï¼Œå°ˆæ¡ˆè£¡åˆ°è™•éƒ½æ˜¯ç´…ç·šã€‚</li>
<li>æœ‰æ™‚å€™æ˜¯æ ¼å¼äº‚æ‰ï¼ŒPrettier æ²’è·‘ï¼Œcode review è®Šæˆã€Œæ’ç‰ˆå¤§æˆ°ã€ã€‚</li>
<li>æ›´æ…˜çš„æ˜¯ï¼Œå¤§å®¶éƒ½èªªã€Œæˆ‘é›»è…¦å¯ä»¥è·‘ã€ï¼Œçµæœä¸€ä½µåˆ° main å°±å…¨å£ã€‚</li>
</ul>
<p>é€™äº›å…¶å¯¦éƒ½ä¸æ˜¯èª°çš„éŒ¯ï¼Œè€Œæ˜¯æˆ‘å€‘ç¼ºå°‘ä¸€å€‹ã€Œè‡ªå‹•å¹«æˆ‘å€‘æª¢æŸ¥ã€çš„æ©Ÿåˆ¶ã€‚</p>
<p>ğŸ‘‰ é€™å°±æ˜¯ <strong>CI&#x2F;CD</strong> ç™»å ´çš„æ™‚å€™ï¼š</p>
<p>å®ƒå°±åƒä¸€å€‹ä¸æœƒå–Šç´¯çš„æ©Ÿå™¨äººï¼Œæ¯æ¬¡ä½  push æˆ–ç™¼ PRï¼Œå°±è‡ªå‹•å¹«ä½ æª¢æŸ¥ã€æ¸¬è©¦ã€ç”šè‡³éƒ¨ç½²ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å€‘å°±ä¾†ç”¨ <strong>GitHub Actions</strong> ç°¡å–®å¹«å°ˆæ¡ˆåŠ ä¸Šé€™å€‹ã€Œè‡ªå‹•å®ˆè­·è€…ã€ï¼Œé–‹å•Ÿ CI&#x2F;CD çš„ç¬¬ä¸€æ­¥ï¼</p>
<span id="more"></span>

<hr>
<h2 id="CI-CD-æ˜¯ä»€éº¼ï¼Ÿæœ‰å•¥å¥½è™•"><a href="#CI-CD-æ˜¯ä»€éº¼ï¼Ÿæœ‰å•¥å¥½è™•" class="headerlink" title="CI &#x2F; CD æ˜¯ä»€éº¼ï¼Ÿæœ‰å•¥å¥½è™•"></a>CI &#x2F; CD æ˜¯ä»€éº¼ï¼Ÿæœ‰å•¥å¥½è™•</h2><ul>
<li><strong>CIï¼ˆContinuous Integrationï¼ŒæŒçºŒæ•´åˆï¼‰</strong><br>æ¯æ¬¡ push æˆ– PR æ™‚ï¼Œè‡ªå‹•è·‘æ¸¬è©¦ã€æª¢æŸ¥ç¨‹å¼ç¢¼ï¼Œç¢ºä¿å°ˆæ¡ˆéš¨æ™‚å¥åº·ã€‚<br><strong>å¥½è™•</strong>ï¼šå¿«é€Ÿç™¼ç¾ bugã€é¿å…åˆä½µè¡çªã€æå‡å°ˆæ¡ˆç©©å®šåº¦ã€‚</li>
<li><strong>CDï¼ˆContinuous Delivery &#x2F; Deploymentï¼ŒæŒçºŒäº¤ä»˜&#x2F;éƒ¨ç½²ï¼‰</strong><ul>
<li>Deliveryï¼šç¢ºä¿ç¨‹å¼éš¨æ™‚å¯ä»¥éƒ¨ç½²ï¼ˆä½†æœ€å¾Œä¸€æ­¥é€šå¸¸äººå·¥æŒ‰ä¸‹å»ï¼‰ã€‚</li>
<li>Deploymentï¼šè‡ªå‹•ä¸€è·¯æ¨åˆ°æ­£å¼ç’°å¢ƒã€‚<br><strong>å¥½è™•</strong>ï¼šè®“ç”¢å“æ›´æ–°æµç¨‹æ›´å¿«ã€æ›´ç©©ã€æ›´å°‘äººç‚ºå¤±èª¤ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ä»€éº¼æ˜¯-GitHub-Actionsï¼Ÿ"><a href="#ä»€éº¼æ˜¯-GitHub-Actionsï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ GitHub Actionsï¼Ÿ"></a>ä»€éº¼æ˜¯ GitHub Actionsï¼Ÿ</h2><p><strong>GitHub Actions</strong> æ˜¯ GitHub æä¾›çš„ <strong>è‡ªå‹•åŒ–å·¥ä½œæµç¨‹æœå‹™</strong>ï¼Œå¯ä»¥åœ¨ pushã€PRã€ç™¼ç‰ˆ tag ç­‰äº‹ä»¶è§¸ç™¼æ™‚ï¼ŒåŸ·è¡Œä½ å®šç¾©çš„å·¥ä½œï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>è·‘ <strong>Lint &#x2F; Test &#x2F; Build</strong></li>
<li>è‡ªå‹•éƒ¨ç½²åˆ° Renderã€Vercelã€AWS</li>
<li>ç™¼é€é€šçŸ¥åˆ° Slack &#x2F; Discord</li>
</ul>
<hr>
<h2 id="åŒé¡å‹å·¥å…·æœ‰å“ªäº›ï¼Ÿ"><a href="#åŒé¡å‹å·¥å…·æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="åŒé¡å‹å·¥å…·æœ‰å“ªäº›ï¼Ÿ"></a>åŒé¡å‹å·¥å…·æœ‰å“ªäº›ï¼Ÿ</h2><p>é™¤äº† GitHub Actionsï¼Œå¸¸è¦‹çš„ CI&#x2F;CD å·¥å…·æœ‰ï¼š</p>
<ul>
<li><strong>GitLab CI&#x2F;CD</strong> â€“ å’Œ GitHub Actions å¾ˆåƒï¼Œä½†å…§å»ºåœ¨ GitLabã€‚</li>
<li><strong>CircleCI &#x2F; Travis CI</strong> â€“ æ—©æœŸå¾ˆæµè¡Œçš„é›²ç«¯æœå‹™ã€‚</li>
<li><strong>Jenkins</strong> â€“ å‚³çµ±è‡ªæ¶ CI&#x2F;CD å·¥å…·ï¼Œå½ˆæ€§é«˜ä½†ç¶­è­·æˆæœ¬å¤§ã€‚</li>
</ul>
<hr>
<h2 id="âœ¨-ç‚ºä½•é¸æ“‡-GitHub-Actions-å…¥é–€ï¼Ÿ"><a href="#âœ¨-ç‚ºä½•é¸æ“‡-GitHub-Actions-å…¥é–€ï¼Ÿ" class="headerlink" title="âœ¨ ç‚ºä½•é¸æ“‡ GitHub Actions å…¥é–€ï¼Ÿ"></a>âœ¨ ç‚ºä½•é¸æ“‡ GitHub Actions å…¥é–€ï¼Ÿ</h2><ul>
<li><strong>é›¶é–€æª»æ•´åˆ</strong>ï¼šRepo åœ¨ GitHubï¼Œå°±èƒ½ç›´æ¥ç”¨ã€‚</li>
<li><strong>ç¤¾ç¾¤è±å¯Œ</strong>ï¼šMarketplace ä¸Šæœ‰å„ç¨®ç¾æˆ actionsã€‚</li>
<li><strong>å…è²»é¡åº¦å¤ ç”¨</strong>ï¼šå°å€‹äººå°ˆæ¡ˆå’Œé–‹æºå¾ˆå‹å–„ã€‚</li>
<li><strong>YAML é…ç½®ç›´è¦º</strong>ï¼šå­¸ä¸€æ¬¡å°±èƒ½å¥—ç”¨åˆ°å…¶ä»–å°ˆæ¡ˆã€‚</li>
</ul>
<hr>
<h2 id="GitHub-Actions-åªè² è²¬-CI-å—ï¼Ÿ"><a href="#GitHub-Actions-åªè² è²¬-CI-å—ï¼Ÿ" class="headerlink" title="GitHub Actions åªè² è²¬ CI å—ï¼Ÿ"></a>GitHub Actions åªè² è²¬ CI å—ï¼Ÿ</h2><p>ä¸æ˜¯ï¼</p>
<ul>
<li>å®ƒå¯ä»¥è·‘ <strong>CIï¼ˆæ¸¬è©¦ &#x2F; æª¢æŸ¥ &#x2F; ç·¨è­¯ï¼‰</strong>ã€‚</li>
<li>ä¹Ÿèƒ½åš <strong>CDï¼ˆè‡ªå‹•éƒ¨ç½²ï¼‰</strong>ã€‚</li>
</ul>
<p>ä»Šå¤©æˆ‘å€‘å…ˆèšç„¦åœ¨ <strong>CI è‡ªå‹•åŒ–æª¢æŸ¥</strong>ï¼Œè®“å°ˆæ¡ˆæ›´å®‰å…¨ã€‚</p>
<hr>
<h2 id="ğŸ› ï¸-å¯¦æˆ°æ­¥é©Ÿ"><a href="#ğŸ› ï¸-å¯¦æˆ°æ­¥é©Ÿ" class="headerlink" title="ğŸ› ï¸ å¯¦æˆ°æ­¥é©Ÿ"></a>ğŸ› ï¸ å¯¦æˆ°æ­¥é©Ÿ</h2><h3 id="æ­¥é©Ÿä¸€ï¼šå‰µå»º-GitHub-Actions-å·¥ä½œæµç¨‹ç›®éŒ„"><a href="#æ­¥é©Ÿä¸€ï¼šå‰µå»º-GitHub-Actions-å·¥ä½œæµç¨‹ç›®éŒ„" class="headerlink" title="æ­¥é©Ÿä¸€ï¼šå‰µå»º GitHub Actions å·¥ä½œæµç¨‹ç›®éŒ„"></a><strong>æ­¥é©Ÿä¸€ï¼šå‰µå»º GitHub Actions å·¥ä½œæµç¨‹ç›®éŒ„</strong></h3><p>é¦–å…ˆï¼Œåœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å‰µå»º <code>.github/workflows</code> è³‡æ–™å¤¾ã€‚</p>
<hr>
<h3 id="æ­¥é©ŸäºŒï¼šå‰µå»º-CI-Workflow-æ–‡ä»¶"><a href="#æ­¥é©ŸäºŒï¼šå‰µå»º-CI-Workflow-æ–‡ä»¶" class="headerlink" title="æ­¥é©ŸäºŒï¼šå‰µå»º CI Workflow æ–‡ä»¶"></a><strong>æ­¥é©ŸäºŒï¼šå‰µå»º CI Workflow æ–‡ä»¶</strong></h3><p>æˆ‘å€‘å»ºç«‹ä¸€å€‹æœ€ç°¡å–®çš„ GitHub Actions workflowï¼ŒåŒ…å«ä»¥ä¸‹æª¢æŸ¥ï¼š</p>
<ul>
<li>âœ… ä»£ç¢¼é¢¨æ ¼æª¢æŸ¥ (ESLint)</li>
<li>âœ… æ ¼å¼æª¢æŸ¥ (Prettier)</li>
<li>âœ… TypeScript ç·¨è­¯æª¢æŸ¥</li>
</ul>
<p>åœ¨å‰›å‰›å»ºç«‹çš„è³‡æ–™å¤¾åº•ä¸‹å»ºç«‹ <code>ci.yml</code>æª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">CI</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è§¸ç™¼æ¢ä»¶ï¼šç•¶æœ‰ç¨‹å¼ç¢¼æ¨é€åˆ°ä»»ä½•åˆ†æ”¯ï¼Œæˆ–æœ‰ Pull Request æ™‚</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">&quot;**&quot;</span>]</span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">&quot;**&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="comment"># ä»£ç¢¼å“è³ªæª¢æŸ¥å·¥ä½œ</span></span><br><span class="line">  <span class="attr">code-quality:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="comment"># æ­¥é©Ÿ 1: æª¢å‡ºç¨‹å¼ç¢¼</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ğŸ“¥</span> <span class="string">æª¢å‡ºç¨‹å¼ç¢¼</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># æ­¥é©Ÿ 2: è¨­ç½® Node.js ç’°å¢ƒ</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ğŸ“¦</span> <span class="string">è¨­ç½®</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&quot;20.17.0&quot;</span></span><br><span class="line">          <span class="attr">cache:</span> <span class="string">&quot;npm&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># æ­¥é©Ÿ 3: å®‰è£ä¾è³´</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ğŸ“š</span> <span class="string">å®‰è£ä¾è³´å¥—ä»¶</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># æ­¥é©Ÿ 4: åŸ·è¡Œ Prettier æ ¼å¼æª¢æŸ¥</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ğŸ¨</span> <span class="string">æª¢æŸ¥ç¨‹å¼ç¢¼æ ¼å¼</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">format:check</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># æ­¥é©Ÿ 5: åŸ·è¡Œ ESLint æª¢æŸ¥</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ğŸ”</span> <span class="string">åŸ·è¡Œ</span> <span class="string">ESLint</span> <span class="string">æª¢æŸ¥</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">lint</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># æ­¥é©Ÿ 6: TypeScript ç·¨è­¯æª¢æŸ¥</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ğŸ”¨</span> <span class="string">TypeScript</span> <span class="string">ç·¨è­¯æª¢æŸ¥</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npx</span> <span class="string">tsc</span> <span class="string">--noEmit</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="è©³ç´°èªªæ˜"><a href="#è©³ç´°èªªæ˜" class="headerlink" title="è©³ç´°èªªæ˜"></a>è©³ç´°èªªæ˜</h2><h3 id="1-Workflow-è§¸ç™¼æ™‚æ©Ÿ"><a href="#1-Workflow-è§¸ç™¼æ™‚æ©Ÿ" class="headerlink" title="1. Workflow è§¸ç™¼æ™‚æ©Ÿ"></a><strong>1. Workflow è§¸ç™¼æ™‚æ©Ÿ</strong></h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">&quot;**&quot;</span>] <span class="comment"># ä»»ä½•åˆ†æ”¯æœ‰æ¨é€æ™‚è§¸ç™¼</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">&quot;**&quot;</span>] <span class="comment"># ä»»ä½• Pull Request æ™‚è§¸ç™¼</span></span><br></pre></td></tr></table></figure>

<h3 id="2-åŸ·è¡Œç’°å¢ƒ"><a href="#2-åŸ·è¡Œç’°å¢ƒ" class="headerlink" title="2. åŸ·è¡Œç’°å¢ƒ"></a><strong>2. åŸ·è¡Œç’°å¢ƒ</strong></h3><ul>
<li><code>runs-on: ubuntu-latest</code> â†’ ä½¿ç”¨æœ€æ–°çš„ Ubuntu ç’°å¢ƒ</li>
<li><code>node-version: &#39;20.17.0&#39;</code> â†’ ä½¿ç”¨å°ˆæ¡ˆæŒ‡å®šçš„ Node.js ç‰ˆæœ¬</li>
</ul>
<h3 id="3-æª¢æŸ¥æ­¥é©Ÿ"><a href="#3-æª¢æŸ¥æ­¥é©Ÿ" class="headerlink" title="3. æª¢æŸ¥æ­¥é©Ÿ"></a><strong>3. æª¢æŸ¥æ­¥é©Ÿ</strong></h3><ol>
<li><strong>æ ¼å¼æª¢æŸ¥</strong> â†’ ç¢ºä¿ç¨‹å¼ç¢¼ç¬¦åˆ Prettier è¦ç¯„</li>
<li><strong>Lint æª¢æŸ¥</strong> â†’ ç¢ºä¿ç¨‹å¼ç¢¼ç¬¦åˆ ESLint è¦å‰‡</li>
<li><strong>ç·¨è­¯æª¢æŸ¥</strong> â†’ ç¢ºä¿ TypeScript æ²’æœ‰å‹åˆ¥éŒ¯èª¤</li>
</ol>
<hr>
<h2 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h2><h3 id="æ­¥é©Ÿä¸‰ï¼šæäº¤ä¸¦æ¨é€åˆ°-GitHub"><a href="#æ­¥é©Ÿä¸‰ï¼šæäº¤ä¸¦æ¨é€åˆ°-GitHub" class="headerlink" title="æ­¥é©Ÿä¸‰ï¼šæäº¤ä¸¦æ¨é€åˆ° GitHub"></a><strong>æ­¥é©Ÿä¸‰ï¼šæäº¤ä¸¦æ¨é€åˆ° GitHub</strong></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. å°‡ workflow æ–‡ä»¶åŠ å…¥ç‰ˆæœ¬æ§åˆ¶</span></span><br><span class="line">git add .github/workflows/ci.yml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æäº¤è®Šæ›´</span></span><br><span class="line">git commit -m <span class="string">&quot;chore: add GitHub Actions CI workflow&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. æ¨é€åˆ° GitHub</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="æ­¥é©Ÿå››ï¼šæŸ¥çœ‹-Actions-åŸ·è¡Œçµæœ"><a href="#æ­¥é©Ÿå››ï¼šæŸ¥çœ‹-Actions-åŸ·è¡Œçµæœ" class="headerlink" title="æ­¥é©Ÿå››ï¼šæŸ¥çœ‹ Actions åŸ·è¡Œçµæœ"></a><strong>æ­¥é©Ÿå››ï¼šæŸ¥çœ‹ Actions åŸ·è¡Œçµæœ</strong></h3><ol>
<li><p>å‰å¾€ä½ çš„ GitHub repository</p>
</li>
<li><p>é»æ“Šä¸Šæ–¹çš„ <strong>â€œActionsâ€</strong> æ¨™ç±¤</p>
</li>
<li><p>ä½ æœƒçœ‹åˆ° workflow æ­£åœ¨åŸ·è¡Œæˆ–å·²å®Œæˆ</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day20-Github-Action/1-CI-InProgress.png?raw=true"></p>
</li>
<li><p>é»æ“Šä»»ä½•ä¸€æ¬¡åŸ·è¡Œå¯ä»¥æŸ¥çœ‹è©³ç´°çš„åŸ·è¡Œè¨˜éŒ„ (é€™é‚Šå¯ä»¥ç™¼ç¾ç¨‹å¼ç¢¼æ ¼å¼ä¸Šæœ‰äº›å•é¡Œ) â†’ CI æª¢æŸ¥å¤±æ•—</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day20-Github-Action/2-migration-prob.png?raw=true"></p>
</li>
<li><p>ä¿®å¾©é—œæ–¼ migrations è³‡æ–™å¤¾åº•ä¸‹ç¨‹å¼ç¢¼æ ¼å¼å•é¡Œ â†’ ç›®æ¨™æ˜¯è®“ CI èƒ½å¤ æ­£ç¢ºå®Œæ•´åŸ·è¡Œ</p>
<p><strong>æ¨è–¦æ–¹æ³•ï¼šè®“ Prettier å’Œ ESLint å¿½ç•¥ migrations è³‡æ–™å¤¾çš„æª¢æŸ¥</strong></p>
<p>é€™æ˜¯æœ€å¸¸è¦‹çš„åšæ³•ï¼Œå› ç‚ºï¼š</p>
<ul>
<li>âœ… migration æ˜¯ TypeORM è‡ªå‹•ç”Ÿæˆçš„ï¼Œä¸æ‡‰è©²æ‰‹å‹•æˆ–æ ¼å¼åŒ–ä¿®æ”¹</li>
<li>âœ…Â  æ¯æ¬¡ç”Ÿæˆæ–°çš„ migration éƒ½æœƒæœ‰ç›¸åŒçš„å•é¡Œ</li>
</ul>
<p>åœ¨ <code>.prettierignore</code> åŠ ä¸Š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">src/migrations/**/*.ts</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ <code>eslint.config.js</code> åŠ ä¸Š ( <code>ignores: [&quot;src/migrations/**/*.ts&quot;]</code> )</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">const js = require(<span class="string">&quot;@eslint/js&quot;</span>);</span><br><span class="line">const globals = require(<span class="string">&quot;globals&quot;</span>);</span><br><span class="line">const prettier = require(<span class="string">&quot;eslint-config-prettier&quot;</span>);</span><br><span class="line">const tsParser = require(<span class="string">&quot;@typescript-eslint/parser&quot;</span>);</span><br><span class="line">const tsPlugin = require(<span class="string">&quot;@typescript-eslint/eslint-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line">module.exports = [</span><br><span class="line">  &#123;</span><br><span class="line">    // æ–°å¢ï¼šå¿½ç•¥ migrations è³‡æ–™å¤¾</span><br><span class="line">    ignores: [<span class="string">&quot;src/migrations/**/*.ts&quot;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    files: [<span class="string">&quot;**/*.ts&quot;</span>], // æª¢æŸ¥ .ts æª”æ¡ˆ</span><br><span class="line">    languageOptions: &#123;</span><br><span class="line">      parser: tsParser, // ç”¨ TypeScript çš„è§£æå™¨</span><br><span class="line">      sourceType: <span class="string">&quot;module&quot;</span>, // æ”¯æ´ ES æ¨¡çµ„</span><br><span class="line">      globals: &#123;</span><br><span class="line">        ...globals.node, // Node.js çš„å…¨åŸŸè®Šæ•¸ï¼ˆåƒ processï¼‰</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    // ... existing code ...</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€²è¡Œ commit èˆ‡æ¨é€ç¨‹å¼ç¢¼</p>
<p>commit : update ESLint&#x2F;Prettier config to ignore migrations folder</p>
</li>
<li><p>ä¸€æ¨£çš„æ–¹å¼æŸ¥çœ‹ Github Action</p>
</li>
<li><p>çµæœ : åµæ¸¬å‡ºæˆ‘å€‘ä¹‹å‰æ¸¬è©¦ ESLint å¥—ä»¶æ‰€å»ºç«‹çš„ä¸€å€‹å°æª”æ¡ˆæœ‰å•é¡Œ <code>testLint.ts</code></p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day20-Github-Action/3-testLint-prob.png?raw=true"></p>
</li>
<li><p>ç§»é™¤ <code>testLint.ts</code> å¾Œå† push ä¸€æ¬¡</p>
</li>
<li><p>çµæœ : æˆåŠŸé€šé CI æ¸¬è©¦å•¦ï¼</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day20-Github-Action/4-CI-success.png?raw=true"></p>
</li>
</ol>
<hr>
<h2 id="âœ…-å®Œæˆï¼"><a href="#âœ…-å®Œæˆï¼" class="headerlink" title="âœ… å®Œæˆï¼"></a>âœ… å®Œæˆï¼</h2><p>åˆ°é€™è£¡ï¼Œä½ å·²ç¶“æˆåŠŸåœ¨å°ˆæ¡ˆä¸­å°å…¥ <strong>ç¬¬ä¸€å€‹ GitHub Actions CI Workflow</strong>ã€‚</p>
<p>å¾ç¾åœ¨é–‹å§‹ï¼Œæ¯æ¬¡ push æˆ–ç™¼ PRï¼ŒGitHub æœƒå¹«ä½ è‡ªå‹•æª¢æŸ¥ç¨‹å¼ç¢¼ï¼Œç¢ºä¿å“è³ªç„¡è™ã€‚</p>
<hr>
<h2 id="è£œå……"><a href="#è£œå……" class="headerlink" title="è£œå……"></a>è£œå……</h2><p>å¦‚æœåªæƒ³åœ¨ <code>main</code> å’Œ <code>develop</code> åˆ†æ”¯åŸ·è¡Œï¼Œå¯ä»¥æ”¹æˆï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">&quot;main&quot;</span>, <span class="string">&quot;develop&quot;</span>]</span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">&quot;main&quot;</span>, <span class="string">&quot;develop&quot;</span>]</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h2><p>åˆ°ä»Šå¤©ç‚ºæ­¢ï¼Œæˆ‘å€‘å·²ç¶“å¹«å°ˆæ¡ˆåŠ ä¸Šäº†ç¬¬ä¸€å±¤ä¿è­·ç¶²ï¼š</p>
<ul>
<li>push &#x2F; PR â†’ è‡ªå‹•è·‘ <strong>ESLint &#x2F; Prettier &#x2F; TypeScript æª¢æŸ¥</strong></li>
<li>ä»»ä½•éŒ¯èª¤ â†’ CI ç«‹åˆ»åµæ¸¬ï¼Œä¿æŒç¨‹å¼ç¢¼å“è³ª</li>
</ul>
<p>CI å°±åƒä¸€å€‹å®‰éœä½†å¯é çš„å®ˆè­·è€…ï¼Œå¹«åŠ©åœ˜éšŠç¶­æŒå°ˆæ¡ˆå“è³ªã€‚</p>
<hr>
<h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/eb0291ea9426aef7bf640a69d98fd03e8b0930b1">chore: ğŸ¤– add GitHub Actions CI workflow</a></p>
<p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/13d901b086c26472e51a6f1fd34603dd8393bfbb">chore: ğŸ¤– update ESLint&#x2F;Prettier config to ignore migrations</a></p>
<p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/7dd74bae3d93d95e3397f6fc3feed9c85d1048e3">fix: ğŸ› reomve testLint.ts</a></p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 10 - éƒ¨ç½²å•Ÿç¨‹ï¼å¾ Render éƒ¨ç½²å‰ç½®ä½œæ¥­åˆ° GitHub PR</title>
    <url>/2025/09/24/Day10%20-%20GithubPR-Render/</url>
    <content><![CDATA[<h2 id="Render-æœå‹™ç°¡ä»‹"><a href="#Render-æœå‹™ç°¡ä»‹" class="headerlink" title="Render æœå‹™ç°¡ä»‹"></a>Render æœå‹™ç°¡ä»‹</h2><p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day10-Render-deploy/1-render.png?raw=true" alt="1-render.png"></p>
<p>åœ¨å‰å¹¾å¤©çš„ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å·²ç¶“å®Œæˆäº†æœ¬åœ°ç«¯çš„ç’°å¢ƒå»ºç½®èˆ‡åŠŸèƒ½å¯¦ä½œã€‚ä½†çœŸå¯¦å°ˆæ¡ˆè£¡ï¼Œå…‰æ˜¯ã€Œæˆ‘çš„é›»è…¦èƒ½è·‘ã€æ˜¯ä¸å¤ çš„ï¼Œæˆ‘å€‘éœ€è¦æŠŠæœå‹™æ”¾åˆ°é›²ç«¯ï¼Œè®“å…¨ä¸–ç•Œéƒ½èƒ½å­˜å–ã€‚</p>
<span id="more"></span>

<p>å¸¸è¦‹çš„é›²ç«¯å¹³å°æœ‰ <strong>AWS</strong>ã€<strong>GCP</strong>ã€<strong>Azure</strong> ç­‰ï¼Œå®ƒå€‘æä¾›å®Œæ•´çš„åŸºç¤å»ºè¨­æœå‹™ï¼ˆIaaSï¼‰ã€‚ä½†å°æ–¼åˆå­¸è€…æˆ–ä¸­å°å‹å°ˆæ¡ˆä¾†èªªï¼Œé€™äº›å¹³å°çš„å­¸ç¿’æ›²ç·šåé«˜ã€è¨­å®šä¹Ÿæ¯”è¼ƒç¹ç‘£ã€‚</p>
<p><strong>Render</strong> å±¬æ–¼ <strong>PaaSï¼ˆå¹³å°å³æœå‹™ï¼‰</strong>ï¼Œæä¾›æ¯” AWSã€GCP æ›´ç›´è¦ºçš„éƒ¨ç½²é«”é©—ï¼Œåªéœ€è¦å°ˆæ³¨æ–¼ç¨‹å¼ç¢¼æœ¬èº«ï¼ŒRender å°±èƒ½è‡ªå‹•å¹«æˆ‘å€‘å®Œæˆç’°å¢ƒå»ºç½®ã€ä½ˆç½²ã€ç›£æ§ã€‚</p>
<p>ğŸ‘‰ é©åˆå¿«é€Ÿä¸Šæ‰‹ã€éƒ¨å±¬ Side Project æˆ–å€‹äººç·´ç¿’å°ˆæ¡ˆã€‚</p>
<hr>
<h2 id="ç”¨-Github-å¸³è™Ÿç¬¬ä¸‰æ–¹ç™»å…¥-Render-æœå‹™"><a href="#ç”¨-Github-å¸³è™Ÿç¬¬ä¸‰æ–¹ç™»å…¥-Render-æœå‹™" class="headerlink" title="ç”¨ Github å¸³è™Ÿç¬¬ä¸‰æ–¹ç™»å…¥ Render æœå‹™"></a>ç”¨ Github å¸³è™Ÿç¬¬ä¸‰æ–¹ç™»å…¥ Render æœå‹™</h2><p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day10-Render-deploy/2-signin-render.png?raw=true" alt="Screenshot 2025-09-23 at 7.56.36â€¯PM.png"></p>
<p>Render æä¾› <strong>Github å¸³è™Ÿç™»å…¥</strong>ï¼Œé€™æ¨£åšçš„å¥½è™•æ˜¯å¯ä»¥ç›´æ¥èˆ‡ GitHub å°ˆæ¡ˆé€£å‹•ã€‚</p>
<p>ä¸€æ—¦æˆ‘å€‘åœ¨ GitHub ä¸Šæœ‰æ–°çš„ commitï¼ˆä¾‹å¦‚åˆä½µ PRï¼‰ï¼ŒRender å°±èƒ½è‡ªå‹•è§¸ç™¼å»ºç½®èˆ‡éƒ¨ç½²ã€‚</p>
<p><strong>å„ªé»ï¼š</strong></p>
<ul>
<li>è‡ªå‹•åŒæ­¥ GitHub repo</li>
<li>çœå»æ‰‹å‹•ä¸Šå‚³ç¨‹å¼ç¢¼çš„éº»ç…©</li>
<li>CI&#x2F;CD æ•´åˆæ›´ç°¡å–®</li>
</ul>
<hr>
<h2 id="Node-js-å°ˆæ¡ˆéƒ¨ç½²å‰ç½®ä½œæ¥­"><a href="#Node-js-å°ˆæ¡ˆéƒ¨ç½²å‰ç½®ä½œæ¥­" class="headerlink" title="Node.js å°ˆæ¡ˆéƒ¨ç½²å‰ç½®ä½œæ¥­"></a>Node.js å°ˆæ¡ˆéƒ¨ç½²å‰ç½®ä½œæ¥­</h2><h3 id="ä¿®æ”¹-package-json"><a href="#ä¿®æ”¹-package-json" class="headerlink" title="ä¿®æ”¹ package.json"></a>ä¿®æ”¹ package.json</h3><ol>
<li><p><strong>æ–°å¢å•Ÿå‹•èˆ‡å»ºç½®æŒ‡ä»¤</strong></p>
<ul>
<li><p>åœ¨ <code>package.json</code> çš„ <code>scripts</code> ä¸­åŠ å…¥ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node dist/app.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsc&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>start</code>ï¼šåŸ·è¡Œç·¨è­¯å¾Œçš„ç¨‹å¼ã€‚</p>
</li>
<li><p><code>build</code>ï¼šæŠŠ TypeScript ç·¨è­¯ç‚º JavaScriptã€‚</p>
</li>
</ul>
</li>
<li><p><strong>æŒ‡å®š Node.js ç‰ˆæœ¬</strong></p>
<ul>
<li><p>åœ¨ <code>package.json</code> ä¸­åŠ å…¥ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;engines&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;20.x&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ç‚ºä»€éº¼è¦æŒ‡å®šç‰ˆæœ¬ï¼Ÿ</strong><br>Render é è¨­å¯èƒ½ä½¿ç”¨ä¸åŒçš„ Node.js ç‰ˆæœ¬ï¼Œå¦‚æœèˆ‡æœ¬åœ°ç«¯å·®ç•°éå¤§ï¼Œå¯èƒ½å°è‡´éƒ¨ç½²éŒ¯èª¤ã€‚<br>æŒ‡å®š Node.js ç‰ˆæœ¬èƒ½ç¢ºä¿ Render çš„åŸ·è¡Œç’°å¢ƒèˆ‡æˆ‘å€‘æœ¬åœ°ç«¯ä¸€è‡´ï¼Œæ¸›å°‘ç‰ˆæœ¬ä¸ç›¸å®¹çš„å•é¡Œã€‚</p>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="ç¢ºèª-app-ts"><a href="#ç¢ºèª-app-ts" class="headerlink" title="ç¢ºèª app.ts"></a>ç¢ºèª app.ts</h3><p>ç¢ºä¿ <code>app.ts</code> ä½¿ç”¨ç’°å¢ƒè®Šæ•¸çš„ PORTï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">3000</span>;</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server is running on port <span class="subst">$&#123;PORT&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>âš ï¸ <strong>å°æé†’</strong></p>
<p>åœ¨ Render ä¸Šï¼Œæœå‹™çš„åŸ è™Ÿï¼ˆ<code>PORT</code>ï¼‰æ˜¯ <strong>è‡ªå‹•åˆ†é…</strong> çš„ï¼Œä¸¦é€é <code>process.env.PORT</code> å‚³å…¥ç¨‹å¼ã€‚</p>
<p>å› æ­¤ <strong>ä¸éœ€è¦åœ¨ Render æ§åˆ¶å°æ‰‹å‹•æ–°å¢ <code>PORT</code> ç’°å¢ƒè®Šæ•¸</strong>ã€‚</p>
<p>åªè¦ç¨‹å¼ç¢¼æœ‰å¯«ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<p>å°±èƒ½æ­£ç¢ºæ¥æ”¶ Render çµ¦çš„ Portã€‚</p>
<hr>
<h3 id="ç·¨è­¯èˆ‡é‹è¡Œ"><a href="#ç·¨è­¯èˆ‡é‹è¡Œ" class="headerlink" title="ç·¨è­¯èˆ‡é‹è¡Œ"></a>ç·¨è­¯èˆ‡é‹è¡Œ</h3><p>åœ¨éƒ¨ç½²åˆ° Render å‰ï¼Œå…ˆåœ¨æœ¬åœ°ç«¯æ¸¬è©¦ï¼š</p>
<ol>
<li><p><strong>ç·¨è­¯ç¨‹å¼ç¢¼</strong></p>
<ul>
<li><p>åŸ·è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€™æœƒå°‡ TypeScript ç·¨è­¯ç‚º JavaScriptï¼Œè¼¸å‡ºåˆ° <code>dist</code> è³‡æ–™å¤¾ã€‚</p>
</li>
</ul>
</li>
<li><p><strong>é‹è¡Œç·¨è­¯å¾Œçš„ç¨‹å¼</strong></p>
<ul>
<li><p>åŸ·è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></table></figure>
</li>
<li><p>æª¢æŸ¥æ˜¯å¦èƒ½æ­£å¸¸å•Ÿå‹•ä¼ºæœå™¨ä¸¦é€£æ¥åˆ°è³‡æ–™åº«ã€‚</p>
</li>
</ul>
</li>
</ol>
<blockquote>
<p>[æ³¨æ„]ï¼šæœ¬åœ°ç«¯æ¸¬è©¦æˆåŠŸå¾Œå†é€²è¡Œéƒ¨ç½²ï¼Œç¢ºä¿ç¨‹å¼ç¢¼ç„¡èª¤ã€‚</p>
</blockquote>
<blockquote>
<p>commit : Day 10 Render Deploy setting</p>
</blockquote>
<p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/dec62b5d6891897d92eb39d5367be0471c9c2f37">ç¯„ä¾‹ç¨‹å¼ç¢¼</a></p>
<hr>
<h2 id="GitHub-Merge-PR-æµç¨‹"><a href="#GitHub-Merge-PR-æµç¨‹" class="headerlink" title="GitHub Merge PR æµç¨‹"></a>GitHub Merge PR æµç¨‹</h2><p>åœ¨å°ˆæ¡ˆé–‹ç™¼æ™‚ï¼Œæˆ‘å€‘é€šå¸¸æœƒç”¨ <strong>feature åˆ†æ”¯</strong> ä¾†é–‹ç™¼æ–°åŠŸèƒ½ï¼Œå®Œæˆå¾Œå†é€é <strong>Pull Request (PR)</strong> åˆä½µåˆ° <code>develop</code> åˆ†æ”¯ã€‚ä»¥ä¸‹æ˜¯ç°¡å–®çš„æ“ä½œæµç¨‹ï¼š</p>
<hr>
<h3 id="Step-1-å»ºç«‹-Pull-Request"><a href="#Step-1-å»ºç«‹-Pull-Request" class="headerlink" title="Step 1. å»ºç«‹ Pull Request"></a>Step 1. å»ºç«‹ Pull Request</h3><p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day10-Render-deploy/3-create-pr.png?raw=true" alt="Screenshot 2025-09-23 at 8.58.41â€¯PM.png"></p>
<p>é»æ“Š <strong>Compare &amp; pull request</strong> !</p>
<hr>
<h3 id="Step-2-æ’°å¯«-PR-æè¿°"><a href="#Step-2-æ’°å¯«-PR-æè¿°" class="headerlink" title="Step 2. æ’°å¯« PR æè¿°"></a>Step 2. æ’°å¯« PR æè¿°</h3><p>é¸æ“‡è¦åˆä½µçš„åˆ†æ”¯ï¼š</p>
<ul>
<li><strong>base</strong>ï¼š<code>develop</code></li>
<li><strong>compare</strong>ï¼š<code>feature/init-ts-express</code></li>
</ul>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day10-Render-deploy/4-pr-desc.png?raw=true" alt="Screenshot 2025-09-23 at 9.01.06â€¯PM.png"></p>
<p>åœ¨æè¿°å€å¡Šä¸­ï¼Œåˆ—å‡ºé€™æ¬¡ PR çš„ä¸»è¦è®Šæ›´ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>åˆå§‹åŒ– Node.js + TypeScript å°ˆæ¡ˆæ¶æ§‹</li>
<li>å»ºç«‹åŸºæœ¬ Express server</li>
<li>æ–°å¢ TodoList API (CRUD)</li>
<li>æ•´åˆ TypeORM èˆ‡è³‡æ–™åº«é€£ç·š</li>
</ul>
<p>å¡«å¯« PR æ¨™é¡Œèˆ‡æè¿°ï¼Œæº–å‚™é€å‡º PRã€‚æŒ‰ä¸‹ Create pull request !</p>
<hr>
<h3 id="Step-3-æª¢è¦–-PR-ç‹€æ…‹"><a href="#Step-3-æª¢è¦–-PR-ç‹€æ…‹" class="headerlink" title="Step 3. æª¢è¦– PR ç‹€æ…‹"></a>Step 3. æª¢è¦– PR ç‹€æ…‹</h3><p>é€å‡º PR å¾Œï¼Œå¯ä»¥çœ‹åˆ° Commit è¨˜éŒ„èˆ‡æª”æ¡ˆè®Šæ›´ã€‚</p>
<p>æ­¤æ™‚ GitHub æœƒæª¢æŸ¥èˆ‡ <code>develop</code> åˆ†æ”¯æ˜¯å¦æœ‰è¡çªï¼š</p>
<ul>
<li>âœ… <strong>No conflicts</strong> â†’ å¯ä»¥å®‰å…¨åˆä½µ</li>
<li>âš ï¸ <strong>æœ‰è¡çª</strong> â†’ éœ€è¦å…ˆè§£æ±ºè¡çª</li>
</ul>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day10-Render-deploy/5-check-pr.png?raw=true" alt="Screenshot 2025-09-23 at 9.01.35â€¯PM.png"></p>
<hr>
<h3 id="Step-4-åˆä½µåˆ°-develop"><a href="#Step-4-åˆä½µåˆ°-develop" class="headerlink" title="Step 4. åˆä½µåˆ° develop"></a>Step 4. åˆä½µåˆ° develop</h3><p>ç¢ºèªç„¡èª¤å¾Œï¼Œé»æ“Š <strong>Merge pull request</strong> â†’ <strong>Confirm merge</strong>ï¼Œå°±èƒ½æŠŠ feature åˆ†æ”¯åˆä½µåˆ° <code>develop</code>ã€‚</p>
<p>åˆä½µå®Œæˆå¾Œï¼Œ<code>develop</code> åˆ†æ”¯å°±æœƒæ›´æ–°ï¼ŒåŒ…å«æœ€æ–°çš„åŠŸèƒ½ã€‚</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day10-Render-deploy/6-merge-result.png?raw=true" alt="Screenshot 2025-09-23 at 9.02.07â€¯PM.png"></p>
<hr>
<p>å…ˆå®Œæˆé€™äº›æ­¥é©Ÿå¾Œï¼Œæ˜å¤©æˆ‘å€‘å°±èƒ½æŠŠ <code>develop</code> åˆ†æ”¯éƒ¨ç½²åˆ° Render å›‰ ğŸš€ã€‚</p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Render</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 21 - AWS åˆæ¢ (1) â€“ ä»€éº¼æ˜¯é›²ç«¯æœå‹™ï¼Ÿ</title>
    <url>/2025/10/05/Day21%20-%20AWS-Intro/</url>
    <content><![CDATA[<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day21-AWS-Intro/1-AWS.jpeg?raw=true"></p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å‰å¹¾å¤©çš„ç³»åˆ—æ–‡ç« è£¡ï¼Œæˆ‘å€‘å·²ç¶“ç”¨ <strong>Render</strong> ä¾†éƒ¨ç½² Node.js æœå‹™ï¼Œé«”é©—åˆ°é›²ç«¯å¹³å°çš„ä¾¿åˆ©ã€‚</p>
<p>ä¸éï¼ŒRender å±¬æ–¼åå‘ <strong>PaaSï¼ˆå¹³å°å³æœå‹™ï¼‰</strong> çš„æ–¹æ¡ˆï¼Œå¹«æˆ‘å€‘æŠŠåŸºç¤å»ºè¨­åŒ…å¥½ï¼Œåªéœ€è¦å°ˆæ³¨åœ¨ç¨‹å¼ç¢¼å³å¯ã€‚</p>
<p>å¦‚æœæˆ‘å€‘å¸Œæœ›æœ‰æ›´å¤§çš„ <strong>å½ˆæ€§èˆ‡æ§åˆ¶æ¬Š</strong>â€”â€”ä¾‹å¦‚é¸æ“‡ä¼ºæœå™¨è¦æ ¼ã€è¨­å®šç¶²è·¯ç’°å¢ƒã€ç®¡ç†ä½¿ç”¨è€…æ¬Šé™ï¼Œé‚£éº¼ <strong>AWSï¼ˆAmazon Web Servicesï¼‰</strong> å°±æ˜¯æ›´å¼·å¤§çš„é¸æ“‡ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å€‘å°±ä¾†çœ‹çœ‹ï¼šä»€éº¼æ˜¯ AWSï¼Œå®ƒèƒ½å¹«æˆ‘å€‘åšä»€éº¼ï¼Ÿ</p>
<span id="more"></span>

<hr>
<h2 id="1-ç‚ºä»€éº¼éœ€è¦é›²ç«¯ï¼Ÿ"><a href="#1-ç‚ºä»€éº¼éœ€è¦é›²ç«¯ï¼Ÿ" class="headerlink" title="1. ç‚ºä»€éº¼éœ€è¦é›²ç«¯ï¼Ÿ"></a>1. ç‚ºä»€éº¼éœ€è¦é›²ç«¯ï¼Ÿ</h2><p>éå»å¦‚æœå…¬å¸è¦æ¶ç¶²ç«™ï¼Œé€šå¸¸è¦åšé€™äº›äº‹ï¼š</p>
<ul>
<li>è³¼è²·å¯¦é«”ä¼ºæœå™¨</li>
<li>æ”¾åœ¨æ©Ÿæˆ¿ï¼Œæ¥ä¸Šç¶²è·¯</li>
<li>è˜è«‹ MIS å·¥ç¨‹å¸«ç¶­è­·</li>
</ul>
<p>é€™æ¨£ä¸ä½†æˆæœ¬é«˜æ˜‚ï¼Œä¹Ÿç¼ºä¹å½ˆæ€§ã€‚å‡å¦‚ä»Šå¤©çªç„¶æœ‰ä¸€è¬å€‹äººåŒæ™‚è¦ç”¨ç¶²ç«™ï¼Œä¼ºæœå™¨å¾ˆå¯èƒ½ç›´æ¥çˆ†æ‰ã€‚</p>
<p><strong>é›²ç«¯æœå‹™çš„èª•ç”Ÿ</strong>ï¼Œå°±æ˜¯ç‚ºäº†ç”¨ã€Œç§Ÿã€çš„æ–¹å¼ï¼Œå¹«æˆ‘å€‘å¿«é€Ÿè§£æ±ºé€™äº›éº»ç…©ã€‚</p>
<hr>
<h2 id="2-é›²ç«¯çš„ä¸‰ç¨®å±¤ç´š"><a href="#2-é›²ç«¯çš„ä¸‰ç¨®å±¤ç´š" class="headerlink" title="2. é›²ç«¯çš„ä¸‰ç¨®å±¤ç´š"></a>2. é›²ç«¯çš„ä¸‰ç¨®å±¤ç´š</h2><p>åœ¨ç†è§£ AWS ä¹‹å‰ï¼Œå…ˆä¾†çœ‹çœ‹é›²ç«¯æœå‹™çš„ä¸‰ç¨®å¸¸è¦‹é¡å‹ï¼š</p>
<ul>
<li><strong>IaaSï¼ˆInfrastructure as a Serviceï¼‰åŸºç¤å»ºè¨­å³æœå‹™</strong><br>æä¾›è™›æ“¬ä¸»æ©Ÿã€ç¶²è·¯ã€å„²å­˜ç©ºé–“ã€‚<br>ä¾‹ï¼šAWS EC2</li>
<li><strong>PaaSï¼ˆPlatform as a Serviceï¼‰å¹³å°å³æœå‹™</strong><br>å¹«ä½ æº–å‚™å¥½æ‡‰ç”¨ç’°å¢ƒï¼Œä½ åªè¦ä¸Ÿç¨‹å¼ç¢¼ã€‚<br>ä¾‹ï¼šRenderã€AWS Elastic Beanstalk</li>
<li><strong>SaaSï¼ˆSoftware as a Serviceï¼‰è»Ÿé«”å³æœå‹™</strong><br>ç›´æ¥ç”¨ç¾æˆçš„æ‡‰ç”¨ã€‚<br>ä¾‹ï¼šGmailã€Google Drive</li>
</ul>
<p>ğŸ‘‰ AWS ä¸»è¦æä¾› <strong>IaaS + PaaS</strong>ï¼Œæ˜¯é–‹ç™¼è€…æ‰“é€ æ‡‰ç”¨çš„åŸºç¤ã€‚</p>
<hr>
<h2 id="3-AWS-çš„å››å¤§åŸºç¤æœå‹™é¡åˆ¥"><a href="#3-AWS-çš„å››å¤§åŸºç¤æœå‹™é¡åˆ¥" class="headerlink" title="3. AWS çš„å››å¤§åŸºç¤æœå‹™é¡åˆ¥"></a>3. AWS çš„å››å¤§åŸºç¤æœå‹™é¡åˆ¥</h2><p>AWS æä¾›ä¸Šç™¾ç¨®æœå‹™ï¼Œä¸éä¸€é–‹å§‹åªè¦å…ˆèªè­˜å››å¤§é¡åˆ¥å°±å¥½ï¼š</p>
<ul>
<li><strong>Computeï¼ˆé‹ç®—ï¼‰</strong> â†’ EC2ï¼šç§Ÿä¸€å°è™›æ“¬ä¸»æ©Ÿ</li>
<li><strong>Storageï¼ˆå„²å­˜ï¼‰</strong> â†’ S3ï¼šæ”¾æª”æ¡ˆï¼›RDSï¼šé›²ç«¯è³‡æ–™åº«</li>
<li><strong>Networkï¼ˆç¶²è·¯ï¼‰</strong> â†’ VPCï¼šå»ºç«‹é›²ç«¯å…§éƒ¨ç¶²è·¯ï¼›Route53ï¼šç¶²åŸŸæœå‹™</li>
<li><strong>Authï¼ˆèº«åˆ†é©—è­‰ï¼‰</strong> â†’ IAMï¼šç®¡ç†ä½¿ç”¨è€…èˆ‡æ¬Šé™</li>
</ul>
<hr>
<h2 id="4-å»¶ä¼¸åƒ¹å€¼"><a href="#4-å»¶ä¼¸åƒ¹å€¼" class="headerlink" title="4. å»¶ä¼¸åƒ¹å€¼"></a>4. å»¶ä¼¸åƒ¹å€¼</h2><p>ç‚ºä»€éº¼ä¸è‡ªå·±è²·ä¼ºæœå™¨ï¼Œè€Œæ˜¯ç”¨ AWSï¼Ÿå·®åˆ¥åœ¨æ–¼ï¼š</p>
<ul>
<li><strong>è‡ªå‹•æ“´å±•ï¼ˆScalingï¼‰</strong>ï¼šæµé‡æš´å¢ä¹Ÿèƒ½æ’ä½</li>
<li><strong>å‚™ä»½ï¼ˆBackupï¼‰</strong>ï¼šè‡ªå‹•ä¿å­˜è³‡æ–™</li>
<li><strong>é«˜å¯ç”¨æ€§ï¼ˆFailoverï¼‰</strong>ï¼šä¸€å°æ›æ‰ï¼Œå¦ä¸€å°é¦¬ä¸Šæ¥æ‰‹</li>
<li><strong>è³‡å®‰ï¼ˆSecurityï¼‰</strong>ï¼šå¸³è™Ÿæ¬Šé™æ§ç®¡ï¼Œç¬¦åˆç”¢æ¥­å®‰å…¨æ¨™æº–</li>
</ul>
<p>é€™äº›åŠŸèƒ½å°å€‹äººé–‹ç™¼è€…ä¾†èªªï¼Œå¯èƒ½ä¸å¸¸ç”¨åˆ°ï¼›ä½†å°æ–¼ä¼æ¥­ç´šå°ˆæ¡ˆï¼Œå°±æ˜¯ AWS æœ€å¤§çš„åƒ¹å€¼ã€‚</p>
<hr>
<h2 id="5-çµè«–"><a href="#5-çµè«–" class="headerlink" title="5. çµè«–"></a>5. çµè«–</h2><p>AWS å¯ä»¥æƒ³åƒæˆä¸€å€‹ã€Œé›²ç«¯è¶…å¸‚ã€ï¼š</p>
<ul>
<li>æƒ³è¦ä¼ºæœå™¨ï¼Ÿæ‹¿ EC2ã€‚</li>
<li>æƒ³è¦è³‡æ–™åº«ï¼Ÿæ‹¿ RDSã€‚</li>
<li>æƒ³è¦æª”æ¡ˆç©ºé–“ï¼Ÿæ‹¿ S3ã€‚</li>
</ul>
<p>å®ƒä¸åªæ˜¯ç§Ÿç¡¬é«”ï¼Œæ›´æ˜¯æä¾›äº†ä¸€æ•´å¥—å¹«ä½ ç¶­è­·ã€æ“´å±•ã€å®‰å…¨ç®¡ç†çš„å·¥å…·ã€‚</p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>AWS</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 1 - Typescript + Node.js ç³»åˆ—è—åœ–</title>
    <url>/2025/09/15/Day1%20-%20Typescript%20+%20Node.js%20%E7%B3%BB%E5%88%97%E8%97%8D%E5%9C%96/</url>
    <content><![CDATA[<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day1/TypeScriptNode.png?raw=true"></p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å“ˆå›‰ï¼å¾ˆé«˜èˆˆæ‚¨é»é–‹é€™ç¯‡æ–‡ç« ã€‚å¦‚æœæ‚¨æ˜¯ Node.js é–‹ç™¼è€…ï¼Œä¸¦ä¸”æƒ³è®“è‡ªå·±çš„ç¨‹å¼ç¢¼æ›´ç©©å¥ã€æ˜“æ–¼ç¶­è­·ï¼Œé‚£éº¼æ‚¨ä¾†å°åœ°æ–¹äº†ã€‚åœ¨é€™å ´ç‚ºæœŸ 30 å¤©çš„æŠ€è¡“æŒ‘æˆ°è³½ä¸­ï¼Œæˆ‘å°‡ä¸€æ­¥æ­¥æ¢ç´¢ TypeScriptï¼Œä¸¦å°‡å®ƒæ•´åˆåˆ° Node.js çš„é–‹ç™¼æµç¨‹ä¸­ã€‚</p>
<p>å¾åŸºç¤çš„èªæ³•ã€ç’°å¢ƒå»ºç½®ï¼Œåˆ°å¸¸è¦‹çš„å•†æ¥­æ‡‰ç”¨å ´æ™¯ï¼ˆå¦‚é‡‘æµä¸²æ¥ã€æª”æ¡ˆä¸Šå‚³ï¼‰ï¼Œç”šè‡³æ˜¯æœ€å¾Œçš„é›²ç«¯éƒ¨ç½²ï¼Œæˆ‘å€‘å°‡å¾ªåºæ¼¸é€²åœ°å®Œæˆä¸€äº›åŠŸèƒ½æ€§çš„å°ˆæ¡ˆã€‚é€™ä¸åƒ…åƒ…æ˜¯ä¸€å ´å¯«ä½œé¦¬æ‹‰æ¾ï¼Œæ›´æ˜¯ä¸€è¶Ÿè®“æ‚¨çš„é–‹ç™¼æŠ€èƒ½å…¨é¢å‡ç´šçš„æ—…ç¨‹ã€‚</p>
<span id="more"></span>

<h2 id="ç‚ºä»€éº¼è¦ç”¨-TypeScriptï¼Ÿ"><a href="#ç‚ºä»€éº¼è¦ç”¨-TypeScriptï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼è¦ç”¨ TypeScriptï¼Ÿ"></a>ç‚ºä»€éº¼è¦ç”¨ TypeScriptï¼Ÿ</h2><p>åœ¨é€²å…¥ä¸»è»¸ä¹‹å‰ï¼Œæ‚¨å¯èƒ½æœƒæƒ³ï¼šã€Œç‚ºä»€éº¼è¦èŠ±æ™‚é–“å­¸ TypeScriptï¼ŸJavaScript ä¸æ˜¯å·²ç¶“å¤ ç”¨äº†å—ï¼Ÿã€</p>
<p>ç¢ºå¯¦ï¼ŒJavaScript éˆæ´»ã€å…¥é–€é–€æª»ä½ï¼Œä½†ç•¶å°ˆæ¡ˆè¦æ¨¡è¶Šä¾†è¶Šå¤§æ™‚ï¼Œå®ƒçš„ã€Œå½ˆæ€§ã€ä¹Ÿå¯èƒ½å¸¶ä¾†ç¶­è­·ä¸Šçš„æŒ‘æˆ°ã€‚TypeScript æ­£æ˜¯ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œè€Œç”Ÿã€‚å®ƒå¼•å…¥äº†éœæ…‹å‹åˆ¥ç³»çµ±ï¼Œè®“æ‚¨åœ¨å¯«ç¨‹å¼çš„ç•¶ä¸‹å°±èƒ½ç™¼ç¾æ½›åœ¨çš„éŒ¯èª¤ï¼Œå¤§å¹…é™ä½äº†é™¤éŒ¯çš„æˆæœ¬ã€‚æ­¤å¤–ï¼Œé€éæ˜ç¢ºçš„å‹åˆ¥å®šç¾©ï¼Œç¨‹å¼ç¢¼çš„å¯è®€æ€§æœƒå¤§å¤§æå‡ï¼Œåœ˜éšŠå”ä½œä¹Ÿè®Šå¾—æ›´åŠ é †æš¢ã€‚</p>
<p>ç°¡è€Œè¨€ä¹‹ï¼ŒTypeScript å°±åƒæ˜¯ç‚ºæ‚¨çš„ç¨‹å¼ç¢¼åŠ ä¸Šäº†å®‰å…¨å¸¶ï¼Œè®“æ‚¨åœ¨é«˜é€Ÿé–‹ç™¼çš„åŒæ™‚ï¼Œä¹Ÿèƒ½ç¢ºä¿å“è³ªã€‚</p>
<h2 id="ç³»åˆ—æ–‡ç« è—åœ–èˆ‡è¦åŠƒ"><a href="#ç³»åˆ—æ–‡ç« è—åœ–èˆ‡è¦åŠƒ" class="headerlink" title="ç³»åˆ—æ–‡ç« è—åœ–èˆ‡è¦åŠƒ"></a>ç³»åˆ—æ–‡ç« è—åœ–èˆ‡è¦åŠƒ</h2><p>ç‚ºäº†è®“é€™è¶Ÿæ—…ç¨‹æ›´æœ‰æ–¹å‘ï¼Œæˆ‘è¦åŠƒäº†æ¥ä¸‹ä¾† 30 å¤©çš„å­¸ç¿’è—åœ–ã€‚å®ƒå°‡å¼•å°æˆ‘å€‘å¾ TypeScript çš„åŸºç¤çŸ¥è­˜ï¼Œèˆªå‘æ›´è¤‡é›œçš„å¾Œç«¯æ‡‰ç”¨å ´æ™¯ï¼Œæœ€çµ‚å°‡æˆ‘å€‘çš„æˆæœéƒ¨ç½²åˆ°é›²ç«¯ã€‚</p>
<p>é€™ä»½è—åœ–å°‡åˆ†ç‚ºä»¥ä¸‹å¹¾å€‹éšæ®µï¼š</p>
<ol>
<li><strong>Typescript æ ¸å¿ƒèªæ³•èˆ‡åŸºç¤è¤‡ç¿’</strong> : åœ¨æ­£å¼é€²å…¥å¯¦æˆ°å‰ï¼Œæˆ‘å€‘æœƒå…ˆè¤‡ç¿’ä¸¦æŒæ¡ TypeScript çš„æ ¸å¿ƒè§€å¿µï¼Œå»ºç«‹ã€Œå‹åˆ¥æ€ç¶­ã€ã€‚</li>
<li><strong>åŸºç¤å»ºç½®èˆ‡ç’°å¢ƒè¨­å®š</strong>ï¼šå¾é›¶é–‹å§‹ï¼Œå¸¶æ‚¨å»ºç«‹ä¸€å€‹å®Œå–„çš„ TypeScript + Node.js é–‹ç™¼ç’°å¢ƒï¼Œä¸¦å®Œæˆä¸€å€‹ç°¡å–®çš„ API å¯¦ä½œã€‚</li>
<li><strong>å°ˆæ¡ˆå·¥å…·èˆ‡é€²éšåŠŸèƒ½</strong>ï¼šè®“å°ˆæ¡ˆæ›´å°ˆæ¥­ï¼æˆ‘å€‘æœƒåŠ å…¥ç¨‹å¼ç¢¼æ ¼å¼åŒ–å·¥å…·ã€è‡ªå‹•åŒ–ç”¢ç”Ÿ API æ–‡ä»¶ï¼Œä¸¦æ¢ç´¢å¦‚ä½•å¿«é€Ÿéƒ¨ç½²ã€‚</li>
<li><strong>å¾Œç«¯å¸¸è¦‹å•†æ¥­æ‡‰ç”¨å ´æ™¯</strong>ï¼šé€™éƒ¨åˆ†å°‡æ¶µè“‹å¾Œç«¯é–‹ç™¼ä¸­ä¸å¯æˆ–ç¼ºçš„åŠŸèƒ½ï¼Œå¦‚ä½¿ç”¨è€…é©—è­‰ã€é‡‘æµèˆ‡é›²ç«¯æœå‹™ä¸²æ¥ç­‰ã€‚</li>
<li><strong>é›²ç«¯éƒ¨ç½²èˆ‡ç¶­è­·</strong>ï¼šæœ€å¾Œï¼Œæˆ‘å€‘æœƒå°‡å°ˆæ¡ˆéƒ¨ç½²åˆ°é›²ç«¯æœå‹™ä¸Šï¼Œä¸¦äº†è§£ä¸€äº›åŸºæœ¬çš„é›²ç«¯æ¦‚å¿µã€‚</li>
</ol>
<p>æ¯ä¸€å¤©ï¼Œæˆ‘å€‘éƒ½æœƒå°ˆæ³¨æ–¼ä¸€äº›çš„çŸ¥è­˜é»ï¼Œç¢ºä¿æ‚¨å¯ä»¥å¾ªåºæ¼¸é€²åœ°å¸æ”¶æ–°çŸ¥ã€‚</p>
<p>æº–å‚™å¥½å’Œæˆ‘ä¸€èµ·æŒ‘æˆ°äº†å—ï¼Ÿè®“æˆ‘å€‘å¾æ˜å¤©é–‹å§‹ï¼Œæ­£å¼å•Ÿå‹•é€™å ´ TypeScript å‡ç´šä¹‹æ—…å§ï¼ğŸš€ğŸ‰</p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 22 - AWS åˆæ¢ (2) - ç ´é—œæ‹¿çé‡‘ãƒ»é ç®—é˜²è­·</title>
    <url>/2025/10/06/Day22%20-%20AWS-Budget/</url>
    <content><![CDATA[<h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h2><p>ç›®å‰ç”³è¾¦ AWS å¸³è™Ÿæœƒæä¾›ä¸€çµ„ã€Œæ¢ç´¢ AWSã€æ´»å‹•ï¼Œåªè¦å®Œæˆå¹¾å€‹æŒ‡å®šä»»å‹™ï¼Œå°±èƒ½ç²å¾—æœ€å¤š <strong>US$100 çš„æŠµç”¨é‡‘</strong>ã€‚</p>
<p>é€™äº›ä»»å‹™åŒ…å«ï¼š</p>
<ul>
<li>ä½¿ç”¨ Amazon Bedrock</li>
<li>åœ¨ Budgets ä¸­è¨­å®šæˆæœ¬é ç®—</li>
<li>å»ºç«‹ä¸€å€‹ Lambda æ‡‰ç”¨ç¨‹å¼</li>
<li>å»ºç«‹ä¸€å€‹ RDS è³‡æ–™åº«</li>
<li>å•Ÿå‹•ä¸€å° EC2 è™›æ“¬ä¸»æ©Ÿ</li>
</ul>
<span id="more"></span>

<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day22-AWS-budgets/1-aws-tasks.png?raw=true"></p>
<p>ç­†è€…ç›®å‰å·²å®Œæˆå…©é …ä»»å‹™ï¼Œå…±ç²å¾— <strong>US$40</strong> çš„æŠµç”¨é‡‘ã€‚</p>
<p>æ¥ä¸‹ä¾†è¦æŒ‘æˆ°çš„å°±æ˜¯â€”â€”<strong>å»ºç«‹ AWS Budgets é ç®—é˜²è­·</strong>ï¼Œé¿å…å¸³å–®ç‚¸è£‚ ã€‚</p>
<hr>
<h2 id="ğŸ§¾-ç‚ºä»€éº¼è¦è¨­å®šé ç®—é˜²è­·ï¼Ÿ"><a href="#ğŸ§¾-ç‚ºä»€éº¼è¦è¨­å®šé ç®—é˜²è­·ï¼Ÿ" class="headerlink" title="ğŸ§¾ ç‚ºä»€éº¼è¦è¨­å®šé ç®—é˜²è­·ï¼Ÿ"></a>ğŸ§¾ ç‚ºä»€éº¼è¦è¨­å®šé ç®—é˜²è­·ï¼Ÿ</h2><p>ç­†è€…å»å¹´ä½¿ç”¨ GCP Cloud SQL æ™‚ï¼Œ</p>
<p>å› ç‚ºå¿˜è¨˜é—œé–‰æœå‹™ï¼Œçµæœå¸³å–®çˆ†å‡º <strong>ä¸ƒåƒå¤šå…ƒå°å¹£ QQ</strong>ã€‚</p>
<p>é€™æ¬¡å¸å–æ•™è¨“ï¼Œè¦ºå¾—åœ¨ AWS è¨­å®šã€Œé ç®—è­¦å ±ã€éå¸¸é‡è¦ã€‚</p>
<p>é€™æ¨£ç•¶ä½¿ç”¨é‡æˆ–é‡‘é¡è¶…éè¨­å®šå€¼æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•å¯„ä¿¡æé†’ï¼Œé¿å…å†åº¦å‡ºäº‹ã€‚</p>
<hr>
<h2 id="å¯¦ä½œï¼šè¨­å®š-AWS-Budgets-é ç®—é˜²è­·"><a href="#å¯¦ä½œï¼šè¨­å®š-AWS-Budgets-é ç®—é˜²è­·" class="headerlink" title="å¯¦ä½œï¼šè¨­å®š AWS Budgets é ç®—é˜²è­·"></a>å¯¦ä½œï¼šè¨­å®š AWS Budgets é ç®—é˜²è­·</h2><p>ä»¥ä¸‹æ­¥é©Ÿè¶…ç°¡å–®ï¼Œå¤§ç´„ 5 åˆ†é˜å³å¯å®Œæˆï¼</p>
<hr>
<h3 id="Step-1-åƒèˆ‡-AWS-æ¢ç´¢æ´»å‹•"><a href="#Step-1-åƒèˆ‡-AWS-æ¢ç´¢æ´»å‹•" class="headerlink" title="Step 1. åƒèˆ‡ AWS æ¢ç´¢æ´»å‹•"></a>Step 1. åƒèˆ‡ AWS æ¢ç´¢æ´»å‹•</h3><ol>
<li><p>è¨»å†Šæ–°å¸³è™Ÿ â†’ ç™»å…¥ AWS Console</p>
</li>
<li><p>å°‹æ‰¾æ¢ç´¢ AWS å€å¡Š</p>
</li>
<li><p>é»æ“Š<strong>ä½¿ç”¨ AWS Budgets è¨­å®šæˆæœ¬é ç®—</strong></p>
</li>
<li><p>æŒ‰ä¸‹é–‹å§‹æ´»å‹•</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day22-AWS-budgets/2-start-event.png?raw=true"></p>
</li>
</ol>
<hr>
<h3 id="Step-2-é¸æ“‡é ç®—é¡å‹"><a href="#Step-2-é¸æ“‡é ç®—é¡å‹" class="headerlink" title="Step 2. é¸æ“‡é ç®—é¡å‹"></a>Step 2. é¸æ“‡é ç®—é¡å‹</h3><p>é€™è£¡æˆ‘å€‘é¸æ“‡ä½¿ç”¨æ•™å­¸ç¯„æœ¬ â†’ æ¯æœˆæˆæœ¬é ç®—</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day22-AWS-budgets/3-budget-type.png?raw=true"></p>
<hr>
<h3 id="Step-3-è¨­å®šé ç®—åç¨±èˆ‡é‡‘é¡"><a href="#Step-3-è¨­å®šé ç®—åç¨±èˆ‡é‡‘é¡" class="headerlink" title="Step 3. è¨­å®šé ç®—åç¨±èˆ‡é‡‘é¡"></a>Step 3. è¨­å®šé ç®—åç¨±èˆ‡é‡‘é¡</h3><p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day22-AWS-budgets/4-set-budget.png?raw=true"></p>
<p>åœ¨ã€Œ<strong>æ¯æœˆæˆæœ¬é ç®— â€“ ç¯„æœ¬</strong>ã€å€åŸŸï¼š</p>
<ul>
<li><strong>é ç®—åç¨±</strong>ï¼šè¼¸å…¥ <code>MyBudget</code></li>
<li>**è¼¸å…¥é ç®—é‡‘é¡ (US$)**ï¼šè¨­å®šæ¯æœˆé ç®—ï¼Œä¾‹å¦‚ <code>5 USD</code></li>
<li><strong>é›»å­éƒµä»¶æ”¶ä»¶äºº</strong>ï¼šå¡«å…¥è¦æ”¶åˆ°é€šçŸ¥çš„é›»å­éƒµä»¶</li>
</ul>
<blockquote>
<p>å°æŠ€å·§ï¼š</p>
<p>å¦‚æœä½ åªæ˜¯æ¸¬è©¦ç”¨é€”ï¼Œè¨­å®š 5 æˆ– 10 ç¾å…ƒå³å¯ã€‚</p>
<p>ä¸€æ—¦è¶…éé€™å€‹é‡‘é¡ï¼ŒAWS å°±æœƒç™¼ä¿¡é€šçŸ¥ã€‚</p>
</blockquote>
<hr>
<h3 id="Step-4-ç¢ºèªèˆ‡å»ºç«‹"><a href="#Step-4-ç¢ºèªèˆ‡å»ºç«‹" class="headerlink" title="Step 4. ç¢ºèªèˆ‡å»ºç«‹"></a>Step 4. ç¢ºèªèˆ‡å»ºç«‹</h3><p>æª¢æŸ¥è¨­å®šæ²’å•é¡Œå¾Œï¼ŒæŒ‰ä¸‹ å»ºç«‹é ç®—ã€‚</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day22-AWS-budgets/5-create-budget.png?raw=true"></p>
<p>æ¥è‘—å›åˆ° Budgets åˆ—è¡¨ï¼Œä½ å°±èƒ½çœ‹åˆ°å‰›å»ºç«‹çš„é ç®—ç›£æ§é …ç›®ã€‚</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day22-AWS-budgets/6-budget-dashboard.png?raw=true"></p>
<hr>
<h2 id="âœ…-é ˜å–çé‡‘"><a href="#âœ…-é ˜å–çé‡‘" class="headerlink" title="âœ… é ˜å–çé‡‘"></a>âœ… é ˜å–çé‡‘</h2><p>ä¸Šè¿°æ­¥é©Ÿéƒ½å®Œæˆå¾Œå°±å¯ä»¥å›åˆ°ä¸»æ§å° â†’ æ¢ç´¢ AWS å€å¡ŠæŸ¥çœ‹æ˜¯å¦æœ‰æˆåŠŸé ˜å–æŠµç”¨é‡‘é¡å•¦ï¼</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day22-AWS-budgets/7-get-aws-money.png?raw=true"></p>
<hr>
<h2 id="å°çµï¼šç”¨é ç®—é˜²è­·å®‰å¿ƒç©é›²ç«¯"><a href="#å°çµï¼šç”¨é ç®—é˜²è­·å®‰å¿ƒç©é›²ç«¯" class="headerlink" title="å°çµï¼šç”¨é ç®—é˜²è­·å®‰å¿ƒç©é›²ç«¯"></a>å°çµï¼šç”¨é ç®—é˜²è­·å®‰å¿ƒç©é›²ç«¯</h2><p>é€™ä¸€æ­¥çœ‹ä¼¼ç°¡å–®ï¼Œå»éå¸¸é—œéµã€‚</p>
<p>å®ƒå°±åƒä½ åœ¨ç©é›²ç«¯æœå‹™æ™‚è·åŒ…çš„ã€Œå®‰å…¨ä¿éšœã€ï¼Œ</p>
<p>è®“ä½ å¯ä»¥æ”¾å¿ƒæ¢ç´¢ï¼Œè€Œä¸ç”¨æ“”å¿ƒæœˆåº•å¸³å–®çˆ†ç‚¸ã€‚</p>
<p>ä»Šå¤©è§£é–äº†ã€Œæ¢ç´¢ AWSã€ä»»å‹™ã€å¤šæ‹¿åˆ° 20 ç¾å…ƒæŠµç”¨é‡‘ ğŸ’°Â  å¤ªæ£’å•¦ï¼</p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>AWS</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 23 - å¾é›¶å•Ÿå‹•é›²ç«¯ä¸»æ©Ÿï¼šå¸¶ä½ é–‹å‡ºç¬¬ä¸€å° AWS EC2ï¼</title>
    <url>/2025/10/07/Day23%20-%20AWS-EC2/</url>
    <content><![CDATA[<blockquote>
<p>è·Ÿè‘— AWS å®˜æ–¹å¼•å°ï¼Œå¾é›¶å•Ÿå‹•ç¬¬ä¸€å°é›²ç«¯ä¸»æ©Ÿï¼</p>
</blockquote>
<hr>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><ul>
<li><p>æ‰¿æ¥å‰ç¯‡ï¼šã€Œæˆ‘å€‘å·²ç¶“å®Œæˆäº† AWS é ç®—é˜²è­·ï¼Œç¢ºä¿ä¸æœƒçˆ†èŠ±è²»ã€‚ã€</p>
</li>
<li><p>ä»Šå¤©è¦å¯¦éš›é«”é©—ã€Œåœ¨é›²ç«¯é–‹ä¸€å°ä¸»æ©Ÿã€ï¼Œä¹Ÿå°±æ˜¯ <strong>EC2ï¼ˆElastic Compute Cloudï¼‰</strong>ã€‚</p>
</li>
<li><p>EC2 å°±åƒä½ çš„ã€Œé›²ç«¯é›»è…¦ã€ï¼Œèƒ½å®‰è£ç³»çµ±ã€æ¶ç¶²ç«™ã€éƒ¨ç½² APIã€‚</p>
</li>
<li><p>æœ¬ç¯‡æœƒå¸¶ä½ ä¸€æ­¥æ­¥å®Œæˆï¼š</p>
<ol>
<li>èªè­˜ EC2</li>
<li>å»ºç«‹ EC2</li>
<li>SSH é€£ç·šé€²å…¥ EC2</li>
</ol>
  <span id="more"></span></li>
</ul>
<hr>
<h2 id="ä»€éº¼æ˜¯-EC2ï¼Ÿ"><a href="#ä»€éº¼æ˜¯-EC2ï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ EC2ï¼Ÿ"></a>ä»€éº¼æ˜¯ EC2ï¼Ÿ</h2><ul>
<li>EC2 å…¨å <strong>Elastic Compute Cloud</strong>ã€‚</li>
<li>å®ƒæ˜¯ä¸€ç¨®å¯å½ˆæ€§æ“´å±•çš„è™›æ“¬ä¼ºæœå™¨æœå‹™ã€‚</li>
<li>ä½ å¯ä»¥æƒ³åƒå®ƒæ˜¯ã€Œé›²ç«¯ç‰ˆçš„é›»è…¦ã€ï¼š<ul>
<li>æœ‰ CPUã€è¨˜æ†¶é«”ã€ç£ç¢Ÿ</li>
<li>å¯ä»¥å®‰è£ OSï¼ˆä¾‹å¦‚ Ubuntuã€Amazon Linuxï¼‰</li>
<li>é€é SSH é€£é€²å»æ“ä½œ</li>
</ul>
</li>
</ul>
<p>ğŸ“˜ å°çŸ¥è­˜ï¼š</p>
<blockquote>
<p>EC2 æ˜¯ AWS æœ€æ ¸å¿ƒçš„æœå‹™ä¹‹ä¸€ï¼Œè¨±å¤šå…¶ä»–æœå‹™ï¼ˆåƒ RDSã€S3ï¼‰éƒ½æœƒèˆ‡ EC2 æ­é…ä½¿ç”¨ã€‚</p>
</blockquote>
<hr>
<h2 id="å»ºç«‹-EC2-çš„å®Œæ•´æ­¥é©Ÿ"><a href="#å»ºç«‹-EC2-çš„å®Œæ•´æ­¥é©Ÿ" class="headerlink" title="å»ºç«‹ EC2 çš„å®Œæ•´æ­¥é©Ÿ"></a>å»ºç«‹ EC2 çš„å®Œæ•´æ­¥é©Ÿ</h2><h3 id="Step-1ï¼šé–‹å•Ÿæ´»å‹•ã€Œå•Ÿå‹•åŸ·è¡Œå€‹é«”ã€"><a href="#Step-1ï¼šé–‹å•Ÿæ´»å‹•ã€Œå•Ÿå‹•åŸ·è¡Œå€‹é«”ã€" class="headerlink" title="Step 1ï¼šé–‹å•Ÿæ´»å‹•ã€Œå•Ÿå‹•åŸ·è¡Œå€‹é«”ã€"></a>Step 1ï¼šé–‹å•Ÿæ´»å‹•ã€Œå•Ÿå‹•åŸ·è¡Œå€‹é«”ã€</h3><ul>
<li>ç™»å…¥ AWS â†’ é»é¸ã€Œæ¢ç´¢ AWSã€â†’ ã€Œä½¿ç”¨ EC2 å•Ÿå‹•åŸ·è¡Œå€‹é«”ã€</li>
<li>ç³»çµ±æœƒå¸¶ä½ é€²å…¥ EC2 å»ºç«‹ç•«é¢ã€‚</li>
<li>é»æ“Šã€Œé–‹å§‹æ´»å‹•ã€ï¼Œå³å¯é–‹å§‹è¨­å®šç¬¬ä¸€å°ä¸»æ©Ÿã€‚<br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day23-AWS-EC2/1-start-event.png?raw=true"></li>
</ul>
<hr>
<h3 id="Step-2ï¼šå¡«å¯«åŸ·è¡Œå€‹é«”åç¨±èˆ‡é¸æ“‡-AMIï¼ˆä½œæ¥­ç³»çµ±ï¼‰"><a href="#Step-2ï¼šå¡«å¯«åŸ·è¡Œå€‹é«”åç¨±èˆ‡é¸æ“‡-AMIï¼ˆä½œæ¥­ç³»çµ±ï¼‰" class="headerlink" title="Step 2ï¼šå¡«å¯«åŸ·è¡Œå€‹é«”åç¨±èˆ‡é¸æ“‡ AMIï¼ˆä½œæ¥­ç³»çµ±ï¼‰"></a>Step 2ï¼šå¡«å¯«åŸ·è¡Œå€‹é«”åç¨±èˆ‡é¸æ“‡ AMIï¼ˆä½œæ¥­ç³»çµ±ï¼‰</h3><ul>
<li>é¦–å…ˆå¡«å¯«åŸ·è¡Œå€‹é«”åç¨±</li>
<li>ç„¶å¾Œåœ¨é é¢ä¸­å¯çœ‹åˆ°å„ç¨®ä½œæ¥­ç³»çµ±é¸æ“‡ï¼š<ul>
<li>Amazon Linux 2023 âœ…</li>
<li>Ubuntu</li>
<li>Windows Server</li>
</ul>
</li>
<li>æœ¬ç¯‡é¸æ“‡ <strong>Amazon Linux 2023ï¼ˆé è¨­ï¼Œç¬¦åˆå…è²»æ–¹æ¡ˆï¼‰</strong>ã€‚</li>
<li>å®ƒæ˜¯ AWS å®˜æ–¹æä¾›çš„ Linux ç™¼è¡Œç‰ˆï¼Œå®‰å…¨ä¸”è¼•é‡ã€‚<br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day23-AWS-EC2/2-instance-ami.png?raw=true"></li>
</ul>
<hr>
<h3 id="Step-3ï¼šé¸æ“‡åŸ·è¡Œå€‹é«”é¡å‹"><a href="#Step-3ï¼šé¸æ“‡åŸ·è¡Œå€‹é«”é¡å‹" class="headerlink" title="Step 3ï¼šé¸æ“‡åŸ·è¡Œå€‹é«”é¡å‹"></a>Step 3ï¼šé¸æ“‡åŸ·è¡Œå€‹é«”é¡å‹</h3><ul>
<li>é¸æ“‡ï¼š<code>t3.micro</code>ï¼ˆ2 vCPU &#x2F; 1GB RAMï¼‰</li>
<li>âœ… ç¬¦åˆå…è²»é¡åº¦</li>
<li>é©åˆç·´ç¿’èˆ‡ç°¡å–®æ¸¬è©¦<br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day23-AWS-EC2/3-instance-type.png?raw=true"></li>
</ul>
<hr>
<h3 id="Step-4ï¼šå»ºç«‹é‡‘é‘°å°ï¼ˆKey-Pairï¼‰"><a href="#Step-4ï¼šå»ºç«‹é‡‘é‘°å°ï¼ˆKey-Pairï¼‰" class="headerlink" title="Step 4ï¼šå»ºç«‹é‡‘é‘°å°ï¼ˆKey Pairï¼‰"></a>Step 4ï¼šå»ºç«‹é‡‘é‘°å°ï¼ˆKey Pairï¼‰</h3><ul>
<li>é‡‘é‘°å°æ˜¯ç™»å…¥ EC2 çš„æ†‘è­‰ã€‚(ç­‰ç­‰ SSH é€£ç·šæœƒç”¨åˆ°)</li>
<li>é»ã€Œå»ºç«‹æ–°çš„é‡‘é‘°å°ã€â†’ é¸æ“‡ RSA â†’ ä¸‹è¼‰ <code>.pem</code> æª”ã€‚</li>
<li>âš ï¸ <strong>è«‹å¦¥å–„ä¿å­˜ï¼Œéºå¤±å¾Œç„¡æ³•å†ç™»å…¥ï¼</strong><br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day23-AWS-EC2/4-key-pair.png?raw=true"><br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day23-AWS-EC2/5-create-key.png?raw=true"></li>
</ul>
<hr>
<h3 id="Step-5ï¼šè¨­å®šç¶²è·¯èˆ‡å®‰å…¨ç¾¤çµ„"><a href="#Step-5ï¼šè¨­å®šç¶²è·¯èˆ‡å®‰å…¨ç¾¤çµ„" class="headerlink" title="Step 5ï¼šè¨­å®šç¶²è·¯èˆ‡å®‰å…¨ç¾¤çµ„"></a>Step 5ï¼šè¨­å®šç¶²è·¯èˆ‡å®‰å…¨ç¾¤çµ„</h3><ul>
<li>å»ºç«‹æ–°å®‰å…¨ç¾¤çµ„ï¼ˆ<code>launch-wizard-2</code>ï¼‰</li>
<li>é–‹å•Ÿä»¥ä¸‹é€šè¨ŠåŸ ï¼š<ul>
<li>**22 (SSH)**ï¼šé ç«¯ç™»å…¥ç”¨</li>
<li>**80 (HTTP)**ï¼šè®“ç¶²é å¯ä»¥è¢«ç€è¦½å™¨å­˜å–</li>
</ul>
</li>
<li>CIDR è¨­å®šç‚º <code>0.0.0.0/0</code>ï¼ˆå…¨é–‹æ”¾ï¼Œä½†åƒ…é™ç·´ç¿’ä½¿ç”¨ï¼‰<br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day23-AWS-EC2/6-network.png?raw=true"></li>
</ul>
<hr>
<h3 id="Step-6ï¼šå•Ÿå‹•åŸ·è¡Œå€‹é«”"><a href="#Step-6ï¼šå•Ÿå‹•åŸ·è¡Œå€‹é«”" class="headerlink" title="Step 6ï¼šå•Ÿå‹•åŸ·è¡Œå€‹é«”"></a>Step 6ï¼šå•Ÿå‹•åŸ·è¡Œå€‹é«”</h3><ul>
<li>å…¶ä»–è¨­å®šä¿æŒé è¨­å³å¯</li>
<li>ç„¶å¾Œé»æ“Šã€Œå•Ÿå‹•åŸ·è¡Œå€‹é«”ã€å¾Œï¼ŒAWS æœƒå»ºç«‹ä¼ºæœå™¨ã€‚<br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day23-AWS-EC2/7-run-instance.png?raw=true"></li>
<li>å¹¾åç§’å¾Œå³å¯åœ¨ EC2 ä¸»æ§å°çœ‹åˆ°ã€ŒRunningã€ç‹€æ…‹ã€‚</li>
<li>é»é€²å»å³å¯çœ‹åˆ°ï¼š<ul>
<li>Public IPv4 address</li>
<li>Instance ID</li>
<li>Security group ç­‰è³‡è¨Š<br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day23-AWS-EC2/8-ec2-dashboard.png?raw=true"></li>
</ul>
</li>
</ul>
<hr>
<h2 id="SSH-é€£ç·šè‡³-EC2"><a href="#SSH-é€£ç·šè‡³-EC2" class="headerlink" title="SSH é€£ç·šè‡³ EC2"></a>SSH é€£ç·šè‡³ EC2</h2><p>é»æ“Š EC2 ä¸»æ§å°å³ä¸Šè§’é€£ç·šæŒ‰éˆ• â†’ é¸æ“‡ SSH ç”¨æˆ¶ç«¯</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day23-AWS-EC2/9-ssh-conn.png?raw=true"></p>
<p>SSH é€£ç·šæ­¥é©Ÿå¦‚ä¸‹ï¼š</p>
<p>é–‹å•Ÿçµ‚ç«¯æ©Ÿ â†’ å°‹æ‰¾ aws-key.pem çš„å­˜æ”¾ä½å€ â†’ ä¿®æ”¹æª”æ¡ˆæ¬Šé™ â†’ åˆ©ç”¨ AWS æ‰€æä¾›çš„æŒ‡ä»¤é€£ç·šï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 400 <span class="string">&quot;my-ec2-001-key.pem&quot;</span></span><br><span class="line">ssh -i <span class="string">&quot;my-ec2-001-key.pem&quot;</span> ec2-user@ec2-54-199-211-42.ap-northeast-1.compute.amazonaws.com</span><br></pre></td></tr></table></figure>

<p>æˆåŠŸç™»å…¥å¾Œæœƒçœ‹åˆ°çš„çµ‚ç«¯ç•«é¢å¦‚ä¸‹ï¼š</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day23-AWS-EC2/10-ssh-success.png?raw=true"></p>
<p>ğŸ‰ ä½ å·²æˆåŠŸé€²å…¥é›²ç«¯ä¸»æ©Ÿï¼(ä¹Ÿå¯ä»¥å˜—è©¦ä¸€äº›åŸºæœ¬ Linux æŒ‡ä»¤)</p>
<hr>
<h2 id="å°æé†’èˆ‡æ”¶å°¾"><a href="#å°æé†’èˆ‡æ”¶å°¾" class="headerlink" title="å°æé†’èˆ‡æ”¶å°¾"></a>å°æé†’èˆ‡æ”¶å°¾</h2><ul>
<li>ç·´ç¿’çµæŸå¾Œå‹™å¿…ï¼š<ol>
<li>åœ¨ EC2 æ§åˆ¶å° â†’ åœæ­¢æˆ–çµ‚æ­¢åŸ·è¡Œå€‹é«”</li>
<li>é¿å…æŒçºŒè¨ˆè²»</li>
</ol>
</li>
<li>å¦‚æœè¦ä¸‹æ¬¡å†ä½¿ç”¨ï¼Œå¯é‡æ–°å•Ÿå‹•ï¼ŒAWS æœƒä¿ç•™è¨­å®šã€‚</li>
</ul>
<hr>
<h2 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h2><p>åˆ°é€™è£¡ï¼Œæˆ‘å€‘å·²ç¶“æˆåŠŸå®Œæˆäº†ã€ŒAWS EC2 å…¥é–€ã€çš„ç¬¬ä¸€æ­¥ ğŸ¯<br>å¾å»ºç«‹åŸ·è¡Œå€‹é«”ã€è¨­å®šå®‰å…¨ç¾¤çµ„ï¼Œåˆ°ç”¨ SSH ç™»å…¥ä¸»æ©Ÿï¼Œ<br>é«”é©—äº†é›²ç«¯ä¸–ç•Œçš„åŸºæœ¬æµç¨‹ã€‚</p>
<p>é€™å°±åƒæ‰“é–‹äº†ä¸€å°é›²ç«¯é›»è…¦çš„é›»æºé–‹é—œ â€”â€”<br>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘å°±èƒ½åœ¨é›²ç«¯ä¸–ç•Œè‡ªç”±ç™¼æ®ï¼Œ<br>éƒ¨ç½² Node.jsã€é€£æ¥è³‡æ–™åº«ï¼Œç”šè‡³æ¶èµ·è‡ªå·±çš„å¾Œç«¯æœå‹™ã€‚</p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>AWS</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 24 - å¾æœ¬åœ°åˆ°é›²ç«¯ï¼šæŠŠä½ çš„ Node.js å°ˆæ¡ˆéƒ¨ç½²ä¸Š AWS EC2ï¼</title>
    <url>/2025/10/08/Day24%20-%20AWS-Node-EC2/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ˜¨å¤©æˆ‘å€‘å·²ç¶“æˆåŠŸé–‹å•Ÿç¬¬ä¸€å° AWS EC2 ä¸»æ©Ÿï¼Œé«”é©—äº†é›²ç«¯ä¸»æ©Ÿã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å€‘è¦æ›´é€²ä¸€æ­¥ â€”â€” <strong>æŠŠ Node.js å°ˆæ¡ˆå¯¦éš›éƒ¨ç½²åˆ°é›²ç«¯ä¸»æ©Ÿä¸Šï¼</strong></p>
<p>é€™ç¯‡æ–‡ç« å°‡å¸¶ä½ å®Œæˆå¾ 0 åˆ°ä¸Šç·šçš„æ‰€æœ‰æµç¨‹ï¼š</p>
<ol>
<li>å»ºç«‹ Ubuntu EC2 å¯¦ä¾‹</li>
<li>SSH é€£ç·š</li>
<li>å®‰è£ Node.js &#x2F; npm &#x2F; Git</li>
<li>éƒ¨ç½²ä¸¦åŸ·è¡Œå°ˆæ¡ˆ</li>
<li>ä½¿ç”¨ PM2 å¸¸é§æ‡‰ç”¨ç¨‹å¼</li>
</ol>
<span id="more"></span>

<hr>
<h2 id="AWS-EC2-éƒ¨ç½²å®Œæ•´æ­¥é©Ÿ"><a href="#AWS-EC2-éƒ¨ç½²å®Œæ•´æ­¥é©Ÿ" class="headerlink" title="AWS EC2 éƒ¨ç½²å®Œæ•´æ­¥é©Ÿ"></a>AWS EC2 éƒ¨ç½²å®Œæ•´æ­¥é©Ÿ</h2><h3 id="æ­¥é©Ÿ-1ï¼šåœ¨-AWS-EC2-å•Ÿå‹•-Ubuntu-å¯¦ä¾‹"><a href="#æ­¥é©Ÿ-1ï¼šåœ¨-AWS-EC2-å•Ÿå‹•-Ubuntu-å¯¦ä¾‹" class="headerlink" title="æ­¥é©Ÿ 1ï¼šåœ¨ AWS EC2 å•Ÿå‹• Ubuntu å¯¦ä¾‹"></a><strong>æ­¥é©Ÿ 1ï¼šåœ¨ AWS EC2 å•Ÿå‹• Ubuntu å¯¦ä¾‹</strong></h3><ol>
<li><p><strong>åç¨±</strong> : <code>ithome2025-ec2</code></p>
</li>
<li><p><strong>é¸æ“‡ AMI</strong>ï¼šé¸æ“‡ Ubuntuï¼ˆé€™é‚Šä½¿ç”¨ç­†è€…è¼ƒç†Ÿæ‚‰çš„ Ubuntu 22.04 LTSï¼‰</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day24-EC2-NodeJS/1-name-os.png?raw=true"></p>
</li>
<li><p><strong>é¸æ“‡å¯¦ä¾‹é¡å‹</strong>ï¼š<code>t3.micro</code></p>
</li>
<li><p><strong>é‡‘é‘°å°ï¼ˆé‡è¦ï¼‰</strong>ï¼š</p>
<ul>
<li>å»ºç«‹æ–°çš„é‡‘é‘°å°æˆ–é¸æ“‡ç¾æœ‰çš„</li>
<li>ä¸‹è¼‰ <code>.pem</code> æª”æ¡ˆä¸¦å¦¥å–„ä¿å­˜ï¼ˆä¾‹å¦‚ï¼š<code>my-key.pem</code>ï¼‰</li>
</ul>
</li>
<li><p><strong>ç¶²è·¯è¨­å®š</strong>ï¼š</p>
<ul>
<li>âœ… å…è¨± SSH æµé‡ï¼ˆä¾†è‡ª 0.0.0.0&#x2F;0 æˆ–æ‚¨çš„ IPï¼‰</li>
<li>âœ… å…è¨± HTTP æµé‡ï¼ˆport 80ï¼‰</li>
<li>âœ… å…è¨±ä¾†è‡ªç¶²éš›ç¶²è·¯çš„ HTTPS æµé‡ï¼ˆå¯é¸ï¼‰</li>
<li>ğŸ”§ <strong>é¡å¤–æ–°å¢è‡ªè¨‚ TCP è¦å‰‡</strong>ï¼šport 3000ï¼ˆNode.js æ‡‰ç”¨é è¨­åŸ ï¼‰<br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day24-EC2-NodeJS/2-tcp-3000.png?raw=true"></li>
</ul>
</li>
<li><p><strong>å„²å­˜ç©ºé–“</strong>ï¼šé è¨­ 8GB è¶³å¤ </p>
</li>
</ol>
<p>é»æ“Šã€Œå•Ÿå‹•å¯¦ä¾‹ã€</p>
<hr>
<h3 id="æ­¥é©Ÿ-2ï¼šSSH-é€£æ¥åˆ°æ‚¨çš„-EC2-å¯¦ä¾‹-è©³ç´°å¯åƒè€ƒä¸Šä¸€ç¯‡æ–‡ç« "><a href="#æ­¥é©Ÿ-2ï¼šSSH-é€£æ¥åˆ°æ‚¨çš„-EC2-å¯¦ä¾‹-è©³ç´°å¯åƒè€ƒä¸Šä¸€ç¯‡æ–‡ç« " class="headerlink" title="æ­¥é©Ÿ 2ï¼šSSH é€£æ¥åˆ°æ‚¨çš„ EC2 å¯¦ä¾‹ (è©³ç´°å¯åƒè€ƒä¸Šä¸€ç¯‡æ–‡ç« )"></a><strong>æ­¥é©Ÿ 2ï¼šSSH é€£æ¥åˆ°æ‚¨çš„ EC2 å¯¦ä¾‹ (è©³ç´°å¯åƒè€ƒä¸Šä¸€ç¯‡æ–‡ç« )</strong></h3><p>ç­‰å¾…åŸ·è¡Œå€‹é«”ç‹€æ…‹è®Šç‚º â€œåŸ·è¡Œä¸­â€ å¾Œï¼š</p>
<ol>
<li>é»æ“Š EC2 ä¸»æ§å°å³ä¸Šè§’é€£ç·šæŒ‰éˆ• â†’ é¸æ“‡ SSH ç”¨æˆ¶ç«¯</li>
<li>é–‹å•Ÿçµ‚ç«¯æ©Ÿ â†’ å°‹æ‰¾ aws-key.pem çš„å­˜æ”¾ä½å€ â†’ ä¿®æ”¹æª”æ¡ˆæ¬Šé™ â†’ åˆ©ç”¨ AWS æ‰€æä¾›çš„æŒ‡ä»¤é€£ç·š</li>
</ol>
<p>æˆåŠŸé€£æ¥å¾Œæœƒçœ‹åˆ° Ubuntu çš„æ­¡è¿è¨Šæ¯ã€‚</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day24-EC2-NodeJS/3-welcome-ubuntu.png?raw=true"></p>
<hr>
<h3 id="æ­¥é©Ÿ-3ï¼šåœ¨-EC2-ä¸Šå®‰è£-Node-js-å’Œ-npm"><a href="#æ­¥é©Ÿ-3ï¼šåœ¨-EC2-ä¸Šå®‰è£-Node-js-å’Œ-npm" class="headerlink" title="æ­¥é©Ÿ 3ï¼šåœ¨ EC2 ä¸Šå®‰è£ Node.js å’Œ npm"></a><strong>æ­¥é©Ÿ 3ï¼šåœ¨ EC2 ä¸Šå®‰è£ Node.js å’Œ npm</strong></h3><p>åœ¨ EC2 å¯¦ä¾‹ä¸­åŸ·è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°ç³»çµ±å¥—ä»¶</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£ Node.js 20.xï¼ˆLTS ç‰ˆæœ¬ï¼‰</span></span><br><span class="line">curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -</span><br><span class="line">sudo apt install -y nodejs</span><br><span class="line"></span><br><span class="line"><span class="comment"># é©—è­‰å®‰è£</span></span><br><span class="line">node --version  <span class="comment"># æ‡‰é¡¯ç¤º v20.x.x</span></span><br><span class="line">npm --version   <span class="comment"># æ‡‰é¡¯ç¤º 10.x.x</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£ Gitï¼ˆç”¨æ–¼è¤‡è£½å°ˆæ¡ˆï¼‰</span></span><br><span class="line">sudo apt install -y git</span><br></pre></td></tr></table></figure>

<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day24-EC2-NodeJS/4-node-ver.png?raw=true"></p>
<hr>
<h3 id="æ­¥é©Ÿ-4ï¼šå°‡å°ˆæ¡ˆéƒ¨ç½²åˆ°-EC2"><a href="#æ­¥é©Ÿ-4ï¼šå°‡å°ˆæ¡ˆéƒ¨ç½²åˆ°-EC2" class="headerlink" title="æ­¥é©Ÿ 4ï¼šå°‡å°ˆæ¡ˆéƒ¨ç½²åˆ° EC2"></a><strong>æ­¥é©Ÿ 4ï¼šå°‡å°ˆæ¡ˆéƒ¨ç½²åˆ° EC2</strong></h3><p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘è¦æŠŠå°ˆæ¡ˆå¯¦éš›éƒ¨ç½²åˆ° <strong>AWS EC2</strong> ä¸Šã€‚</p>
<p>ä¸éç›®å‰æˆ‘å€‘é‚„æ²’æœ‰å•Ÿç”¨ RDS æˆ–å…¶ä»–é›²ç«¯æœå‹™ï¼Œå› æ­¤é€™æ¬¡çš„éƒ¨ç½²ç›®æ¨™å¾ˆå–®ç´”ï¼š</p>
<blockquote>
<p>å…ˆè®“ Node.js + Express ä¼ºæœå™¨èƒ½åœ¨é›²ç«¯æˆåŠŸå•Ÿå‹•é‹ä½œï¼Œ</p>
<p>æš«æ™‚ä¸æ¶‰åŠè³‡æ–™åº«é€£ç·šè¨­å®šã€‚</p>
</blockquote>
<p>ç‚ºäº†ç¢ºä¿ç’°å¢ƒä¸€è‡´ï¼Œæˆ‘å€‘æœƒå›åˆ°å°ˆæ¡ˆä¸­å°šæœªæ•´åˆè³‡æ–™åº«çš„ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ä»¥ä¸‹é€™å€‹ commitï¼š</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day24-EC2-NodeJS/5-git-commit.png?raw=true"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¤‡è£½å°ˆæ¡ˆ</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/ArvinYang1925/iThome2025-node-ts.git</span><br><span class="line"><span class="built_in">cd</span> iThome2025-node-ts</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ›åˆ°ç‰¹å®š commit</span></span><br><span class="line">git checkout 342fd7f5ee9ece202ef2ec2a00c10b05d1c76a4a</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="æ­¥é©Ÿ-5ï¼šå®‰è£ä¾è³´ä¸¦ç·¨è­¯å°ˆæ¡ˆ"><a href="#æ­¥é©Ÿ-5ï¼šå®‰è£ä¾è³´ä¸¦ç·¨è­¯å°ˆæ¡ˆ" class="headerlink" title="æ­¥é©Ÿ 5ï¼šå®‰è£ä¾è³´ä¸¦ç·¨è­¯å°ˆæ¡ˆ"></a><strong>æ­¥é©Ÿ 5ï¼šå®‰è£ä¾è³´ä¸¦ç·¨è­¯å°ˆæ¡ˆ</strong></h3><p>åœ¨ EC2 å¯¦ä¾‹ä¸­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é€²å…¥å°ˆæ¡ˆç›®éŒ„</span></span><br><span class="line"><span class="built_in">cd</span> ~/iThome2025-node-ts</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£ä¾è³´</span></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç·¨è­¯ TypeScript åˆ° JavaScript</span></span><br><span class="line">npx tsc</span><br></pre></td></tr></table></figure>

<p>ç·¨è­¯å¾Œæœƒåœ¨ <code>dist/</code> ç›®éŒ„ç”¢ç”Ÿ JavaScript æª”æ¡ˆã€‚</p>
<hr>
<h3 id="æ­¥é©Ÿ-6ï¼šæ¸¬è©¦é‹è¡Œæ‡‰ç”¨"><a href="#æ­¥é©Ÿ-6ï¼šæ¸¬è©¦é‹è¡Œæ‡‰ç”¨" class="headerlink" title="æ­¥é©Ÿ 6ï¼šæ¸¬è©¦é‹è¡Œæ‡‰ç”¨"></a><strong>æ­¥é©Ÿ 6ï¼šæ¸¬è©¦é‹è¡Œæ‡‰ç”¨</strong></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç›´æ¥é‹è¡Œç·¨è­¯å¾Œçš„ JS</span></span><br><span class="line">node dist/app.js</span><br></pre></td></tr></table></figure>

<p>æ‚¨æ‡‰è©²æœƒçœ‹åˆ°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ğŸš€ Server running on http://localhost:3000</span><br></pre></td></tr></table></figure>

<p>æ¸¬è©¦æ–¹å¼ï¼š</p>
<ul>
<li>æˆ–åœ¨ç€è¦½å™¨è¨ªå• <code>http://æ‚¨çš„EC2å…¬æœ‰IP:3000</code><br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day24-EC2-NodeJS/6-hello-tihome.png?raw=true"></li>
</ul>
<p>å¦‚æœçœ‹åˆ° â€œHello, iThome2025 !â€ï¼Œæ­å–œæˆåŠŸï¼ğŸ‰</p>
<hr>
<h3 id="æ­¥é©Ÿ-7ï¼šä½¿ç”¨-PM2-è®“æ‡‰ç”¨ç¨‹å¼æŒçºŒé‹è¡Œ"><a href="#æ­¥é©Ÿ-7ï¼šä½¿ç”¨-PM2-è®“æ‡‰ç”¨ç¨‹å¼æŒçºŒé‹è¡Œ" class="headerlink" title="æ­¥é©Ÿ 7ï¼šä½¿ç”¨ PM2 è®“æ‡‰ç”¨ç¨‹å¼æŒçºŒé‹è¡Œ"></a><strong>æ­¥é©Ÿ 7ï¼šä½¿ç”¨ PM2 è®“æ‡‰ç”¨ç¨‹å¼æŒçºŒé‹è¡Œ</strong></h3><p>PM2 æ˜¯ Node.js çš„ç¨‹åºç®¡ç†å·¥å…·ï¼Œå¯ä»¥è®“æ‡‰ç”¨ç¨‹å¼åœ¨èƒŒæ™¯æŒçºŒé‹è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£ PM2</span></span><br><span class="line">sudo npm install -g pm2</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ PM2 å•Ÿå‹•æ‡‰ç”¨</span></span><br><span class="line">pm2 start dist/app.js --name <span class="string">&quot;ithome-app&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‡‰ç”¨ç‹€æ…‹</span></span><br><span class="line">pm2 status</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ—¥èªŒ</span></span><br><span class="line">pm2 logs</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¨­å®šé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•</span></span><br><span class="line">pm2 startup</span><br></pre></td></tr></table></figure>

<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day24-EC2-NodeJS/7-pm2.png?raw=true"></p>
<p>PM2 å¸¸ç”¨æŒ‡ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pm2 restart ithome-app  <span class="comment"># é‡å•Ÿ</span></span><br><span class="line">pm2 stop ithome-app     <span class="comment"># åœæ­¢</span></span><br><span class="line">pm2 delete ithome-app   <span class="comment"># åˆªé™¤</span></span><br><span class="line">pm2 logs ithome-app     <span class="comment"># æŸ¥çœ‹æ—¥èªŒ</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h2><p>è‡³æ­¤ï¼Œæˆ‘å€‘å·²ç¶“å®Œæˆäº†å¾æœ¬åœ°é–‹ç™¼ç’°å¢ƒåˆ° <strong>AWS</strong> <strong>é›²ç«¯éƒ¨ç½²çš„æµç¨‹</strong> ğŸ‰</p>
<p>é€™ä¸€æ­¥çš„æ„ç¾©ä¸åªæ˜¯è®“ç¶²ç«™èƒ½è¢«å…¨ä¸–ç•Œè¨ªå•ï¼Œæ›´ä»£è¡¨è‘—ä½ æŒæ¡äº†é–‹ç™¼è€…çš„ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<ul>
<li>é–‹ç™¼ï¼ˆNode.js + TypeScriptï¼‰</li>
<li>éƒ¨ç½²ï¼ˆAWS EC2ï¼‰</li>
<li>ç¶­é‹ï¼ˆPM2ï¼‰</li>
</ul>
<p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘æœƒé€æ­¥æ¢ç´¢ AWS RDS ç­‰é›²ç«¯æœå‹™</p>
<p>æ…¢æ…¢è®“é€™å€‹ Node.js å°ˆæ¡ˆæˆç‚ºä¸€å€‹å®Œæ•´çš„é›²ç«¯æ‡‰ç”¨ ğŸš€</p>
<hr>
<h2 id="è£œå……è³‡æº"><a href="#è£œå……è³‡æº" class="headerlink" title="è£œå……è³‡æº"></a>è£œå……è³‡æº</h2><p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/tree/feature/init-ts-express">Github ç¯„ä¾‹ç¨‹å¼ç¢¼</a></p>
<blockquote>
<p>commit message: Day 6 - set up Express + TS environment</p>
</blockquote>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>AWS</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 3 - TypeScript æ ¸å¿ƒèªæ³• (1)ï¼šå‹åˆ¥ç³»çµ±èˆ‡æ ¸å¿ƒ</title>
    <url>/2025/09/17/Day3%20-%20TypeScript%20%E6%A0%B8%E5%BF%83%E8%AA%9E%E6%B3%95%20(1)/</url>
    <content><![CDATA[<p>å‰å…©å¤©æˆ‘å€‘ä»‹ç´¹äº† TypeScript çš„èƒŒæ™¯èˆ‡åƒ¹å€¼ï¼Œä»Šå¤©è¦é–‹å§‹å‹•æ‰‹å¯«ç¨‹å¼ç¢¼ï¼Œå¾æœ€å¸¸è¦‹çš„ <strong>åŸºæœ¬å‹åˆ¥</strong> èˆ‡ <strong>å‹åˆ¥æ¨æ–· &#x2F; å‹åˆ¥è¨»è¨˜</strong> è¬›èµ·ã€‚</p>
<hr>
<h2 id="1-åŸºæœ¬å¸¸ç”¨å‹åˆ¥"><a href="#1-åŸºæœ¬å¸¸ç”¨å‹åˆ¥" class="headerlink" title="1. åŸºæœ¬å¸¸ç”¨å‹åˆ¥"></a>1. åŸºæœ¬å¸¸ç”¨å‹åˆ¥</h2><p>TypeScript åœ¨ JavaScript åŸºç¤ä¸Šï¼Œæä¾›äº†æ›´åš´è¬¹çš„å‹åˆ¥æª¢æŸ¥ã€‚ä»¥ä¸‹æ˜¯å¸¸è¦‹çš„åŸºæœ¬å‹åˆ¥ï¼š</p>
<ul>
<li><strong>string</strong>ï¼šå­—ä¸²</li>
<li><strong>number</strong>ï¼šæ•¸å­—ï¼ˆæ•´æ•¸ã€æµ®é»æ•¸éƒ½å±¬æ–¼ numberï¼‰</li>
<li><strong>boolean</strong>ï¼šå¸ƒæ—å€¼ï¼ˆtrue&#x2F;falseï¼‰</li>
<li><strong>array</strong>ï¼šé™£åˆ—</li>
<li><strong>object</strong>ï¼šç‰©ä»¶ï¼Œå¯æŒ‡å®š key èˆ‡ value çš„å‹åˆ¥</li>
<li><strong>null</strong> &#x2F; <strong>undefined</strong>ï¼šç©ºå€¼èˆ‡æœªå®šç¾©<span id="more"></span></li>
<li><strong>any</strong>ï¼šè·³éå‹åˆ¥æª¢æŸ¥ï¼Œä¸å»ºè­°å¸¸ç”¨</li>
<li><strong>unknown</strong>ï¼šå®‰å…¨ç‰ˆçš„ anyï¼Œéœ€è¦æª¢æŸ¥å¾Œæ‰èƒ½ä½¿ç”¨</li>
<li><strong>void</strong>ï¼šé€šå¸¸ç”¨åœ¨å‡½å¼æ²’æœ‰å›å‚³å€¼æ™‚</li>
</ul>
<p>æˆ‘å€‘ç”¨ã€Œæ­ç«è»Šã€é€™å€‹æƒ…å¢ƒï¼Œä¾†æŠŠ <strong>åŸºæœ¬å‹åˆ¥</strong> ä¸²åœ¨ä¸€èµ·ï¼Œé€™æ¨£å­¸èµ·ä¾†æ›´æœ‰ç•«é¢ã€‚ä»¥ä¸‹æ˜¯ç¯„ä¾‹ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ­ç«è»Šçš„æƒ…å¢ƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹˜å®¢åå­—ï¼ˆstringï¼‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">passengerName</span>: <span class="built_in">string</span> = <span class="string">&quot;Arvin&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¹´é½¡ï¼ˆnumberï¼‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">25</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¯å¦å·²ç¶“è²·ç¥¨ï¼ˆbooleanï¼‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">isBuyTicket</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¡Œæï¼ˆarrayï¼‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">packages</span>: <span class="built_in">string</span>[] = [<span class="string">&quot;èƒŒåŒ…&quot;</span>, <span class="string">&quot;è¡Œæç®±&quot;</span>, <span class="string">&quot;Mac&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è»Šç¥¨ï¼ˆobjectï¼‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">ticket</span>: &#123; <span class="attr">start</span>: <span class="built_in">string</span>; <span class="attr">destination</span>: <span class="built_in">string</span>; <span class="attr">price</span>: <span class="built_in">number</span> &#125; = &#123;</span><br><span class="line">  <span class="attr">start</span>: <span class="string">&quot;å°å—&quot;</span>,</span><br><span class="line">  <span class="attr">destination</span>: <span class="string">&quot;å°åŒ—&quot;</span>,</span><br><span class="line">  <span class="attr">price</span>: <span class="number">750</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ç¢ºå®šçš„å¤–éƒ¨è¼¸å…¥ï¼ˆunknownï¼‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">inputSeat</span>: <span class="built_in">unknown</span> = <span class="string">&quot;A12&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> inputSeat === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`åº§ä½è™Ÿç¢¼æ˜¯ <span class="subst">$&#123;inputSeat&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸å°å¿ƒéºå¤±ç¥¨åˆ¸ï¼ˆnull &amp; undefinedï¼‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">lostTicket</span>: <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">notAssignedSeat</span>: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// anyï¼ˆä¸å»ºè­°ï¼Œä½†æœ‰æ™‚å€™éœ€è¦å…ˆç”¨ï¼‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">randomInfo</span>: <span class="built_in">any</span> = <span class="string">&quot;éš¨ä¾¿çš„è³‡è¨Š&quot;</span>;</span><br><span class="line">randomInfo = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// voidï¼šæª¢æŸ¥æ˜¯å¦æœ‰è²·ç¥¨ï¼ˆæ²’æœ‰å›å‚³å€¼ï¼‰</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkTicket</span>(<span class="params">name: <span class="built_in">string</span>, hasTicket: <span class="built_in">boolean</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (hasTicket) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;name&#125;</span> å·²ç¶“è²·ç¥¨ï¼Œå¯ä»¥é€²ç«™ï¼`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;name&#125;</span> å°šæœªè³¼ç¥¨ï¼`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">checkTicket</span>(passengerName, isBuyTicket);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-å‹åˆ¥æ¨æ–·-vs-å‹åˆ¥è¨»è¨˜"><a href="#2-å‹åˆ¥æ¨æ–·-vs-å‹åˆ¥è¨»è¨˜" class="headerlink" title="2. å‹åˆ¥æ¨æ–· vs å‹åˆ¥è¨»è¨˜"></a>2. å‹åˆ¥æ¨æ–· vs å‹åˆ¥è¨»è¨˜</h2><p>TypeScript åœ¨å¾ˆå¤šæƒ…æ³ä¸‹æœƒè‡ªå‹•ã€Œæ¨æ–·å‹åˆ¥ã€ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> trainStation = <span class="string">&quot;å°åŒ—&quot;</span>; <span class="comment">// æ¨æ–·ç‚º string</span></span><br><span class="line"><span class="keyword">let</span> ticketPrice = <span class="number">500</span>; <span class="comment">// æ¨æ–·ç‚º number</span></span><br></pre></td></tr></table></figure>

<p>ä½†æœ‰æ™‚å€™æˆ‘å€‘éœ€è¦ <strong>æ‰‹å‹•è¨»è¨˜å‹åˆ¥</strong>ï¼Œè®“ç¨‹å¼ç¢¼æ›´æ¸…æ¥šï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">trainStation</span>: <span class="built_in">string</span> = <span class="string">&quot;å°åŒ—&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">ticketPrice</span>: <span class="built_in">number</span> = <span class="number">500</span>;</span><br></pre></td></tr></table></figure>

<h3 id="å·®ç•°æ¯”è¼ƒ"><a href="#å·®ç•°æ¯”è¼ƒ" class="headerlink" title="å·®ç•°æ¯”è¼ƒ"></a>å·®ç•°æ¯”è¼ƒ</h3><ul>
<li><strong>å‹åˆ¥æ¨æ–·</strong>ï¼šç¨‹å¼æ›´ç°¡æ½”ï¼Œè®“ TS è‡ªå‹•åˆ¤æ–·ã€‚</li>
<li><strong>å‹åˆ¥è¨»è¨˜</strong>ï¼šåœ¨éœ€è¦ <strong>å¯è®€æ€§</strong>ã€<strong>å¼·åˆ¶è¦ç¯„</strong>ã€æˆ– <strong>è¤‡é›œç‰©ä»¶</strong> æ™‚æ›´é©åˆã€‚</li>
</ul>
<hr>
<h2 id="3-ç°¡å–®ä½¿ç”¨å ´æ™¯"><a href="#3-ç°¡å–®ä½¿ç”¨å ´æ™¯" class="headerlink" title="3. ç°¡å–®ä½¿ç”¨å ´æ™¯"></a>3. ç°¡å–®ä½¿ç”¨å ´æ™¯</h2><h3 id="âœ…-é©åˆç”¨å‹åˆ¥æ¨æ–·"><a href="#âœ…-é©åˆç”¨å‹åˆ¥æ¨æ–·" class="headerlink" title="âœ… é©åˆç”¨å‹åˆ¥æ¨æ–·"></a>âœ… é©åˆç”¨å‹åˆ¥æ¨æ–·</h3><p>ç•¶å€¼ä¸€çœ‹å°±çŸ¥é“å‹åˆ¥ï¼ŒTS è‡ªå‹•åˆ¤æ–·å³å¯ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> trainName = <span class="string">&quot;è‡ªå¼·è™Ÿ&quot;</span>; <span class="comment">// string</span></span><br><span class="line"><span class="keyword">let</span> travelTime = <span class="number">120</span>; <span class="comment">// number</span></span><br></pre></td></tr></table></figure>

<h3 id="âœ…-é©åˆç”¨å‹åˆ¥è¨»è¨˜"><a href="#âœ…-é©åˆç”¨å‹åˆ¥è¨»è¨˜" class="headerlink" title="âœ… é©åˆç”¨å‹åˆ¥è¨»è¨˜"></a>âœ… é©åˆç”¨å‹åˆ¥è¨»è¨˜</h3><ol>
<li><strong>å‡½å¼åƒæ•¸èˆ‡å›å‚³å€¼</strong>ï¼ˆTS ç„¡æ³•å¾ç©ºåƒæ•¸è‡ªå‹•æ¨æ–·ï¼Œå¿…é ˆæ¨™è¨»ï¼‰</li>
</ol>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">buyTicket</span>(<span class="params">start: <span class="built_in">string</span>, destination: <span class="built_in">string</span>, price: <span class="built_in">number</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`å·²è³¼è²·å¾ <span class="subst">$&#123;start&#125;</span> åˆ° <span class="subst">$&#123;destination&#125;</span> çš„è»Šç¥¨ï¼Œç¥¨åƒ¹ <span class="subst">$&#123;price&#125;</span> å…ƒ`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>ç‰©ä»¶çµæ§‹æ¸…æ¥šè¡¨é”</strong></li>
</ol>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">passenger</span>: &#123; <span class="attr">id</span>: <span class="built_in">number</span>; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="attr">hasTicket</span>: <span class="built_in">boolean</span> &#125; = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Arvin&quot;</span>,</span><br><span class="line">  <span class="attr">hasTicket</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>èˆ‡ API æˆ–å¤–éƒ¨è³‡æ–™äº’å‹•</strong></li>
</ol>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">TrainApiResponse</span> = &#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">stations</span>: <span class="built_in">string</span>[];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">res</span>: <span class="title class_">TrainApiResponse</span> = &#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">  <span class="attr">stations</span>: [<span class="string">&quot;å°åŒ—&quot;</span>, <span class="string">&quot;æ–°ç«¹&quot;</span>, <span class="string">&quot;å°ä¸­&quot;</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><ul>
<li><strong>åŸºæœ¬å‹åˆ¥</strong>æ˜¯ TypeScript çš„åŸºç¤ï¼š<code>string</code>ã€<code>number</code>ã€<code>boolean</code>ã€<code>array</code>ã€<code>object</code>ã€<code>null</code>ã€<code>undefined</code>â€¦</li>
<li><strong>å‹åˆ¥æ¨æ–·</strong>ï¼šè®“ç¨‹å¼æ›´ç°¡æ½”ã€‚</li>
<li><strong>å‹åˆ¥è¨»è¨˜</strong>ï¼šåœ¨å‡½å¼ã€ç‰©ä»¶ã€API å›å‚³å€¼ç­‰æƒ…å¢ƒä¸­ç‰¹åˆ¥é‡è¦ã€‚</li>
</ul>
<p>ğŸ‘‰ æ˜å¤©ï¼ˆDay 4ï¼‰æˆ‘å€‘æœƒé€²ä¸€æ­¥ä»‹ç´¹ unionã€enumï¼Œè®“å‹åˆ¥ç³»çµ±æ›´éˆæ´»ï¼</p>
<hr>
]]></content>
      <tags>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 4 - TypeScript æ ¸å¿ƒèªæ³• (2)ï¼šunionã€enum</title>
    <url>/2025/09/18/Day4%20-%20TypeScript%20%E6%A0%B8%E5%BF%83%E8%AA%9E%E6%B3%95%20(2)/</url>
    <content><![CDATA[<p>æ˜¨å¤©æˆ‘å€‘ä»‹ç´¹äº†åŸºæœ¬å‹åˆ¥ï¼Œä»Šå¤©è¦é€²ä¸€æ­¥å­¸æœƒ <strong>Union Typeï¼ˆè¯åˆå‹åˆ¥ï¼‰</strong> å’Œ <strong>Enumï¼ˆåˆ—èˆ‰ï¼‰</strong>ã€‚</p>
<p>é€™æ¬¡ä¸€æ¨£ç”¨ã€Œæ­ç«è»Šã€çš„ä¾‹å­ ğŸš„ï¼Œè®“ç¨‹å¼ç¢¼æ›´è²¼è¿‘ç”Ÿæ´»ï¼</p>
<span id="more"></span>

<hr>
<h2 id="1-Union-Typeï¼ˆè¯åˆå‹åˆ¥ï¼‰"><a href="#1-Union-Typeï¼ˆè¯åˆå‹åˆ¥ï¼‰" class="headerlink" title="1. Union Typeï¼ˆè¯åˆå‹åˆ¥ï¼‰"></a>1. Union Typeï¼ˆè¯åˆå‹åˆ¥ï¼‰</h2><p>Union çš„ç‰¹è‰²æ˜¯ç”¨ <strong><code>|</code></strong> å°‡å¤šç¨®å¯èƒ½å‹åˆ¥å€åˆ†é–‹ä¾†ã€‚</p>
<p>ç•¶ä¸€å€‹å€¼å¯èƒ½æœ‰ã€Œå¤šç¨®å‹åˆ¥ã€æ™‚ï¼ŒUnion éå¸¸å¥½ç”¨ã€‚</p>
<h3 id="æ­ç«è»Šç¯„ä¾‹ï¼šä¹˜å®¢çš„ç¥¨è™Ÿ"><a href="#æ­ç«è»Šç¯„ä¾‹ï¼šä¹˜å®¢çš„ç¥¨è™Ÿ" class="headerlink" title="æ­ç«è»Šç¯„ä¾‹ï¼šä¹˜å®¢çš„ç¥¨è™Ÿ"></a>æ­ç«è»Šç¯„ä¾‹ï¼šä¹˜å®¢çš„ç¥¨è™Ÿ</h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">ticketId</span>: <span class="built_in">number</span> | <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">ticketId = <span class="number">12345</span>; <span class="comment">// æ•¸å­—å‹ç¥¨è™Ÿ</span></span><br><span class="line">ticketId = <span class="string">&quot;A12&quot;</span>; <span class="comment">// å­—ä¸²å‹ç¥¨è™Ÿ</span></span><br><span class="line"><span class="comment">// ticketId = true; // âŒ ç·¨è­¯éŒ¯èª¤</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="å¸¸è¦‹æ­é…ï¼šå‹åˆ¥å®ˆè¡›-Type-Guards"><a href="#å¸¸è¦‹æ­é…ï¼šå‹åˆ¥å®ˆè¡›-Type-Guards" class="headerlink" title="å¸¸è¦‹æ­é…ï¼šå‹åˆ¥å®ˆè¡› (Type Guards)"></a>å¸¸è¦‹æ­é…ï¼šå‹åˆ¥å®ˆè¡› (Type Guards)</h3><p>åœ¨ä½¿ç”¨ Union æ™‚ï¼Œæˆ‘å€‘é€šå¸¸éœ€è¦ç”¨ <strong><code>typeof</code></strong> ä¾†åˆ¤æ–·å‹åˆ¥å¾Œå†æ“ä½œï¼Œé¿å…å‡ºéŒ¯ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printTicketId</span>(<span class="params">id: <span class="built_in">number</span> | <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> id === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¥¨è™Ÿï¼ˆå­—ä¸²ï¼‰ï¼š&quot;</span> + id.<span class="title function_">toUpperCase</span>());</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¥¨è™Ÿï¼ˆæ•¸å­—ï¼‰ï¼š&quot;</span> + id);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">printTicketId</span>(<span class="number">12345</span>);</span><br><span class="line"><span class="title function_">printTicketId</span>(<span class="string">&quot;b23&quot;</span>);</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Union-Type-è£œå……èªªæ˜-ğŸš‰"><a href="#Union-Type-è£œå……èªªæ˜-ğŸš‰" class="headerlink" title="Union Type è£œå……èªªæ˜ ğŸš‰"></a>Union Type è£œå……èªªæ˜ ğŸš‰</h3><ul>
<li><strong>å„ªé»</strong>ï¼š<ol>
<li>é©åˆè™•ç†ã€Œå¤šç¨®å¯èƒ½å‹åˆ¥ã€çš„æƒ…å¢ƒï¼Œä¾‹å¦‚ <strong>API å›å‚³å€¼</strong> æˆ– <strong>ä½¿ç”¨è€…è¼¸å…¥</strong>ã€‚</li>
<li>å¯ä»¥æ­é… <strong>Type Guards</strong> æé«˜å®‰å…¨æ€§ã€‚</li>
</ol>
</li>
<li><strong>å¸¸è¦‹ä½¿ç”¨å ´æ™¯</strong>ï¼š<ul>
<li>è»Šç¥¨ IDï¼ˆå¯èƒ½æ˜¯æ•¸å­— &#x2F; å­—ä¸²ï¼‰</li>
<li>è»Šå»‚åº§ä½ï¼ˆå¯èƒ½æ˜¯ â€œA12â€ ä¹Ÿå¯èƒ½æ˜¯ 12ï¼‰</li>
<li>ä»˜æ¬¾æ–¹å¼ï¼ˆå¯èƒ½æ˜¯ â€œç¾é‡‘â€ | â€œä¿¡ç”¨å¡â€ | â€œè¡Œå‹•æ”¯ä»˜â€ï¼‰</li>
</ul>
</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PaymentMethod</span> = <span class="string">&quot;Cash&quot;</span> | <span class="string">&quot;CreditCard&quot;</span> | <span class="string">&quot;MobilePay&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">payment</span>: <span class="title class_">PaymentMethod</span>;</span><br><span class="line"></span><br><span class="line">payment = <span class="string">&quot;Cash&quot;</span>; <span class="comment">// âœ…</span></span><br><span class="line">payment = <span class="string">&quot;MobilePay&quot;</span>; <span class="comment">// âœ…</span></span><br><span class="line"><span class="comment">// payment = &quot;Coupon&quot;;  // âŒ ä¸åœ¨å®šç¾©ç¯„åœ</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-Enumï¼ˆåˆ—èˆ‰ï¼‰"><a href="#2-Enumï¼ˆåˆ—èˆ‰ï¼‰" class="headerlink" title="2. Enumï¼ˆåˆ—èˆ‰ï¼‰"></a>2. Enumï¼ˆåˆ—èˆ‰ï¼‰</h2><p>Enum é©åˆå®šç¾©ã€Œå›ºå®šç¯„åœå…§çš„å€¼ã€ï¼Œæ¯” Union æ›´æœ‰ã€Œåç¨± â†’ å€¼ã€çš„å°æ‡‰é—œä¿‚ã€‚</p>
<h3 id="æ­ç«è»Šç¯„ä¾‹ï¼šè»Šç¥¨ç‹€æ…‹"><a href="#æ­ç«è»Šç¯„ä¾‹ï¼šè»Šç¥¨ç‹€æ…‹" class="headerlink" title="æ­ç«è»Šç¯„ä¾‹ï¼šè»Šç¥¨ç‹€æ…‹"></a>æ­ç«è»Šç¯„ä¾‹ï¼šè»Šç¥¨ç‹€æ…‹</h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">TicketStatus</span> &#123;</span><br><span class="line">  <span class="title class_">NotBought</span>, <span class="comment">// å°šæœªè³¼è²·</span></span><br><span class="line">  <span class="title class_">Bought</span>, <span class="comment">// å·²è³¼ç¥¨</span></span><br><span class="line">  <span class="title class_">Used</span>, <span class="comment">// å·²ä½¿ç”¨</span></span><br><span class="line">  <span class="title class_">Expired</span>, <span class="comment">// å·²éæœŸ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">myTicket</span>: &#123; <span class="attr">passenger</span>: <span class="built_in">string</span>; <span class="attr">status</span>: <span class="title class_">TicketStatus</span> &#125; = &#123;</span><br><span class="line">  <span class="attr">passenger</span>: <span class="string">&quot;Arvin&quot;</span>,</span><br><span class="line">  <span class="attr">status</span>: <span class="title class_">TicketStatus</span>.<span class="property">Bought</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myTicket);</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Enum-é™£åˆ—æ‡‰ç”¨ï¼šä¹˜å®¢æ¸…å–®"><a href="#Enum-é™£åˆ—æ‡‰ç”¨ï¼šä¹˜å®¢æ¸…å–®" class="headerlink" title="Enum + é™£åˆ—æ‡‰ç”¨ï¼šä¹˜å®¢æ¸…å–®"></a>Enum + é™£åˆ—æ‡‰ç”¨ï¼šä¹˜å®¢æ¸…å–®</h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">passengers</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="attr">status</span>: <span class="title class_">TicketStatus</span> &#125;[] = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addPassenger</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  passengers.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: name,</span><br><span class="line">    <span class="attr">status</span>: <span class="title class_">TicketStatus</span>.<span class="property">NotBought</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">addPassenger</span>(<span class="string">&quot;Alice&quot;</span>);</span><br><span class="line"><span class="title function_">addPassenger</span>(<span class="string">&quot;Bob&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(passengers);</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Enum-è¨­å®šå­—ä¸²å€¼ï¼ˆæ›´ç›´è§€ï¼‰"><a href="#Enum-è¨­å®šå­—ä¸²å€¼ï¼ˆæ›´ç›´è§€ï¼‰" class="headerlink" title="Enum è¨­å®šå­—ä¸²å€¼ï¼ˆæ›´ç›´è§€ï¼‰"></a>Enum è¨­å®šå­—ä¸²å€¼ï¼ˆæ›´ç›´è§€ï¼‰</h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">TrainClass</span> &#123;</span><br><span class="line">  <span class="title class_">Express</span> = <span class="string">&quot;è‡ªå¼·è™Ÿ&quot;</span>,</span><br><span class="line">  <span class="title class_">Local</span> = <span class="string">&quot;å€é–“è»Š&quot;</span>,</span><br><span class="line">  <span class="title class_">HighSpeed</span> = <span class="string">&quot;é«˜éµ&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printTrainClass</span>(<span class="params">c: TrainClass</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ—è»Šç¨®é¡ï¼š&quot;</span> + c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">printTrainClass</span>(<span class="title class_">TrainClass</span>.<span class="property">Express</span>);</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Enum-è£œå……èªªæ˜-ğŸš†"><a href="#Enum-è£œå……èªªæ˜-ğŸš†" class="headerlink" title="Enum è£œå……èªªæ˜ ğŸš†"></a>Enum è£œå……èªªæ˜ ğŸš†</h3><ul>
<li><strong>å„ªé»</strong>ï¼š<ol>
<li>è®“ã€Œå›ºå®šé¸é …ã€æ›´æ¸…æ¥šï¼ˆæ¯”å­—ä¸²å¸¸æ•¸æ›´æœ‰èªæ„ï¼‰ã€‚</li>
<li>é¿å…æ‹¼éŒ¯å­—ä¸²ï¼ˆTS ç·¨è­¯æ™‚å°±æœƒæª¢æŸ¥éŒ¯èª¤ï¼‰ã€‚</li>
<li>å¯è®€æ€§é«˜ï¼Œé©åˆå¤§å‹å°ˆæ¡ˆã€‚</li>
</ol>
</li>
<li><strong>å¸¸è¦‹ä½¿ç”¨å ´æ™¯</strong>ï¼š<ul>
<li>ç¥¨åˆ¸ç‹€æ…‹ï¼ˆå·²è³¼è²· &#x2F; æœªè³¼è²· &#x2F; å·²ä½¿ç”¨ &#x2F; éæœŸï¼‰</li>
<li>åˆ—è»Šç¨®é¡ï¼ˆè‡ªå¼·è™Ÿ &#x2F; å€é–“è»Š &#x2F; é«˜éµï¼‰</li>
<li>åº§ä½ç­‰ç´šï¼ˆæ™®é€š &#x2F; å•†å‹™ &#x2F; é ­ç­‰ï¼‰</li>
</ul>
</li>
</ul>
<hr>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><ul>
<li><strong>Union Type</strong>ï¼šè®“ä¸€å€‹è®Šæ•¸å¯ä»¥æœ‰å¤šç¨®å‹åˆ¥ï¼Œå¸¸ç”¨æ–¼ã€Œç¥¨è™Ÿã€ä»˜æ¬¾æ–¹å¼ã€é€™é¡ä¸ç¢ºå®šå‹åˆ¥çš„å ´æ™¯ã€‚</li>
<li><strong>Enum</strong>ï¼šè®“ã€Œå›ºå®šç¯„åœçš„å€¼ã€æ›´æœ‰èªæ„ï¼Œå¸¸ç”¨æ–¼ã€Œç¥¨åˆ¸ç‹€æ…‹ã€åˆ—è»Šç¨®é¡ã€åº§ä½ç­‰ç´šã€ã€‚</li>
<li>Union éˆæ´»ï¼ŒEnum åš´è¬¹ â€”â€” æ­é…ä½¿ç”¨å¯ä»¥è®“ç¨‹å¼ç¢¼æ›´ä¹¾æ·¨åˆå®‰å…¨ã€‚</li>
</ul>
<p>ğŸ‘‰ æ˜å¤©ï¼ˆDay 5ï¼‰æˆ‘å€‘æœƒä»‹ç´¹ <strong>interface</strong> å’Œ <strong>type</strong>ï¼Œè®“æˆ‘å€‘çš„ç«è»Šæ—…ç¨‹æ›´çµæ§‹åŒ–ï¼ ğŸš‰</p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 5 - TypeScript æ ¸å¿ƒèªæ³• (3)ï¼šinterfaceã€typeã€generics</title>
    <url>/2025/09/19/Day5%20-%20TypeScript%20-%20interface%E3%80%81type%E3%80%81generics/</url>
    <content><![CDATA[<p>æ˜¨å¤©æˆ‘å€‘ä»‹ç´¹äº† <strong>Union</strong> å’Œ <strong>Enum</strong>ï¼Œä»Šå¤©è¦é€²ä¸€æ­¥å­¸ç¿’å¦‚ä½•ç”¨ <strong>Interfaceã€Typeã€Generics</strong> ä¾†è®“ç¨‹å¼æ›´æœ‰çµæ§‹ã€æ›´å¯é‡ç”¨ã€‚</p>
<p>é€™æ¬¡ä¸€æ¨£ç”¨ã€Œæ­ç«è»Šã€çš„ä¾‹å­ ğŸš„ï¼Œå¹«åŠ©ä½ å¿«é€Ÿç†è§£ï¼</p>
<span id="more"></span>

<hr>
<h2 id="1-Interfaceï¼ˆä»‹é¢ï¼‰"><a href="#1-Interfaceï¼ˆä»‹é¢ï¼‰" class="headerlink" title="1. Interfaceï¼ˆä»‹é¢ï¼‰"></a>1. Interfaceï¼ˆä»‹é¢ï¼‰</h2><p>ä»‹é¢ç”¨ä¾†å®šç¾©ã€Œç‰©ä»¶çš„å½¢ç‹€ã€ï¼Œå°±åƒè¦åŠƒã€Œç«è»Šä¹˜å®¢ã€éœ€è¦æœ‰ä»€éº¼è³‡æ–™ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Passenger</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  seat?: <span class="built_in">string</span>; <span class="comment">// å¯é¸å±¬æ€§ï¼ˆå¯èƒ½æ²’åŠƒä½ï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">passengerA</span>: <span class="title class_">Passenger</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Arvin&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">passengerB</span>: <span class="title class_">Passenger</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">  <span class="attr">seat</span>: <span class="string">&quot;A12&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‰ ç‰¹é»ï¼š</p>
<ul>
<li>é©åˆç”¨ä¾†æè¿°ã€Œç‰©ä»¶çµæ§‹ã€ã€‚</li>
<li>æ”¯æ´ <strong>extends</strong>ï¼ˆç¹¼æ‰¿ï¼‰ï¼Œæ–¹ä¾¿æ“´å……ã€‚</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">VipPassenger</span> <span class="keyword">extends</span> <span class="title class_">Passenger</span> &#123;</span><br><span class="line">  <span class="attr">loungeAccess</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">vip</span>: <span class="title class_">VipPassenger</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Bob&quot;</span>,</span><br><span class="line">  <span class="attr">seat</span>: <span class="string">&quot;B10&quot;</span>,</span><br><span class="line">  <span class="attr">loungeAccess</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-Typeï¼ˆå‹åˆ¥åˆ¥åï¼‰"><a href="#2-Typeï¼ˆå‹åˆ¥åˆ¥åï¼‰" class="headerlink" title="2. Typeï¼ˆå‹åˆ¥åˆ¥åï¼‰"></a>2. Typeï¼ˆå‹åˆ¥åˆ¥åï¼‰</h2><p><code>type</code> èˆ‡ <code>interface</code> å¾ˆåƒï¼Œä¸éå®ƒæ›´éˆæ´»ï¼Œä¸åªå¯ä»¥æè¿°ç‰©ä»¶ï¼Œé‚„èƒ½ç”¨ä¾†å®šç¾© <strong>è¯åˆå‹åˆ¥ã€åŸºæœ¬å‹åˆ¥åˆ¥å</strong>ã€‚</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è»Šç¥¨ç·¨è™Ÿå¯èƒ½æ˜¯æ•¸å­—æˆ–å­—ä¸²</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">TicketID</span> = <span class="built_in">number</span> | <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹˜å®¢ç‰©ä»¶</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PassengerType</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="title class_">TicketID</span>;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">passengerC</span>: <span class="title class_">PassengerType</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&quot;T-123&quot;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Charlie&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‰ å·®ç•°æ¯”è¼ƒï¼š</p>
<ul>
<li><strong>interface</strong>ï¼šå°ˆæ³¨æè¿°ç‰©ä»¶çµæ§‹ï¼Œå¯ç¹¼æ‰¿ã€æ“´å……ã€‚</li>
<li><strong>type</strong>ï¼šæ›´éˆæ´»ï¼Œå¯ä»¥æè¿°å„ç¨®å‹åˆ¥çµ„åˆï¼ˆç‰©ä»¶ã€Unionã€Tuple ç­‰ï¼‰ã€‚</li>
</ul>
<hr>
<h2 id="3-æ³›å‹ï¼ˆGenericsï¼‰"><a href="#3-æ³›å‹ï¼ˆGenericsï¼‰" class="headerlink" title="3. æ³›å‹ï¼ˆGenericsï¼‰"></a>3. æ³›å‹ï¼ˆGenericsï¼‰</h2><p>æ³›å‹å°±åƒã€Œç«è»Šè»Šå»‚ã€ğŸšƒï¼š</p>
<p>åŒæ¨£çš„è»Šå»‚çµæ§‹ï¼Œå¯ä»¥è¼‰ä¸åŒç¨®é¡çš„ä¹˜å®¢æˆ–è²¨ç‰©ã€‚</p>
<h3 id="å‡½å¼ä¸­çš„æ³›å‹"><a href="#å‡½å¼ä¸­çš„æ³›å‹" class="headerlink" title="å‡½å¼ä¸­çš„æ³›å‹"></a>å‡½å¼ä¸­çš„æ³›å‹</h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">value</span>: T): T &#123;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜ç¢ºæŒ‡å®šå‹åˆ¥</span></span><br><span class="line"><span class="keyword">const</span> ticketNumber = identity&lt;<span class="built_in">number</span>&gt;(<span class="number">12345</span>);</span><br><span class="line"><span class="keyword">const</span> passengerName = identity&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;David&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥è‡ªå‹•æ¨æ–·</span></span><br><span class="line"><span class="keyword">const</span> autoTicket = <span class="title function_">identity</span>(<span class="string">&quot;E12&quot;</span>);</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ä»‹é¢ä¸­çš„æ³›å‹"><a href="#ä»‹é¢ä¸­çš„æ³›å‹" class="headerlink" title="ä»‹é¢ä¸­çš„æ³›å‹"></a>ä»‹é¢ä¸­çš„æ³›å‹</h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">TrainResponse</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">data</span>: T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›å‚³å–®ä¸€ä¹˜å®¢</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">passengerResponse</span>: <span class="title class_">TrainResponse</span>&lt;<span class="title class_">Passenger</span>&gt; = &#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;Arvin&quot;</span> &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›å‚³ä¹˜å®¢é™£åˆ—</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">passengersResponse</span>: <span class="title class_">TrainResponse</span>&lt;<span class="title class_">Passenger</span>[]&gt; = &#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">  <span class="attr">data</span>: [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;Alice&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&quot;Bob&quot;</span>, <span class="attr">seat</span>: <span class="string">&quot;C3&quot;</span> &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="é¡åˆ¥ä¸­çš„æ³›å‹"><a href="#é¡åˆ¥ä¸­çš„æ³›å‹" class="headerlink" title="é¡åˆ¥ä¸­çš„æ³›å‹"></a>é¡åˆ¥ä¸­çš„æ³›å‹</h3><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TrainCar</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">items</span>: T[] = [];</span><br><span class="line"></span><br><span class="line">  <span class="title function_">add</span>(<span class="params">item: T</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">push</span>(item);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getAll</span>(): T[] &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">items</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»ºç«‹ã€Œä¹˜å®¢è»Šå»‚ã€</span></span><br><span class="line"><span class="keyword">const</span> passengerCar = <span class="keyword">new</span> <span class="title class_">TrainCar</span>&lt;<span class="title class_">Passenger</span>&gt;();</span><br><span class="line">passengerCar.<span class="title function_">add</span>(&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;Arvin&quot;</span> &#125;);</span><br><span class="line">passengerCar.<span class="title function_">add</span>(&#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;Alice&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»ºç«‹ã€Œè¡Œæè»Šå»‚ã€</span></span><br><span class="line"><span class="keyword">const</span> luggageCar = <span class="keyword">new</span> <span class="title class_">TrainCar</span>&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">luggageCar.<span class="title function_">add</span>(<span class="string">&quot;èƒŒåŒ…&quot;</span>);</span><br><span class="line">luggageCar.<span class="title function_">add</span>(<span class="string">&quot;è¡Œæç®±&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(passengerCar.<span class="title function_">getAll</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(luggageCar.<span class="title function_">getAll</span>());</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><ul>
<li><strong>Interface</strong>ï¼šé©åˆæè¿°ç‰©ä»¶çµæ§‹ï¼Œä¾‹å¦‚ã€Œä¹˜å®¢ã€æˆ–ã€Œè»Šç¥¨ã€ã€‚</li>
<li><strong>Type</strong>ï¼šæ›´éˆæ´»ï¼Œå¯ä»¥æè¿° <strong>ç‰©ä»¶ + Union + Tuple</strong>ï¼Œå¸¸ç”¨ä¾†å®šç¾©ã€Œç¥¨è™Ÿã€ä»˜æ¬¾æ–¹å¼ã€ç­‰ã€‚</li>
<li><strong>Generics</strong>ï¼šåƒã€Œç«è»Šè»Šå»‚ã€ï¼ŒåŒä¸€å¥—çµæ§‹å¯ä»¥è£ä¸åŒå‹åˆ¥ï¼Œè®“ç¨‹å¼ç¢¼æ›´å¯é‡ç”¨ã€‚</li>
</ul>
<hr>
<h2 id="Interface-vs-Type-vs-Generics-å°ç…§è¡¨"><a href="#Interface-vs-Type-vs-Generics-å°ç…§è¡¨" class="headerlink" title="Interface vs Type vs Generics å°ç…§è¡¨"></a>Interface vs Type vs Generics å°ç…§è¡¨</h2><table>
<thead>
<tr>
<th>ç‰¹é»</th>
<th>Interface</th>
<th>Type</th>
<th>Generics</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ç”¨é€”</strong></td>
<td>å®šç¾©ç‰©ä»¶çµæ§‹</td>
<td>å®šç¾©å„ç¨®å‹åˆ¥ï¼ˆç‰©ä»¶ã€Unionã€Tupleâ€¦ï¼‰</td>
<td>å»ºç«‹å¯é‡ç”¨ã€ä¿ç•™å‹åˆ¥çš„æ¨¡æ¿</td>
</tr>
<tr>
<td><strong>å»¶ä¼¸æ€§</strong></td>
<td>å¯ç”¨ <code>extends</code> ç¹¼æ‰¿ã€æ“´å……</td>
<td>ä¸å¯ç¹¼æ‰¿ï¼Œä½†å¯ç”¨ <code>&amp;</code> åšäº¤é›†åˆä½µ</td>
<td>å¯å¥—ç”¨åœ¨å‡½å¼ã€ä»‹é¢ã€é¡åˆ¥</td>
</tr>
<tr>
<td><strong>å„ªé»</strong></td>
<td>æ¸…æ¥šæè¿°ç‰©ä»¶çµæ§‹ã€æ”¯æ´æ“´å……</td>
<td>å½ˆæ€§å¤§ï¼Œå¯ç”¨æ–¼å„ç¨®å‹åˆ¥çµ„åˆ</td>
<td>å¯é‡ç”¨ï¼Œæé«˜å‹åˆ¥å®‰å…¨æ€§</td>
</tr>
</tbody></table>
<hr>
<p>ğŸ‘‰ æ˜å¤©ï¼ˆDay 6ï¼‰æˆ‘å€‘æœƒé–‹å§‹é€²å…¥å¯¦æˆ°çš„ä¸€å€‹å…¨æ–°ç¯‡ç« ï¼Œé–‹å§‹åˆå§‹åŒ–ä¸€å€‹ <strong>TypeScript + Node.js å°ˆæ¡ˆ !</strong></p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 6 - å¦‚ä½•å»ºç«‹ä¸€å€‹ TypeScript + Node.js ç’°å¢ƒ (1)ï¼šåˆå§‹åŒ–å°ˆæ¡ˆ</title>
    <url>/2025/09/20/Day6%20-%20Node.js%20+%20TS%20(1)/</url>
    <content><![CDATA[<p>æ˜¨å¤©æˆ‘å€‘èŠäº†å¾ˆå¤šæ¦‚å¿µï¼Œä»Šå¤©é–‹å§‹è¦<strong>å‹•æ‰‹å¯¦ä½œ</strong>å•¦ï¼ğŸ’»</p>
<p>æˆ‘å€‘çš„ç›®æ¨™å¾ˆç°¡å–®ï¼šå»ºç«‹ä¸€å€‹èƒ½è·‘èµ·ä¾†çš„ <strong>TypeScript + Node.js å°ˆæ¡ˆç’°å¢ƒ</strong>ï¼Œä¸¦è®“ç€è¦½å™¨æˆåŠŸå›æ‡‰ <strong>ã€ŒHello, iThome2025 !ã€</strong> ğŸš€</p>
<p>æº–å‚™å¥½äº†å—ï¼ŸLetâ€™s goï¼</p>
<span id="more"></span>

<hr>
<h2 id="ä¸€ã€å°ˆæ¡ˆåˆå§‹åŒ–"><a href="#ä¸€ã€å°ˆæ¡ˆåˆå§‹åŒ–" class="headerlink" title="ä¸€ã€å°ˆæ¡ˆåˆå§‹åŒ–"></a>ä¸€ã€å°ˆæ¡ˆåˆå§‹åŒ–</h2><h3 id="1-é–‹ä¸€å€‹å°ˆæ¡ˆè³‡æ–™å¤¾"><a href="#1-é–‹ä¸€å€‹å°ˆæ¡ˆè³‡æ–™å¤¾" class="headerlink" title="1. é–‹ä¸€å€‹å°ˆæ¡ˆè³‡æ–™å¤¾"></a>1. é–‹ä¸€å€‹å°ˆæ¡ˆè³‡æ–™å¤¾</h3><p>ä½ å¯ä»¥ç›´æ¥åœ¨é›»è…¦è£¡é–‹ä¸€å€‹æ–°è³‡æ–™å¤¾ï¼Œæˆ–æ˜¯å¾ GitHub Clone å°ˆæ¡ˆä¸‹ä¾†ã€‚</p>
<p>é€™é‚Šç¤ºç¯„ Git ç‰ˆæœ¬ï¼Œé †ä¾¿ç·´ç¿’ä¸€ä¸‹åˆ†æ”¯ç®¡ç†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;ä½ çš„å°ˆæ¡ˆç¶²å€&gt;</span><br><span class="line"><span class="built_in">cd</span> &lt;å°ˆæ¡ˆè³‡æ–™å¤¾&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹ develop åˆ†æ”¯</span></span><br><span class="line">git checkout -b develop</span><br><span class="line">git push --set-upstream origin develop</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹åŠŸèƒ½åˆ†æ”¯</span></span><br><span class="line">git checkout -b feature/init-ts-express</span><br><span class="line">git push --set-upstream origin feature/init-ts-express</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ğŸ‘‰ é€™æ¨£å°±èƒ½åœ¨ä¸€å€‹ä¹¾æ·¨çš„åˆ†æ”¯ä¸Šé–‹å§‹é–‹ç™¼ï¼Œæ–¹ä¾¿æ—¥å¾Œåˆä½µ PRã€‚</p>
<hr>
<h3 id="2-åŠ ä¸Š-gitignore"><a href="#2-åŠ ä¸Š-gitignore" class="headerlink" title="2. åŠ ä¸Š .gitignore"></a>2. åŠ ä¸Š <code>.gitignore</code></h3><p>ç‚ºäº†é¿å…ã€Œä¸€äº›ä¸å¿…è¦çš„æª”æ¡ˆã€è¢«æ¨åˆ° GitHubï¼Œæˆ‘å€‘è¦æ–°å¢ä¸€å€‹ <code>.gitignore</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Node modules</span><br><span class="line">node_modules/</span><br><span class="line"></span><br><span class="line"># Logs</span><br><span class="line">logs/</span><br><span class="line">*.log</span><br><span class="line">npm-debug.log*</span><br><span class="line"></span><br><span class="line"># Environment variables</span><br><span class="line">.env</span><br><span class="line"></span><br><span class="line"># Build output</span><br><span class="line">dist/</span><br><span class="line">build/</span><br><span class="line"></span><br><span class="line"># TypeScript cache</span><br><span class="line">*.tsbuildinfo</span><br><span class="line"></span><br><span class="line"># OS / Editor ç³»çµ±æª”æ¡ˆ</span><br><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line"></span><br><span class="line"># VS Code è¨­å®š</span><br><span class="line">.vscode/</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>å°æé†’</strong>ï¼šé€™ä¸€æ­¥å¾ˆå®¹æ˜“è¢«å¿½ç•¥ï¼Œä½†å¾ˆé‡è¦ï¼Œå› ç‚ºä¸Šå‚³ <code>node_modules</code> åˆ° GitHub çœŸçš„æœ‰å¯èƒ½æœƒè¢«å«Œæ£„ ğŸ˜…</p>
<hr>
<h3 id="3-åˆå§‹åŒ–-Node-js-å°ˆæ¡ˆ"><a href="#3-åˆå§‹åŒ–-Node-js-å°ˆæ¡ˆ" class="headerlink" title="3. åˆå§‹åŒ– Node.js å°ˆæ¡ˆ"></a>3. åˆå§‹åŒ– Node.js å°ˆæ¡ˆ</h3><p>åŸ·è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é€™æœƒå¿«é€Ÿç”Ÿæˆä¸€å€‹ <code>package.json</code>ï¼Œè£¡é¢è¨˜éŒ„å°ˆæ¡ˆè³‡è¨Šå’Œå¥—ä»¶æ¸…å–®ã€‚</p>
<p>æŒ‰ä¸‹ <code>-y</code> ä»£è¡¨æ¥å—æ‰€æœ‰é è¨­å€¼ï¼Œè¶…çœæ™‚ï¼ğŸ‘Œ</p>
<hr>
<h2 id="äºŒã€å®‰è£å¿…è¦å¥—ä»¶"><a href="#äºŒã€å®‰è£å¿…è¦å¥—ä»¶" class="headerlink" title="äºŒã€å®‰è£å¿…è¦å¥—ä»¶"></a>äºŒã€å®‰è£å¿…è¦å¥—ä»¶</h2><p>æˆ‘å€‘çš„å·¥å…·åŒ…åŒ…å«ï¼š</p>
<ul>
<li><strong>Express</strong>ï¼šå¾Œç«¯ API æ¡†æ¶</li>
<li><strong>TypeScript</strong>ï¼šå‹åˆ¥å®‰å…¨</li>
<li><strong>@types</strong>ï¼šå‹åˆ¥å®šç¾©æª”</li>
<li><strong>ts-node-dev</strong>ï¼šé–‹ç™¼æ™‚è‡ªå‹•ç·¨è­¯ + é‡å•Ÿ</li>
</ul>
<p>ä¸€æ¬¡è£å¥½ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install express</span><br><span class="line">npm install -D typescript @types/express @types/node ts-node-dev</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è£å®Œå¾Œï¼Œ<code>package.json</code> çš„ <code>dependencies</code> å’Œ <code>devDependencies</code> å°±æœƒå¤šå‡ºé€™äº›å°å¤¥ä¼´ã€‚</p>
<hr>
<h2 id="ä¸‰ã€è¨­å®š-TypeScript"><a href="#ä¸‰ã€è¨­å®š-TypeScript" class="headerlink" title="ä¸‰ã€è¨­å®š TypeScript"></a>ä¸‰ã€è¨­å®š TypeScript</h2><h3 id="1-å»ºç«‹-tsconfig-json"><a href="#1-å»ºç«‹-tsconfig-json" class="headerlink" title="1. å»ºç«‹ tsconfig.json"></a>1. å»ºç«‹ <code>tsconfig.json</code></h3><p>è¼¸å…¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx tsc --init</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é€™æœƒç”Ÿæˆ <code>tsconfig.json</code>ã€‚æ¥è‘—ç·¨è¼¯æˆä»¥ä¸‹ç‰ˆæœ¬ï¼ˆç›´æ¥è¦†è“‹å³å¯ï¼‰ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ES2020&quot;</span><span class="punctuation">,</span> <span class="comment">// ç”¨ ES2020 çš„ JavaScript ç‰ˆæœ¬</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commonjs&quot;</span><span class="punctuation">,</span> <span class="comment">// ç”¨ CommonJS æ¨¡çµ„</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist&quot;</span><span class="punctuation">,</span> <span class="comment">// ç·¨è­¯è¼¸å‡ºç›®éŒ„</span></span><br><span class="line">    <span class="attr">&quot;rootDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src&quot;</span><span class="punctuation">,</span> <span class="comment">// ç¨‹å¼ç¢¼æ ¹ç›®éŒ„</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// å•Ÿç”¨åš´æ ¼å‹åˆ¥æª¢æŸ¥</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// æ”¯æ´æ¨¡çµ„äº’æ“ä½œ</span></span><br><span class="line">    <span class="attr">&quot;experimentalDecorators&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// å•Ÿç”¨è£é£¾å™¨èªæ³•</span></span><br><span class="line">    <span class="attr">&quot;emitDecoratorMetadata&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// ç‚º TypeORM ç”Ÿæˆå…ƒæ•¸æ“š</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="comment">// ç·¨è­¯ src è³‡æ–™å¤¾å…§çš„æª”æ¡ˆ</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;node_modules&quot;</span><span class="punctuation">]</span> <span class="comment">// æ’é™¤ node_modules</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>é€™é‚Šè¦è¨˜ä½å¹¾å€‹é—œéµè¨­å®šï¼š</p>
<ul>
<li><code>rootDir</code> â†’ åŸå§‹ç¢¼æ”¾å“ªè£¡</li>
<li><code>outDir</code> â†’ ç·¨è­¯è¼¸å‡ºåˆ°å“ªè£¡</li>
<li><code>strict</code> â†’ æ‰“é–‹å‹åˆ¥æª¢æŸ¥ï¼Œä¿è­·ä½ çš„ç¨‹å¼ç¢¼</li>
<li><code>experimentalDecorators</code> + <code>emitDecoratorMetadata</code> â†’ ç‚ºä¹‹å¾Œç”¨ TypeORM é å…ˆé‹ªè·¯</li>
</ul>
<p>ç„¶å¾Œæ–°å¢ä¸€å€‹ <code>src</code> è³‡æ–™å¤¾ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> src</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å››ã€å¯«ç¬¬ä¸€æ”¯ç¨‹å¼-ğŸš€"><a href="#å››ã€å¯«ç¬¬ä¸€æ”¯ç¨‹å¼-ğŸš€" class="headerlink" title="å››ã€å¯«ç¬¬ä¸€æ”¯ç¨‹å¼ ğŸš€"></a>å››ã€å¯«ç¬¬ä¸€æ”¯ç¨‹å¼ ğŸš€</h2><p>åœ¨ <code>src</code> è£¡æ–°å¢ <code>app.ts</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> src/app.ts</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¯«å…¥ä»¥ä¸‹å…§å®¹ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;Hello, iThome2025!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">3000</span>;</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ğŸš€ Server running on http://localhost:<span class="subst">$&#123;PORT&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åˆ°é€™è£¡ï¼Œä½ å·²ç¶“å®Œæˆä¸€å€‹æœ€å°å¯é‹è¡Œçš„ Express + TS ç¨‹å¼ï¼ğŸ‰</p>
<hr>
<h2 id="äº”ã€å•Ÿå‹•èˆ‡æ¸¬è©¦"><a href="#äº”ã€å•Ÿå‹•èˆ‡æ¸¬è©¦" class="headerlink" title="äº”ã€å•Ÿå‹•èˆ‡æ¸¬è©¦"></a>äº”ã€å•Ÿå‹•èˆ‡æ¸¬è©¦</h2><h3 id="1-ä¿®æ”¹-package-json"><a href="#1-ä¿®æ”¹-package-json" class="headerlink" title="1. ä¿®æ”¹ package.json"></a>1. ä¿®æ”¹ <code>package.json</code></h3><p>åœ¨ <code>scripts</code> ä¸­åŠ ä¸Šï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ts-node-dev src/app.ts&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-å•Ÿå‹•ä¼ºæœå™¨"><a href="#2-å•Ÿå‹•ä¼ºæœå™¨" class="headerlink" title="2. å•Ÿå‹•ä¼ºæœå™¨"></a>2. å•Ÿå‹•ä¼ºæœå™¨</h3><p>åŸ·è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸€åˆ‡é †åˆ©ï¼Œä½ æœƒçœ‹åˆ°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ğŸš€ Server running on http://localhost:3000</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3-é–‹ç€è¦½å™¨æ¸¬è©¦"><a href="#3-é–‹ç€è¦½å™¨æ¸¬è©¦" class="headerlink" title="3. é–‹ç€è¦½å™¨æ¸¬è©¦"></a>3. é–‹ç€è¦½å™¨æ¸¬è©¦</h3><p>è¼¸å…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://localhost:3000</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ° **Hello, iThome2025 !**ï¼Œå°±ä»£è¡¨ç’°å¢ƒå®Œæˆ âœ…</p>
<hr>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><p>ä»Šå¤©æˆ‘å€‘å®Œæˆäº†å°ˆæ¡ˆåˆå§‹åŒ–çš„æ•´å€‹æµç¨‹ï¼š</p>
<ul>
<li>Git åˆ†æ”¯ç®¡ç†</li>
<li>è¨­å®š <code>.gitignore</code></li>
<li>åˆå§‹åŒ– <code>package.json</code></li>
<li>å®‰è£å¿…è¦å¥—ä»¶</li>
<li>è¨­å®š TypeScript</li>
<li>å»ºç«‹ç¬¬ä¸€å€‹ Express ç¨‹å¼</li>
</ul>
<p>å¾ç¾åœ¨é–‹å§‹ï¼Œä½ å·²ç¶“æœ‰ä¸€å€‹èƒ½è·‘èµ·ä¾†çš„ <strong>TypeScript + Node.js é–‹ç™¼ç’°å¢ƒ</strong> ğŸ¯</p>
<p>æ˜å¤©ï¼Œæˆ‘å€‘æœƒé€²ä¸€æ­¥è®“å°ˆæ¡ˆçµæ§‹æ›´æœ‰çµ„ç¹”æ„Ÿï¼Œä¸¦æº–å‚™å¥½è¿æ¥æ›´è¤‡é›œçš„ API é–‹ç™¼ã€‚</p>
<hr>
<h2 id="è£œå……è³‡æº"><a href="#è£œå……è³‡æº" class="headerlink" title="è£œå……è³‡æº"></a>è£œå……è³‡æº</h2><p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/tree/feature/init-ts-express">Github ç¯„ä¾‹ç¨‹å¼ç¢¼</a></p>
<blockquote>
<p>commit message: Day 6 - set up Express + TS environment</p>
</blockquote>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 7 - å¦‚ä½•å»ºç«‹ä¸€å€‹ TypeScript + Node.js ç’°å¢ƒ (2)ï¼šå°ˆæ¡ˆæ¶æ§‹èˆ‡è³‡æ–™åº«è¨­å®š</title>
    <url>/2025/09/21/Day7%20-%20Node.js%20+%20TS%20(2)/</url>
    <content><![CDATA[<p>å—¨ï½æ˜¨å¤©æˆ‘å€‘å·²ç¶“æœ‰ä¸€å€‹èƒ½è·‘èµ·ä¾†çš„ <strong>TypeScript + Node.js é–‹ç™¼ç’°å¢ƒ</strong>ã€‚æ¥è‘—ï¼Œåœ¨æ­£å¼é–‹ç™¼ API ä¹‹å‰ï¼Œå…ˆä¾†é»æš–èº« â€”â€” å»ºç«‹ä¸€å€‹æ¸…æ™°ã€å¯ç¶­è­·çš„å°ˆæ¡ˆæ¶æ§‹ï¼Œä¸¦å®Œæˆç’°å¢ƒè®Šæ•¸èˆ‡è³‡æ–™åº«é€£ç·šè¨­å®šã€‚é€™äº›åŸºç¤å·¥å…·å°±æ˜¯æœªä¾†å°ˆæ¡ˆèƒ½å¦ç©©å®šæ¨é€²çš„é—œéµã€‚</p>
<span id="more"></span>

<hr>
<h2 id="å°ˆæ¡ˆæ¶æ§‹æ•´ç†"><a href="#å°ˆæ¡ˆæ¶æ§‹æ•´ç†" class="headerlink" title="å°ˆæ¡ˆæ¶æ§‹æ•´ç†"></a>å°ˆæ¡ˆæ¶æ§‹æ•´ç†</h2><h3 id="å»ºç«‹è³‡æ–™å¤¾çµæ§‹"><a href="#å»ºç«‹è³‡æ–™å¤¾çµæ§‹" class="headerlink" title="å»ºç«‹è³‡æ–™å¤¾çµæ§‹"></a>å»ºç«‹è³‡æ–™å¤¾çµæ§‹</h3><p>ç‚ºäº†è®“å°ˆæ¡ˆæ›´æœ‰æ¢ç†ã€æ–¹ä¾¿å¾ŒçºŒç¶­è­·ï¼Œæˆ‘å€‘åœ¨ <code>src</code> åº•ä¸‹å»ºç«‹ä»¥ä¸‹è³‡æ–™å¤¾ï¼š</p>
<ul>
<li><code>config</code>ï¼šå­˜æ”¾è¨­å®šæª”ï¼ˆä¾‹å¦‚è³‡æ–™åº«é€£ç·šè¨­å®šï¼‰ã€‚</li>
<li><code>controllers</code>ï¼šè™•ç† API æ¥­å‹™é‚è¼¯ã€‚</li>
<li><code>entities</code>ï¼šå®šç¾©è³‡æ–™åº«æ¨¡å‹ (Entity)ã€‚</li>
<li><code>middleware</code>ï¼šå­˜æ”¾ä¸­é–“ä»¶ã€‚</li>
<li><code>routes</code>ï¼šå®šç¾© API è·¯ç”±ã€‚</li>
<li><code>utils</code>ï¼šå¸¸ç”¨å·¥å…·å‡½æ•¸ã€‚</li>
</ul>
<p>å»ºç«‹æŒ‡ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> src</span><br><span class="line"><span class="built_in">mkdir</span> config controllers entities middleware routes utils</span><br></pre></td></tr></table></figure>

<p>æœ€çµ‚çµæ§‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">src/</span><br><span class="line">  â”œâ”€â”€ config/</span><br><span class="line">  â”œâ”€â”€ controllers/</span><br><span class="line">  â”œâ”€â”€ entities/</span><br><span class="line">  â”œâ”€â”€ middleware/</span><br><span class="line">  â”œâ”€â”€ routes/</span><br><span class="line">  â”œâ”€â”€ utils/</span><br><span class="line">  â””â”€â”€ app.ts</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ç’°å¢ƒè®Šæ•¸è¨­å®š"><a href="#ç’°å¢ƒè®Šæ•¸è¨­å®š" class="headerlink" title="ç’°å¢ƒè®Šæ•¸è¨­å®š"></a>ç’°å¢ƒè®Šæ•¸è¨­å®š</h2><p>ç‚ºä»€éº¼è¦ç”¨ç’°å¢ƒè®Šæ•¸ï¼Ÿ</p>
<p>å› ç‚ºå°ˆæ¡ˆå¸¸å¸¸éœ€è¦å­˜æ”¾æ•æ„Ÿè³‡è¨Šï¼ˆåƒæ˜¯è³‡æ–™åº«å¯†ç¢¼ã€API é‡‘é‘°ï¼‰ï¼Œé€™äº›æ±è¥¿çµ•ä¸èƒ½ç›´æ¥å¯«æ­»åœ¨ç¨‹å¼ç¢¼è£¡ã€‚</p>
<h3 id="å®‰è£èˆ‡è¨­å®š-dotenv"><a href="#å®‰è£èˆ‡è¨­å®š-dotenv" class="headerlink" title="å®‰è£èˆ‡è¨­å®š dotenv"></a>å®‰è£èˆ‡è¨­å®š dotenv</h3><ol>
<li><p>å®‰è£å¥—ä»¶èˆ‡å‹åˆ¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install dotenv</span><br><span class="line">npm install @types/dotenv --save-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ <code>.env</code> æª”æ¡ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> .<span class="built_in">env</span></span><br></pre></td></tr></table></figure>

<p>åœ¨æª”æ¡ˆå…§è¼¸å…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB_HOST=localhost</span><br><span class="line">DB_NAME=db_name</span><br><span class="line">DB_USERNAME=ä½ çš„è³‡æ–™åº«ä½¿ç”¨è€…</span><br><span class="line">DB_PASSWORD=ä½ çš„å¯†ç¢¼</span><br><span class="line">DB_PORT=5432</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¢ºèª <code>.gitignore</code>æœ‰ä¸‹æ–¹é…ç½®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.env</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>âš ï¸ .env å…§å«æ•æ„Ÿè³‡è¨Šï¼Œå‹™å¿…é¿å…ä¸Šå‚³åˆ° GitHubï¼</p>
</blockquote>
<hr>
<h2 id="è³‡æ–™åº«é€£ç·šè¨­å®š"><a href="#è³‡æ–™åº«é€£ç·šè¨­å®š" class="headerlink" title="è³‡æ–™åº«é€£ç·šè¨­å®š"></a>è³‡æ–™åº«é€£ç·šè¨­å®š</h2><p>é€™è£¡æˆ‘å€‘æœƒä½¿ç”¨ <strong>PostgreSQL</strong> æ­é… <strong>TypeORM</strong> ä½œç‚º ORM å·¥å…·ã€‚</p>
<h3 id="å®‰è£å¥—ä»¶"><a href="#å®‰è£å¥—ä»¶" class="headerlink" title="å®‰è£å¥—ä»¶"></a>å®‰è£å¥—ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install typeorm pg</span><br></pre></td></tr></table></figure>

<h3 id="è¨­å®š-TypeORM-é€£ç·š"><a href="#è¨­å®š-TypeORM-é€£ç·š" class="headerlink" title="è¨­å®š TypeORM é€£ç·š"></a>è¨­å®š TypeORM é€£ç·š</h3><p>åœ¨ <code>src/config</code> å»ºç«‹ <code>db.ts</code>ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;reflect-metadata&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DataSource</span> &#125; <span class="keyword">from</span> <span class="string">&quot;typeorm&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Todo</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../entities/Todo&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> dotenv <span class="keyword">from</span> <span class="string">&quot;dotenv&quot;</span>;</span><br><span class="line"></span><br><span class="line">dotenv.<span class="title function_">config</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">AppDataSource</span> = <span class="keyword">new</span> <span class="title class_">DataSource</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;postgres&quot;</span>,</span><br><span class="line">  <span class="attr">host</span>: process.<span class="property">env</span>.<span class="property">DB_HOST</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="title class_">Number</span>(process.<span class="property">env</span>.<span class="property">DB_PORT</span>),</span><br><span class="line">  <span class="attr">username</span>: process.<span class="property">env</span>.<span class="property">DB_USERNAME</span>,</span><br><span class="line">  <span class="attr">password</span>: process.<span class="property">env</span>.<span class="property">DB_PASSWORD</span>,</span><br><span class="line">  <span class="attr">database</span>: process.<span class="property">env</span>.<span class="property">DB_NAME</span>,</span><br><span class="line">  <span class="attr">entities</span>: [<span class="title class_">Todo</span>],</span><br><span class="line">  <span class="attr">synchronize</span>: <span class="literal">true</span>, <span class="comment">// é–‹ç™¼éšæ®µå»ºè­° trueï¼Œæ­£å¼ç’°å¢ƒè«‹æ”¹æˆ false</span></span><br><span class="line">  <span class="attr">logging</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>âš ï¸ synchronize: true æœƒè‡ªå‹•ç”¢ç”Ÿ ORM æ‰€å°æ‡‰çš„è³‡æ–™è¡¨ï¼Œåƒ…é™é–‹ç™¼éšæ®µä½¿ç”¨ï¼›æ­£å¼ç’°å¢ƒå»ºè­°ä½¿ç”¨ migrationï¼</p>
</blockquote>
<hr>
<h2 id="å®šç¾©è³‡æ–™æ¨¡å‹"><a href="#å®šç¾©è³‡æ–™æ¨¡å‹" class="headerlink" title="å®šç¾©è³‡æ–™æ¨¡å‹"></a>å®šç¾©è³‡æ–™æ¨¡å‹</h2><p>åœ¨ TypeORM è£¡ï¼Œ<strong>Entity å°±æ˜¯è³‡æ–™åº«æ¨¡å‹</strong>ï¼Œè² è²¬å®šç¾©è¡¨æ ¼çµæ§‹ã€‚</p>
<h3 id="å»ºç«‹-Todo-Entity"><a href="#å»ºç«‹-Todo-Entity" class="headerlink" title="å»ºç«‹ Todo Entity"></a>å»ºç«‹ Todo Entity</h3><ol>
<li><p>æ–°å¢æª”æ¡ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> src/entities/Todo.ts</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç·¨è¼¯å…§å®¹ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Entity</span>, <span class="title class_">PrimaryGeneratedColumn</span>, <span class="title class_">Column</span> &#125; <span class="keyword">from</span> <span class="string">&quot;typeorm&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Todo</span> &#123;</span><br><span class="line">  <span class="meta">@PrimaryGeneratedColumn</span>(<span class="string">&quot;uuid&quot;</span>)</span><br><span class="line">  id!: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Column</span>()</span><br><span class="line">  title!: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Column</span>(&#123; <span class="attr">default</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">  completed!: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¢ºèª <code>tsconfig.json</code>ï¼Œç¢ºä¿æ”¯æ´è£é£¾å™¨ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;experimentalDecorators&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;emitDecoratorMetadata&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>ğŸ’¡ å°æŠ€å·§ï¼š</p>
<ul>
<li><code>!</code> è¡¨ç¤ºè©²å±¬æ€§å¿…å¡«ã€‚</li>
</ul>
</blockquote>
<hr>
<p>ğŸ‘‰ æ˜å¤©ï¼ˆDay 8ï¼‰æˆ‘å€‘å³å°‡é–‹å§‹é–‹ç™¼ API ï¼Œè®“ <strong>TypeScript + Node.js å°ˆæ¡ˆæ›´è±å¯Œ ğŸš€ !</strong></p>
<h2 id="è£œå……è³‡æº"><a href="#è£œå……è³‡æº" class="headerlink" title="è£œå……è³‡æº"></a>è£œå……è³‡æº</h2><p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/ea9757e05ffe4d0a7dd48d65c1e4cc37f25361d8">Github ç¯„ä¾‹ç¨‹å¼ç¢¼</a></p>
<blockquote>
<p>git commit : setup backend structure and typeORM setting</p>
</blockquote>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 19 - å°ˆæ¡ˆå‡ç´šå¿…å‚™ï¼šè³‡æ–™åº« Migration å¯¦æˆ°</title>
    <url>/2025/10/03/Day19%20-%20NodeJS-Migration/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å°ˆæ¡ˆé–‹ç™¼æ™‚ï¼Œæˆ‘å€‘å¸¸å¸¸æœƒé‡åˆ°ã€Œè³‡æ–™åº« Schema éœ€è¦ä¿®æ”¹ã€çš„æƒ…æ³ã€‚</p>
<p>ä¾‹å¦‚æ–°å¢æ¬„ä½ã€åˆªé™¤æ¬„ä½ã€æˆ–æ˜¯èª¿æ•´æ¬„ä½å‹åˆ¥ã€‚</p>
<p>æœ€ç›´è¦ºçš„æ–¹å¼æ˜¯ â€”â€” ç›´æ¥æ”¹ Entityï¼Œç„¶å¾Œé  TypeORM çš„ <code>synchronize: true</code> ä¾†è‡ªå‹•åŒæ­¥ã€‚</p>
<p>ä½†æ˜¯ï¼Œé€™æ¨£åšçœŸçš„å®‰å…¨å—ï¼Ÿ ğŸ¤”</p>
<span id="more"></span>

<hr>
<h2 id="âš ï¸-synchronize-true-çš„éš±è—é¢¨éšª"><a href="#âš ï¸-synchronize-true-çš„éš±è—é¢¨éšª" class="headerlink" title="âš ï¸ synchronize: true çš„éš±è—é¢¨éšª"></a>âš ï¸ <code>synchronize: true</code> çš„éš±è—é¢¨éšª</h2><p>åœ¨ <code>DataSource</code> è¨­å®šä¸­ï¼Œå¤§å®¶æ‡‰è©²éƒ½çœ‹éé€™æ®µï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="attr">synchronize</span>: <span class="literal">true</span>, <span class="comment">// é–‹ç™¼éšæ®µæ–¹ä¾¿ï¼Œæ­£å¼ç’°å¢ƒå»ºè­° false</span></span><br></pre></td></tr></table></figure>

<p>é€™å€‹åƒæ•¸æœƒè®“ TypeORM åœ¨æ¯æ¬¡å•Ÿå‹•å°ˆæ¡ˆæ™‚ï¼Œè‡ªå‹•æ¯”å° Entity èˆ‡è³‡æ–™åº«çµæ§‹ï¼Œä¸¦ã€Œç›´æ¥ä¿®æ”¹è³‡æ–™åº«ã€ã€‚</p>
<p><strong>å¥½è™•ï¼š</strong></p>
<ul>
<li>é–‹ç™¼åˆæœŸå¾ˆå¿«ï¼šæ”¹ <code>User.ts</code> æˆ– <code>Todo.ts</code>ï¼Œè³‡æ–™åº«è‡ªå‹•æ›´æ–°ã€‚</li>
<li>ä¸éœ€è¦å¯« SQLï¼Œå®Œå…¨è‡ªå‹•åŒ–ã€‚</li>
</ul>
<p><strong>å£è™•ï¼š</strong></p>
<ol>
<li><strong>è³‡æ–™å¯èƒ½ç›´æ¥è¢«åˆªæ‰</strong>ï¼šæ¬„ä½åç¨±æ”¹äº†ï¼ŒTypeORM å¯èƒ½ç›´æ¥ drop + recreate tableã€‚</li>
<li><strong>å¤šäººå”ä½œå¾ˆå±éšª</strong>ï¼šå¤§å®¶æœ¬åœ° Entity ä¸ä¸€è‡´ â†’ DB schema æœƒäº‚æ‰ã€‚</li>
<li><strong>Production å¤§å¿Œ</strong>ï¼šä¸Šç·šç’°å¢ƒå¦‚æœé‚„é–‹ <code>synchronize: true</code>ï¼Œä¸€å€‹å°æ”¹å‹•å°±å¯èƒ½è®“ç·šä¸Šè³‡æ–™æ¶ˆå¤±ã€‚</li>
</ol>
<p>ğŸ‘‰ é€™å°±æ˜¯æˆ‘å€‘éœ€è¦ Migration çš„ç†ç”±ã€‚</p>
<hr>
<h2 id="ç‚ºä»€éº¼è¦ç”¨-Migrationï¼Ÿ"><a href="#ç‚ºä»€éº¼è¦ç”¨-Migrationï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼è¦ç”¨ Migrationï¼Ÿ"></a>ç‚ºä»€éº¼è¦ç”¨ Migrationï¼Ÿ</h2><p>Migration å°±åƒã€Œè³‡æ–™åº«çš„ Gitã€ï¼Œèƒ½å¹«åŠ©æˆ‘å€‘åšåˆ°ï¼š</p>
<ul>
<li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šæ¯æ¬¡æ”¹å‹•éƒ½è¢«è¨˜éŒ„ä¸‹ä¾†ã€‚</li>
<li><strong>å¯å›æ»¾</strong>ï¼šè·‘éŒ¯äº†å¯ä»¥ revertã€‚</li>
<li><strong>å¤šäººå”ä½œ</strong>ï¼šå¤§å®¶è·‘åŒä¸€ä»½ Migrationï¼Œç¢ºä¿ä¸€è‡´æ€§ã€‚</li>
<li><strong>å®‰å…¨ä¸Šç·š</strong>ï¼šProduction å¯ä»¥æ”¾å¿ƒåŸ·è¡Œï¼Œé¿å…ä¸å¯é æœŸçš„è‡ªå‹•ä¿®æ”¹ã€‚</li>
</ul>
<hr>
<h2 id="Migration-å¯¦æˆ°ï¼šå°å…¥-Migration-çš„æ­¥é©Ÿ"><a href="#Migration-å¯¦æˆ°ï¼šå°å…¥-Migration-çš„æ­¥é©Ÿ" class="headerlink" title="Migration å¯¦æˆ°ï¼šå°å…¥ Migration çš„æ­¥é©Ÿ"></a>Migration å¯¦æˆ°ï¼šå°å…¥ Migration çš„æ­¥é©Ÿ</h2><h3 id="ç¬¬-1-æ­¥ï¼šåœ¨-package-json-æ·»åŠ -Migration-æŒ‡ä»¤"><a href="#ç¬¬-1-æ­¥ï¼šåœ¨-package-json-æ·»åŠ -Migration-æŒ‡ä»¤" class="headerlink" title="ç¬¬ 1 æ­¥ï¼šåœ¨ package.json æ·»åŠ  Migration æŒ‡ä»¤"></a>ç¬¬ 1 æ­¥ï¼šåœ¨ <code>package.json</code> æ·»åŠ  Migration æŒ‡ä»¤</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ts-node-dev src/app.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettier --write \&quot;src/**/*.&#123;js,ts&#125;\&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;format:check&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettier --check \&quot;src/**/*.&#123;js,ts&#125;\&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint \&quot;src/**/*.ts\&quot; --format=stylish&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint:fix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint \&quot;src/**/*.ts\&quot; --fix&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;migration:generate&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typeorm-ts-node-commonjs migration:generate -d src/config/db.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;migration:run&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typeorm-ts-node-commonjs migration:run -d src/config/db.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;migration:revert&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typeorm-ts-node-commonjs migration:revert -d src/config/db.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;migration:show&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typeorm-ts-node-commonjs migration:show -d src/config/db.ts&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ç¬¬-2-æ­¥ï¼šå»ºç«‹-migrations-è³‡æ–™å¤¾"><a href="#ç¬¬-2-æ­¥ï¼šå»ºç«‹-migrations-è³‡æ–™å¤¾" class="headerlink" title="ç¬¬ 2 æ­¥ï¼šå»ºç«‹ migrations è³‡æ–™å¤¾"></a>ç¬¬ 2 æ­¥ï¼šå»ºç«‹ <code>migrations</code> è³‡æ–™å¤¾</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p src/migrations</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ç¬¬-3-æ­¥ï¼šä¿®æ”¹-src-config-db-ts"><a href="#ç¬¬-3-æ­¥ï¼šä¿®æ”¹-src-config-db-ts" class="headerlink" title="ç¬¬ 3 æ­¥ï¼šä¿®æ”¹ src/config/db.ts"></a>ç¬¬ 3 æ­¥ï¼šä¿®æ”¹ <code>src/config/db.ts</code></h3><p>å°‡ <code>synchronize</code> æ”¹ç‚º <code>false</code>ï¼Œä¸¦åŠ å…¥ migration è¨­å®šï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;reflect-metadata&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DataSource</span> &#125; <span class="keyword">from</span> <span class="string">&quot;typeorm&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Todo</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../entities/Todo&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">User</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../entities/User&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> dotenv <span class="keyword">from</span> <span class="string">&quot;dotenv&quot;</span>;</span><br><span class="line"></span><br><span class="line">dotenv.<span class="title function_">config</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">AppDataSource</span> = <span class="keyword">new</span> <span class="title class_">DataSource</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;postgres&quot;</span>,</span><br><span class="line">  <span class="attr">host</span>: process.<span class="property">env</span>.<span class="property">DB_HOST</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="title class_">Number</span>(process.<span class="property">env</span>.<span class="property">DB_PORT</span>),</span><br><span class="line">  <span class="attr">username</span>: process.<span class="property">env</span>.<span class="property">DB_USERNAME</span>,</span><br><span class="line">  <span class="attr">password</span>: process.<span class="property">env</span>.<span class="property">DB_PASSWORD</span>,</span><br><span class="line">  <span class="attr">database</span>: process.<span class="property">env</span>.<span class="property">DB_NAME</span>,</span><br><span class="line">  <span class="attr">ssl</span>: &#123; <span class="attr">rejectUnauthorized</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  <span class="attr">entities</span>: [<span class="title class_">Todo</span>, <span class="title class_">User</span>],</span><br><span class="line">  <span class="attr">synchronize</span>: <span class="literal">false</span>, <span class="comment">// âš ï¸ æ”¹ç‚º falseï¼Œæ”¹ç”¨ migration ç®¡ç†</span></span><br><span class="line">  <span class="attr">logging</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">migrations</span>: [<span class="string">&quot;src/migrations/**/*.ts&quot;</span>], <span class="comment">// ğŸ“ migration æª”æ¡ˆè·¯å¾‘</span></span><br><span class="line">  <span class="attr">migrationsTableName</span>: <span class="string">&quot;migrations_history&quot;</span>, <span class="comment">// ğŸ“Š migration æ­·å²è¨˜éŒ„è¡¨åç¨±</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ç¬¬-4-æ­¥ï¼šç”Ÿæˆåˆå§‹-Migration"><a href="#ç¬¬-4-æ­¥ï¼šç”Ÿæˆåˆå§‹-Migration" class="headerlink" title="ç¬¬ 4 æ­¥ï¼šç”Ÿæˆåˆå§‹ Migration"></a>ç¬¬ 4 æ­¥ï¼šç”Ÿæˆåˆå§‹ Migration</h3><p>å¦‚æœä¹‹å‰ç”¨ <code>synchronize: true</code> å·²ç¶“æœ‰è³‡æ–™è¡¨ï¼Œå»ºè­°å…ˆæ¸…ç©ºï¼Œå†é‡æ–°ç”¨ migration å»ºç«‹ã€‚</p>
<p>æ¸…ç©ºæ–¹å¼å¦‚ä¸‹: (Dbeaver é¸å– Table å³éµé»æ“Š Delete)</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day19-Migration/1-db-delete-table.png?raw=true"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run migration:generate src/migrations/InitialMigration</span><br></pre></td></tr></table></figure>

<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day19-Migration/2-init-migration.png?raw=true"></p>
<p>é€™æœƒç”Ÿæˆä¸€å€‹ migration æª”æ¡ˆï¼Œå…§å®¹é¡ä¼¼é€™æ¨£ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MigrationInterface</span>, <span class="title class_">QueryRunner</span> &#125; <span class="keyword">from</span> <span class="string">&quot;typeorm&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">InitialMigration1759480233749</span> <span class="keyword">implements</span> <span class="title class_">MigrationInterface</span> &#123;</span><br><span class="line">  name = <span class="string">&quot;InitialMigration1759480233749&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">async</span> <span class="title function_">up</span>(<span class="attr">queryRunner</span>: <span class="title class_">QueryRunner</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> queryRunner.<span class="title function_">query</span>(<span class="string">`CREATE TABLE &quot;user&quot; (...)`</span>);</span><br><span class="line">    <span class="keyword">await</span> queryRunner.<span class="title function_">query</span>(<span class="string">`CREATE TABLE &quot;todo&quot; (...)`</span>);</span><br><span class="line">    <span class="keyword">await</span> queryRunner.<span class="title function_">query</span>(<span class="string">`ALTER TABLE &quot;todo&quot; ADD CONSTRAINT ...`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">async</span> <span class="title function_">down</span>(<span class="attr">queryRunner</span>: <span class="title class_">QueryRunner</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> queryRunner.<span class="title function_">query</span>(<span class="string">`ALTER TABLE &quot;todo&quot; DROP CONSTRAINT ...`</span>);</span><br><span class="line">    <span class="keyword">await</span> queryRunner.<span class="title function_">query</span>(<span class="string">`DROP TABLE &quot;todo&quot;`</span>);</span><br><span class="line">    <span class="keyword">await</span> queryRunner.<span class="title function_">query</span>(<span class="string">`DROP TABLE &quot;user&quot;`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ç¬¬-5-æ­¥ï¼šåŸ·è¡Œ-Migration"><a href="#ç¬¬-5-æ­¥ï¼šåŸ·è¡Œ-Migration" class="headerlink" title="ç¬¬ 5 æ­¥ï¼šåŸ·è¡Œ Migration"></a>ç¬¬ 5 æ­¥ï¼šåŸ·è¡Œ Migration</h3><p>åŸ·è¡Œå‰å¯ä»¥å…ˆæŸ¥çœ‹ä¸€ä¸‹ç‹€æ…‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run migration:show   <span class="comment"># æŸ¥çœ‹ç‹€æ…‹</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ç™¼ç¾æœ‰åµæ¸¬åˆ°ä¸€å€‹ migration æª”æ¡ˆå°šæœªåŸ·è¡Œ</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day19-Migration/3-migration-show.png?raw=true"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run migration:run    <span class="comment"># åŸ·è¡Œ migration</span></span><br></pre></td></tr></table></figure>

<p>ä¸‹åœ–ç‚º migration æª”æ¡ˆåŸ·è¡Œçµæœ :</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day19-Migration/4-migration-run.png?raw=true"></p>
<p>ç„¶å¾Œå¯ä»¥åˆ°è³‡æ–™åº«æŸ¥çœ‹ç›®å‰ç‹€æ³ :</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day19-Migration/5-db-after-migration.png?raw=true"></p>
<p>å¯ç™¼ç¾å¤šäº†ä¸€å¼µ migrations_history è¡¨ï¼Œé€™æ˜¯ç”¨ä¾†è¨˜éŒ„ migration çš„è³‡è¨Š</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day19-Migration/6-migration-table.png?raw=true"></p>
<hr>
<h3 id="ç¬¬-6-æ­¥ï¼šå…¶ä»–å¸¸ç”¨æŒ‡ä»¤"><a href="#ç¬¬-6-æ­¥ï¼šå…¶ä»–å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="ç¬¬ 6 æ­¥ï¼šå…¶ä»–å¸¸ç”¨æŒ‡ä»¤"></a>ç¬¬ 6 æ­¥ï¼šå…¶ä»–å¸¸ç”¨æŒ‡ä»¤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å›é€€æœ€å¾Œä¸€æ¬¡ migration</span></span><br><span class="line">npm run migration:revert</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹ Entity å¾Œï¼Œé‡æ–°ç”Ÿæˆ migration</span></span><br><span class="line">npm run migration:generate src/migrations/ä½ çš„Migrationåç¨±</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å®Œæ•´å·¥ä½œæµç¨‹ç¯„ä¾‹"><a href="#å®Œæ•´å·¥ä½œæµç¨‹ç¯„ä¾‹" class="headerlink" title="å®Œæ•´å·¥ä½œæµç¨‹ç¯„ä¾‹"></a>å®Œæ•´å·¥ä½œæµç¨‹ç¯„ä¾‹</h2><ol>
<li><p><strong>é¦–æ¬¡è¨­å®š</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p src/migrations</span><br><span class="line">npm run migration:generate src/migrations/InitialMigration</span><br><span class="line">npm run migration:run</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æœªä¾†ä¿®æ”¹ Entity å¾Œ (é€™é‚Šèˆ‰ä¾‹åœ¨ User.ts Entity åŠ ä¸Šä¸€å€‹ phone æ¬„ä½)</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">@Entity()</span><br><span class="line"><span class="built_in">export</span> class User &#123;</span><br><span class="line">  @PrimaryGeneratedColumn(<span class="string">&quot;uuid&quot;</span>)</span><br><span class="line">  <span class="built_in">id</span>!: string;</span><br><span class="line"></span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line">  @Column(&#123; <span class="built_in">type</span>: <span class="string">&quot;varchar&quot;</span>, length: 10, nullable: <span class="literal">true</span> &#125;)</span><br><span class="line">  phone?: string;</span><br><span class="line"></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤ç”Ÿæˆ migration æª”æ¡ˆ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run migration:generate src/migrations/AddPhoneToUser</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆçµæœå¦‚ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">import &#123; MigrationInterface, QueryRunner &#125; from <span class="string">&quot;typeorm&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> class AddPhoneToUser1759482580830 implements MigrationInterface &#123;</span><br><span class="line">    name = <span class="string">&#x27;AddPhoneToUser1759482580830&#x27;</span></span><br><span class="line"></span><br><span class="line">    public async up(queryRunner: QueryRunner): Promise&lt;void&gt; &#123;</span><br><span class="line">        await queryRunner.query(`ALTER TABLE <span class="string">&quot;user&quot;</span> ADD <span class="string">&quot;phone&quot;</span> character varying(10)`);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public async down(queryRunner: QueryRunner): Promise&lt;void&gt; &#123;</span><br><span class="line">        await queryRunner.query(`ALTER TABLE <span class="string">&quot;user&quot;</span> DROP COLUMN <span class="string">&quot;phone&quot;</span>`);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤åŸ·è¡Œ migration æª”æ¡ˆ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run migration:run</span><br></pre></td></tr></table></figure>

<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day19-Migration/7-migration-add-phone-col.png?raw=true"></p>
<p>å¯æŸ¥çœ‹è³‡æ–™åº«æ–°å¢äº† phone æ¬„ä½åœ¨æœ€å°¾ç«¯</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day19-Migration/8-db-result.png?raw=true"></p>
<p>æˆåŠŸåŸ·è¡Œ migration å•¦ ğŸ‰</p>
</li>
<li><p><strong>å¦‚æœéœ€è¦å›é€€</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run migration:revert</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="Migration-é–‹ç™¼æµç¨‹"><a href="#Migration-é–‹ç™¼æµç¨‹" class="headerlink" title="Migration é–‹ç™¼æµç¨‹"></a>Migration é–‹ç™¼æµç¨‹</h2><ol>
<li>ä¿®æ”¹&#x2F;æ–°å¢ Entity</li>
<li>å»ºç«‹å°æ‡‰çš„ Migration</li>
<li>åœ¨æœ¬åœ°æ¸¬è©¦ <code>migration:run</code></li>
<li>Commit Migration æª”æ¡ˆ â†’ å…¶ä»–äººåŒæ­¥</li>
<li>éƒ¨ç½²æ™‚ï¼ŒCI&#x2F;CD è‡ªå‹•è·‘ Migration</li>
</ol>
<hr>
<h2 id="ğŸ”‘-å°æé†’-Best-Practice"><a href="#ğŸ”‘-å°æé†’-Best-Practice" class="headerlink" title="ğŸ”‘ å°æé†’ &amp; Best Practice"></a>ğŸ”‘ å°æé†’ &amp; Best Practice</h2><ul>
<li><strong>é–‹ç™¼å¯ä»¥å…ˆç”¨ <code>synchronize: true</code>ï¼Œä½†æ­£å¼å°ˆæ¡ˆè¦é—œæ‰ã€‚</strong></li>
<li>æ¯å€‹ Migration æª”æ¡ˆç›¡é‡åªåšã€Œä¸€ä»¶äº‹ã€ï¼ˆæ–°å¢æ¬„ä½ã€åˆªè¡¨ã€èª¿å‹åˆ¥ï¼‰ã€‚</li>
<li>Migration æª”æ¡ˆè¦ <strong>ä¸€èµ· Commit</strong>ï¼Œä¸ç„¶åˆ¥äººæœƒå°‘ç‰ˆæœ¬ã€‚</li>
<li>åˆ¥å¿˜äº† <code>migration:revert</code> å¯ä»¥æ•‘å‘½ ğŸ™Œã€‚</li>
</ul>
<hr>
<h2 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h2><p><code>synchronize: true</code> å¾ˆæ–¹ä¾¿ï¼Œä½†å°±åƒã€Œæ¸¬è©¦ç’°å¢ƒçš„æ·å¾‘ã€ï¼Œä¸èƒ½æ‹¿åˆ° Productionã€‚</p>
<p>çœŸæ­£ç©©å®šçš„å°ˆæ¡ˆï¼Œå¿…é ˆé  <strong>Migration</strong> ä¾†ç®¡ç†è³‡æ–™åº«ç‰ˆæœ¬ã€‚ ğŸš€</p>
<hr>
<h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><blockquote>
<p>commit : disable synchronize and setup migration scripts</p>
</blockquote>
<p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/d0f8a0c22be61f2b2487a0db5dbaa23df09c1d94">Github é€£çµ</a></p>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title>TypeScript å®Œæ•´ä»‹ç´¹ï¼šå¾å…¥é–€åˆ°å¯¦æˆ°</title>
    <url>/2025/01/27/TypeScript%20%E4%BB%8B%E7%B4%B9/</url>
    <content><![CDATA[<h2 id="ä»€éº¼æ˜¯-TypeScriptï¼Ÿ"><a href="#ä»€éº¼æ˜¯-TypeScriptï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ TypeScriptï¼Ÿ"></a>ä»€éº¼æ˜¯ TypeScriptï¼Ÿ</h2><p>TypeScript æ˜¯ç”± Microsoft é–‹ç™¼çš„ä¸€ç¨®é–‹æºç¨‹å¼èªè¨€ï¼Œå®ƒæ˜¯ JavaScript çš„ä¸€å€‹<strong>å‹åˆ¥åŒ–è¶…é›†</strong>ï¼ˆtyped supersetï¼‰ï¼Œæœ€çµ‚æœƒç·¨è­¯æˆç´” JavaScript ä»£ç¢¼ã€‚ç°¡å–®ä¾†èªªï¼Œä»»ä½•æœ‰æ•ˆçš„ JavaScript ä»£ç¢¼éƒ½æ˜¯æœ‰æ•ˆçš„ TypeScript ä»£ç¢¼ã€‚</p>
<span id="more"></span>

<h3 id="ğŸ¯-ç‚ºä»€éº¼é¸æ“‡-TypeScriptï¼Ÿ"><a href="#ğŸ¯-ç‚ºä»€éº¼é¸æ“‡-TypeScriptï¼Ÿ" class="headerlink" title="ğŸ¯ ç‚ºä»€éº¼é¸æ“‡ TypeScriptï¼Ÿ"></a>ğŸ¯ ç‚ºä»€éº¼é¸æ“‡ TypeScriptï¼Ÿ</h3><ol>
<li><strong>éœæ…‹å‹åˆ¥æª¢æŸ¥</strong> - åœ¨ç·¨è­¯æ™‚æœŸå°±èƒ½ç™¼ç¾éŒ¯èª¤</li>
<li><strong>æ›´å¥½çš„ IDE æ”¯æ´</strong> - æ™ºèƒ½æç¤ºã€è‡ªå‹•å®Œæˆã€é‡æ§‹å·¥å…·</li>
<li><strong>å¢å¼·çš„å¯è®€æ€§</strong> - ä»£ç¢¼æ›´å®¹æ˜“ç†è§£å’Œç¶­è­·</li>
<li><strong>æ¼¸é€²å¼æ¡ç”¨</strong> - å¯ä»¥é€æ­¥å°‡ç¾æœ‰ JavaScript å°ˆæ¡ˆé·ç§»åˆ° TypeScript</li>
</ol>
<h2 id="ğŸš€-å¿«é€Ÿé–‹å§‹"><a href="#ğŸš€-å¿«é€Ÿé–‹å§‹" class="headerlink" title="ğŸš€ å¿«é€Ÿé–‹å§‹"></a>ğŸš€ å¿«é€Ÿé–‹å§‹</h2><h3 id="å®‰è£-TypeScript"><a href="#å®‰è£-TypeScript" class="headerlink" title="å®‰è£ TypeScript"></a>å®‰è£ TypeScript</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å…¨åŸŸå®‰è£</span></span><br><span class="line">npm install -g typescript</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°ˆæ¡ˆå…§å®‰è£</span></span><br><span class="line">npm install --save-dev typescript</span><br><span class="line"></span><br><span class="line"><span class="comment"># é©—è­‰å®‰è£</span></span><br><span class="line">tsc --version</span><br></pre></td></tr></table></figure>

<h3 id="ç¬¬ä¸€å€‹-TypeScript-æª”æ¡ˆ"><a href="#ç¬¬ä¸€å€‹-TypeScript-æª”æ¡ˆ" class="headerlink" title="ç¬¬ä¸€å€‹ TypeScript æª”æ¡ˆ"></a>ç¬¬ä¸€å€‹ TypeScript æª”æ¡ˆ</h3><p>å»ºç«‹ <code>hello.ts</code> æª”æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name: <span class="built_in">string</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`Hello, <span class="subst">$&#123;name&#125;</span>!`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">userName</span>: <span class="built_in">string</span> = <span class="string">&quot;Arvin&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">greet</span>(userName));</span><br></pre></td></tr></table></figure>

<p>ç·¨è­¯ä¸¦åŸ·è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç·¨è­¯</span></span><br><span class="line">tsc hello.ts</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸ·è¡Œç”Ÿæˆçš„ JavaScript</span></span><br><span class="line">node hello.js</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“š-æ ¸å¿ƒæ¦‚å¿µ"><a href="#ğŸ“š-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ğŸ“š æ ¸å¿ƒæ¦‚å¿µ"></a>ğŸ“š æ ¸å¿ƒæ¦‚å¿µ</h2><h3 id="1-åŸºæœ¬å‹åˆ¥"><a href="#1-åŸºæœ¬å‹åˆ¥" class="headerlink" title="1. åŸºæœ¬å‹åˆ¥"></a>1. åŸºæœ¬å‹åˆ¥</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŸºæœ¬å‹åˆ¥</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">isDone</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">decimal</span>: <span class="built_in">number</span> = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">color</span>: <span class="built_in">string</span> = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">list</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">tuple</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>] = [<span class="string">&quot;hello&quot;</span>, <span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Any å‹åˆ¥ï¼ˆç›¡é‡é¿å…ä½¿ç”¨ï¼‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">notSure</span>: <span class="built_in">any</span> = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Void å‹åˆ¥</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">warnUser</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;This is a warning message&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Null å’Œ Undefined</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">u</span>: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">n</span>: <span class="literal">null</span> = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-ä»‹é¢-Interface"><a href="#2-ä»‹é¢-Interface" class="headerlink" title="2. ä»‹é¢ (Interface)"></a>2. ä»‹é¢ (Interface)</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">firstName</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">lastName</span>: <span class="built_in">string</span>;</span><br><span class="line">  age?: <span class="built_in">number</span>; <span class="comment">// å¯é¸å±¬æ€§</span></span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">id</span>: <span class="built_in">number</span>; <span class="comment">// å”¯è®€å±¬æ€§</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createPerson</span>(<span class="params">person: Person</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;person.firstName&#125;</span> <span class="subst">$&#123;person.lastName&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">user</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">firstName</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">  <span class="attr">lastName</span>: <span class="string">&quot;Doe&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">30</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-é¡åˆ¥-Classes"><a href="#3-é¡åˆ¥-Classes" class="headerlink" title="3. é¡åˆ¥ (Classes)"></a>3. é¡åˆ¥ (Classes)</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">protected</span> <span class="attr">species</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, species: <span class="built_in">string</span>, age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">species</span> = species;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">makeSound</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> makes a sound`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="title function_">getInfo</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> is a <span class="subst">$&#123;<span class="variable language_">this</span>.species&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">breed</span>: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span>, breed: <span class="built_in">string</span>, age: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name, <span class="string">&quot;Canine&quot;</span>, age);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">breed</span> = breed;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">bark</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Woof! Woof!&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">makeSound</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">getBreedInfo</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.getInfo()&#125;</span> of breed <span class="subst">$&#123;<span class="variable language_">this</span>.breed&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-æ³›å‹-Generics"><a href="#4-æ³›å‹-Generics" class="headerlink" title="4. æ³›å‹ (Generics)"></a>4. æ³›å‹ (Generics)</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ³›å‹å‡½æ•¸</span></span><br><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">  <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> output1 = identity&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;myString&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> output2 = identity&lt;<span class="built_in">number</span>&gt;(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³›å‹ä»‹é¢</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">GenericIdentityFn</span>&lt;T&gt; &#123;</span><br><span class="line">  (<span class="attr">arg</span>: T): T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³›å‹é¡åˆ¥</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GenericNumber</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">zeroValue</span>: T;</span><br><span class="line">  <span class="attr">add</span>: <span class="function">(<span class="params">x: T, y: T</span>) =&gt;</span> T;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">zero: T, addFn: (x: T, y: T) =&gt; T</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">zeroValue</span> = zero;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">add</span> = addFn;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-è¯åˆå‹åˆ¥èˆ‡äº¤é›†å‹åˆ¥"><a href="#5-è¯åˆå‹åˆ¥èˆ‡äº¤é›†å‹åˆ¥" class="headerlink" title="5. è¯åˆå‹åˆ¥èˆ‡äº¤é›†å‹åˆ¥"></a>5. è¯åˆå‹åˆ¥èˆ‡äº¤é›†å‹åˆ¥</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯åˆå‹åˆ¥</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">StringOrNumber</span> = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">padLeft</span>(<span class="params">value: <span class="built_in">string</span>, padding: StringOrNumber</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> padding === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Array</span>(padding + <span class="number">1</span>).<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>) + value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> padding === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> padding + value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`Expected string or number, got &#x27;<span class="subst">$&#123;padding&#125;</span>&#x27;.`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº¤é›†å‹åˆ¥</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ErrorHandling</span> &#123;</span><br><span class="line">  <span class="attr">success</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  error?: &#123; <span class="attr">message</span>: <span class="built_in">string</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ArtworksData</span> &#123;</span><br><span class="line">  <span class="attr">artworks</span>: &#123; <span class="attr">title</span>: <span class="built_in">string</span> &#125;[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ArtworksResponse</span> = <span class="title class_">ArtworksData</span> &amp; <span class="title class_">ErrorHandling</span>;</span><br></pre></td></tr></table></figure>

<h2 id="âš™ï¸-é€²éšç‰¹æ€§"><a href="#âš™ï¸-é€²éšç‰¹æ€§" class="headerlink" title="âš™ï¸ é€²éšç‰¹æ€§"></a>âš™ï¸ é€²éšç‰¹æ€§</h2><h3 id="1-å‹åˆ¥åˆ¥å-Type-Aliases"><a href="#1-å‹åˆ¥åˆ¥å-Type-Aliases" class="headerlink" title="1. å‹åˆ¥åˆ¥å (Type Aliases)"></a>1. å‹åˆ¥åˆ¥å (Type Aliases)</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Point</span> = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">y</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">EventHandler</span> = <span class="function">(<span class="params">event: Event</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Status</span> = <span class="string">&quot;loading&quot;</span> | <span class="string">&quot;success&quot;</span> | <span class="string">&quot;error&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-æ¢ä»¶å‹åˆ¥"><a href="#2-æ¢ä»¶å‹åˆ¥" class="headerlink" title="2. æ¢ä»¶å‹åˆ¥"></a>2. æ¢ä»¶å‹åˆ¥</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">MessageOf</span>&lt;T&gt; = T <span class="keyword">extends</span> &#123; <span class="attr">message</span>: infer U &#125; ? U : <span class="built_in">never</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Email</span> &#123;</span><br><span class="line">  <span class="attr">message</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">  <span class="title function_">bark</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">EmailMessageContents</span> = <span class="title class_">MessageOf</span>&lt;<span class="title class_">Email</span>&gt;; <span class="comment">// string</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DogMessageContents</span> = <span class="title class_">MessageOf</span>&lt;<span class="title class_">Dog</span>&gt;; <span class="comment">// never</span></span><br></pre></td></tr></table></figure>

<h3 id="3-æ˜ å°„å‹åˆ¥"><a href="#3-æ˜ å°„å‹åˆ¥" class="headerlink" title="3. æ˜ å°„å‹åˆ¥"></a>3. æ˜ å°„å‹åˆ¥</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Readonly</span>&lt;T&gt; = &#123;</span><br><span class="line">  <span class="keyword">readonly</span> [P <span class="keyword">in</span> keyof T]: T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Partial</span>&lt;T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T]?: T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Todo</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">description</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">completed</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReadonlyTodo</span> = <span class="title class_">Readonly</span>&lt;<span class="title class_">Todo</span>&gt;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialTodo</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">Todo</span>&gt;;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ› ï¸-å¯¦æˆ°æ‡‰ç”¨"><a href="#ğŸ› ï¸-å¯¦æˆ°æ‡‰ç”¨" class="headerlink" title="ğŸ› ï¸ å¯¦æˆ°æ‡‰ç”¨"></a>ğŸ› ï¸ å¯¦æˆ°æ‡‰ç”¨</h2><h3 id="TypeScript-è¨­å®šæª”-tsconfig-json"><a href="#TypeScript-è¨­å®šæª”-tsconfig-json" class="headerlink" title="TypeScript è¨­å®šæª” (tsconfig.json)"></a>TypeScript è¨­å®šæª” (tsconfig.json)</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ES2020&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commonjs&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;ES2020&quot;</span><span class="punctuation">,</span> <span class="string">&quot;DOM&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./dist&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rootDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./src&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;forceConsistentCasingInFileNames&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;declaration&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;declarationMap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sourceMap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;node_modules&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dist&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="React-TypeScript-ç¯„ä¾‹"><a href="#React-TypeScript-ç¯„ä¾‹" class="headerlink" title="React + TypeScript ç¯„ä¾‹"></a>React + TypeScript ç¯„ä¾‹</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">email</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">UserListProps</span> &#123;</span><br><span class="line">  initialUsers?: <span class="title class_">User</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">UserList</span>: <span class="title class_">React</span>.<span class="property">FC</span>&lt;<span class="title class_">UserListProps</span>&gt; = <span class="function">(<span class="params">&#123; initialUsers = [] &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [users, setUsers] = useState&lt;<span class="title class_">User</span>[]&gt;(initialUsers);</span><br><span class="line">  <span class="keyword">const</span> [loading, setLoading] = useState&lt;<span class="built_in">boolean</span>&gt;(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> fetchUsers = <span class="keyword">async</span> (): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; =&gt; &#123;</span><br><span class="line">      <span class="title function_">setLoading</span>(<span class="literal">true</span>);</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;/api/users&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">userData</span>: <span class="title class_">User</span>[] = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">        <span class="title function_">setUsers</span>(userData);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Failed to fetch users:&quot;</span>, error);</span><br><span class="line">      &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="title function_">setLoading</span>(<span class="literal">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (initialUsers.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="title function_">fetchUsers</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [initialUsers.<span class="property">length</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (loading) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;users.map((user: User) =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;user.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;user.name&#125; - &#123;user.email&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">UserList</span>;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“-æœ€ä½³å¯¦è¸"><a href="#ğŸ“-æœ€ä½³å¯¦è¸" class="headerlink" title="ğŸ“ æœ€ä½³å¯¦è¸"></a>ğŸ“ æœ€ä½³å¯¦è¸</h2><h3 id="1-å‹åˆ¥å®šç¾©"><a href="#1-å‹åˆ¥å®šç¾©" class="headerlink" title="1. å‹åˆ¥å®šç¾©"></a>1. å‹åˆ¥å®šç¾©</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// âœ… å¥½çš„åšæ³•</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ApiResponse</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">data</span>: T;</span><br><span class="line">  <span class="attr">status</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">message</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âŒ é¿å…ä½¿ç”¨ any</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">processData</span>(<span class="params">data: <span class="built_in">any</span></span>): <span class="built_in">any</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… ä½¿ç”¨å…·é«”å‹åˆ¥</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">processUserData</span>(<span class="params">data: User[]</span>): <span class="title class_">ProcessedUser</span>[] &#123;</span><br><span class="line">  <span class="keyword">return</span> data.<span class="title function_">map</span>(<span class="function">(<span class="params">user</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">id</span>: user.<span class="property">id</span>,</span><br><span class="line">    <span class="attr">displayName</span>: <span class="string">`<span class="subst">$&#123;user.firstName&#125;</span> <span class="subst">$&#123;user.lastName&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">isActive</span>: user.<span class="property">status</span> === <span class="string">&quot;active&quot;</span>,</span><br><span class="line">  &#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-éŒ¯èª¤è™•ç†"><a href="#2-éŒ¯èª¤è™•ç†" class="headerlink" title="2. éŒ¯èª¤è™•ç†"></a>2. éŒ¯èª¤è™•ç†</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Result</span>&lt;T, E = <span class="title class_">Error</span>&gt; =</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span>;</span><br><span class="line">      <span class="attr">data</span>: T;</span><br><span class="line">    &#125;</span><br><span class="line">  | &#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">false</span>;</span><br><span class="line">      <span class="attr">error</span>: E;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchUserData</span>(<span class="params">id: <span class="built_in">string</span></span>): <span class="title class_">Promise</span>&lt;<span class="title class_">Result</span>&lt;<span class="title class_">User</span>&gt;&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`/api/users/<span class="subst">$&#123;id&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">error</span>: <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`HTTP <span class="subst">$&#123;response.status&#125;</span>: <span class="subst">$&#123;response.statusText&#125;</span>`</span>),</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">success</span>: <span class="literal">true</span>, <span class="attr">data</span>: user &#125;;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">error</span>: error <span class="keyword">instanceof</span> <span class="title class_">Error</span> ? error : <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Unknown error&quot;</span>),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ”-å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"><a href="#ğŸ”-å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="ğŸ” å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"></a>ğŸ” å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ</h2><h3 id="1-å‹åˆ¥æ–·è¨€"><a href="#1-å‹åˆ¥æ–·è¨€" class="headerlink" title="1. å‹åˆ¥æ–·è¨€"></a>1. å‹åˆ¥æ–·è¨€</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‹åˆ¥æ–·è¨€ï¼ˆè¬¹æ…ä½¿ç”¨ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">someValue</span>: <span class="built_in">unknown</span> = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">strLength</span>: <span class="built_in">number</span> = (someValue <span class="keyword">as</span> <span class="built_in">string</span>).<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´å®‰å…¨çš„åšæ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isString</span>(<span class="params">value: <span class="built_in">unknown</span></span>): value is <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> value === <span class="string">&quot;string&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">isString</span>(someValue)) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">strLength</span>: <span class="built_in">number</span> = someValue.<span class="property">length</span>; <span class="comment">// TypeScript çŸ¥é“é€™è£¡æ˜¯ string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-å¯é¸éˆèˆ‡ç©ºå€¼åˆä½µ"><a href="#2-å¯é¸éˆèˆ‡ç©ºå€¼åˆä½µ" class="headerlink" title="2. å¯é¸éˆèˆ‡ç©ºå€¼åˆä½µ"></a>2. å¯é¸éˆèˆ‡ç©ºå€¼åˆä½µ</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">NestedObject</span> &#123;</span><br><span class="line">  level1?: &#123;</span><br><span class="line">    level2?: &#123;</span><br><span class="line">      value?: <span class="built_in">string</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj</span>: <span class="title class_">NestedObject</span> = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯é¸éˆ</span></span><br><span class="line"><span class="keyword">const</span> value = obj.<span class="property">level1</span>?.<span class="property">level2</span>?.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç©ºå€¼åˆä½µ</span></span><br><span class="line"><span class="keyword">const</span> displayValue = value ?? <span class="string">&quot;Default Value&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="ğŸ“-å­¸ç¿’è³‡æºèˆ‡å·¥å…·"><a href="#ğŸ“-å­¸ç¿’è³‡æºèˆ‡å·¥å…·" class="headerlink" title="ğŸ“ å­¸ç¿’è³‡æºèˆ‡å·¥å…·"></a>ğŸ“ å­¸ç¿’è³‡æºèˆ‡å·¥å…·</h2><h3 id="æ¨è–¦å·¥å…·"><a href="#æ¨è–¦å·¥å…·" class="headerlink" title="æ¨è–¦å·¥å…·"></a>æ¨è–¦å·¥å…·</h3><ul>
<li><strong>VS Code</strong> - æœ€ä½³çš„ TypeScript é–‹ç™¼é«”é©—</li>
<li><strong>TypeScript Playground</strong> - åœ¨ç·šç·´ç¿’å’Œæ¸¬è©¦</li>
<li><strong>TSLint&#x2F;ESLint</strong> - ä»£ç¢¼æª¢æŸ¥å·¥å…·</li>
<li><strong>Prettier</strong> - ä»£ç¢¼æ ¼å¼åŒ–å·¥å…·</li>
</ul>
<h3 id="å­¸ç¿’è³‡æº"><a href="#å­¸ç¿’è³‡æº" class="headerlink" title="å­¸ç¿’è³‡æº"></a>å­¸ç¿’è³‡æº</h3><ul>
<li><a href="https://www.typescriptlang.org/docs/">TypeScript å®˜æ–¹æ–‡æª”</a></li>
<li><a href="https://basarat.gitbook.io/typescript/">TypeScript Deep Dive</a></li>
<li><a href="https://github.com/typescript-cheatsheets/react">React TypeScript é€ŸæŸ¥è¡¨</a></li>
</ul>
<h2 id="ğŸ“ˆ-ç¸½çµ"><a href="#ğŸ“ˆ-ç¸½çµ" class="headerlink" title="ğŸ“ˆ ç¸½çµ"></a>ğŸ“ˆ ç¸½çµ</h2><p>TypeScript ç‚º JavaScript é–‹ç™¼å¸¶ä¾†äº†å¼·å¤§çš„å‹åˆ¥ç³»çµ±ï¼Œå¹«åŠ©é–‹ç™¼è€…ï¼š</p>
<ol>
<li><strong>æå‰ç™¼ç¾éŒ¯èª¤</strong> - ç·¨è­¯æ™‚æœŸçš„å‹åˆ¥æª¢æŸ¥</li>
<li><strong>æå‡é–‹ç™¼æ•ˆç‡</strong> - æ›´å¥½çš„ IDE æ”¯æ´å’Œæ™ºèƒ½æç¤º</li>
<li><strong>æ”¹å–„ä»£ç¢¼å“è³ª</strong> - æ›´æ¸…æ™°çš„ API è¨­è¨ˆå’Œæ–‡æª”</li>
<li><strong>é™ä½ç¶­è­·æˆæœ¬</strong> - é‡æ§‹æ›´å®‰å…¨ï¼Œä»£ç¢¼æ›´å®¹æ˜“ç†è§£</li>
</ol>
<p>å°æ–¼ç¾ä»£ JavaScript é–‹ç™¼ï¼Œç‰¹åˆ¥æ˜¯å¤§å‹å°ˆæ¡ˆï¼ŒTypeScript å·²ç¶“æˆç‚ºä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚å®ƒä¸åƒ…æå‡äº†é–‹ç™¼é«”é©—ï¼Œä¹Ÿè®“ä»£ç¢¼æ›´åŠ å¥å£¯å’Œå¯ç¶­è­·ã€‚</p>
<h2 id="ğŸš€-ä¸‹ä¸€æ­¥"><a href="#ğŸš€-ä¸‹ä¸€æ­¥" class="headerlink" title="ğŸš€ ä¸‹ä¸€æ­¥"></a>ğŸš€ ä¸‹ä¸€æ­¥</h2><p>å¦‚æœæ‚¨å‰›é–‹å§‹å­¸ç¿’ TypeScriptï¼Œå»ºè­°ï¼š</p>
<ol>
<li>å¾ç°¡å–®çš„å‹åˆ¥æ¨™è¨»é–‹å§‹</li>
<li>é€æ­¥å­¸ç¿’ä»‹é¢å’Œé¡åˆ¥</li>
<li>åœ¨å°å°ˆæ¡ˆä¸­å¯¦è¸</li>
<li>æ¢ç´¢é€²éšç‰¹æ€§å¦‚æ³›å‹å’Œæ¢ä»¶å‹åˆ¥</li>
<li>æ•´åˆåˆ°æ‚¨å–œæ„›çš„æ¡†æ¶ä¸­ï¼ˆReact, Vue, Angularï¼‰</li>
</ol>
<p>é–‹å§‹æ‚¨çš„ TypeScript ä¹‹æ—…å§ï¼é€™å°‡æ˜¯ä¸€å€‹å€¼å¾—æŠ•è³‡çš„æŠ€è¡“é¸æ“‡ã€‚</p>
<hr>
<blockquote>
<p>ğŸ’¡ <strong>å°æç¤º</strong>: è¨˜ä½ï¼ŒTypeScript çš„ç›®æ¨™ä¸æ˜¯æ›¿ä»£ JavaScriptï¼Œè€Œæ˜¯è®“ JavaScript é–‹ç™¼æ›´åŠ å®‰å…¨å’Œé«˜æ•ˆã€‚æ¼¸é€²å¼æ¡ç”¨æ˜¯æœ€ä½³ç­–ç•¥ï¼</p>
</blockquote>
]]></content>
      <categories>
        <category>æŠ€è¡“æ•™å­¸</category>
      </categories>
      <tags>
        <tag>TypeScript</tag>
        <tag>JavaScript</tag>
        <tag>å‰ç«¯é–‹ç™¼</tag>
        <tag>ç¨‹å¼èªè¨€</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 9ï½œRender é›²ç«¯å•Ÿå‹•ï¼šè³‡æ–™åº«é€£ç·šå…¨æ”»ç•¥</title>
    <url>/2025/09/23/Day9%20-%20Render-pgsql-db/</url>
    <content><![CDATA[<h2 id="å‰è¨€-ä»€éº¼æ˜¯è³‡æ–™åº«ï¼Ÿ"><a href="#å‰è¨€-ä»€éº¼æ˜¯è³‡æ–™åº«ï¼Ÿ" class="headerlink" title="å‰è¨€ - ä»€éº¼æ˜¯è³‡æ–™åº«ï¼Ÿ"></a>å‰è¨€ - ä»€éº¼æ˜¯è³‡æ–™åº«ï¼Ÿ</h2><p>ç°¡å–®ä¾†èªªï¼Œ<strong>è³‡æ–™åº«ï¼ˆDatabaseï¼‰</strong> æ˜¯ä¸€ç¨®ç”¨ä¾† <strong>å„²å­˜ã€ç®¡ç†èˆ‡å­˜å–è³‡æ–™</strong> çš„ç³»çµ±ã€‚</p>
<p>å®ƒèƒ½å¹«åŠ©æˆ‘å€‘æŠŠè³‡æ–™æœ‰æ¢ç†åœ°çµ„ç¹”èµ·ä¾†ï¼Œä¸¦é€éæŸ¥è©¢èªè¨€ï¼ˆä¾‹å¦‚ SQLï¼‰å¿«é€Ÿæª¢ç´¢èˆ‡æ›´æ–°ã€‚</p>
<p>å¸¸è¦‹çš„è³‡æ–™åº«é¡å‹æœ‰ï¼š</p>
<ul>
<li><strong>é—œè¯å¼è³‡æ–™åº«ï¼ˆRDBMSï¼‰</strong>ï¼šä»¥è¡¨æ ¼ï¼ˆTablesï¼‰æ–¹å¼å­˜æ”¾è³‡æ–™ï¼Œæ”¯æ´ SQLï¼Œä¾‹å¦‚ MySQLã€PostgreSQLã€SQLiteã€‚</li>
<li><strong>éé—œè¯å¼è³‡æ–™åº«ï¼ˆNoSQLï¼‰</strong>ï¼šä¸ä¸€å®šä½¿ç”¨è¡¨æ ¼ï¼Œå¸¸è¦‹æ–¼ JSON æ–‡ä»¶ã€Key-Valueã€Graph ç­‰çµæ§‹ï¼Œä¾‹å¦‚ MongoDBã€Redisã€‚</li>
</ul>
<span id="more"></span>

<h3 id="å¸¸è¦‹è³‡æ–™åº«æ¯”è¼ƒ"><a href="#å¸¸è¦‹è³‡æ–™åº«æ¯”è¼ƒ" class="headerlink" title="å¸¸è¦‹è³‡æ–™åº«æ¯”è¼ƒ"></a>å¸¸è¦‹è³‡æ–™åº«æ¯”è¼ƒ</h3><table>
<thead>
<tr>
<th>ç‰¹é»</th>
<th>MySQL</th>
<th>PostgreSQL</th>
</tr>
</thead>
<tbody><tr>
<td>æ­·å²</td>
<td>1995 å¹´èª•ç”Ÿï¼Œç¤¾ç¾¤å»£æ³›</td>
<td>1996 å¹´èª•ç”Ÿï¼ŒåŠŸèƒ½å¼·å¤§</td>
</tr>
<tr>
<td>ä½¿ç”¨å ´æ™¯</td>
<td>ç¶²ç«™å¾Œç«¯ï¼ˆWordPressã€é›»å•†ç³»çµ±ï¼‰</td>
<td>è¤‡é›œå•†æ¥­ç³»çµ±ã€æ•¸æ“šåˆ†æå¹³å°</td>
</tr>
<tr>
<td>SQL æ¨™æº–ç›¸å®¹</td>
<td>æ™®åŠä½†éƒ¨åˆ†ä¸ç›¸å®¹</td>
<td>é«˜åº¦ç›¸å®¹ ANSI-SQL</td>
</tr>
<tr>
<td>æ“´å……èƒ½åŠ›</td>
<td>åŠŸèƒ½å®Œæ•´ï¼Œä½†æ“´å±•æ€§ç•¥å°‘</td>
<td>æ”¯æ´æ›´å¤šå‹åˆ¥ï¼ˆJSONã€é™£åˆ—ï¼‰ã€è‡ªå®šç¾©å‡½æ•¸</td>
</tr>
<tr>
<td>æ€§èƒ½</td>
<td>è®€å–é€Ÿåº¦å¿«ï¼Œé©åˆé«˜é »æŸ¥è©¢</td>
<td>äº¤æ˜“ä¸€è‡´æ€§ï¼ˆACIDï¼‰æ›´åš´è¬¹</td>
</tr>
<tr>
<td>å„²å­˜ JSON</td>
<td>æœ‰æ”¯æ´ï¼Œä½†åŠŸèƒ½è¼ƒåŸºæœ¬</td>
<td>æ”¯æ´ JSONBï¼Œæ“ä½œæ›´å¼·å¤§</td>
</tr>
<tr>
<td>æˆæ¬Š</td>
<td>é–‹æº GPL</td>
<td>é–‹æº PostgreSQL License</td>
</tr>
</tbody></table>
<p>ğŸ‘‰ <strong>ç°¡å–®ä¾†èªª</strong>ï¼š</p>
<ul>
<li><strong>MySQL</strong>ï¼šé©åˆä¸­å°å‹å°ˆæ¡ˆæˆ–ç¶²ç«™é–‹ç™¼ã€‚</li>
<li><strong>PostgreSQL</strong>ï¼šåŠŸèƒ½æ›´å…¨é¢ï¼Œé©åˆå¤§å‹å°ˆæ¡ˆã€é‡‘èç³»çµ±ã€æ•¸æ“šåˆ†æã€‚</li>
</ul>
<p>ä»¥ä¸Šç‚ºå…©ç¨®è³‡æ–™åº«çš„ä¸»è¦å®šä½ï¼Œä½†å¯¦éš›é¸æ“‡æ™‚é‚„æ˜¯è¦æ ¹æ“šå…·é«”åœ˜éšŠéœ€æ±‚å’Œæƒ…å¢ƒä¾†æ±ºå®šã€‚</p>
<hr>
<h2 id="Render-è³‡æ–™åº«æœå‹™ç°¡ä»‹"><a href="#Render-è³‡æ–™åº«æœå‹™ç°¡ä»‹" class="headerlink" title="Render è³‡æ–™åº«æœå‹™ç°¡ä»‹"></a>Render è³‡æ–™åº«æœå‹™ç°¡ä»‹</h2><p>Render é™¤äº†èƒ½éƒ¨ç½²å‰å¾Œç«¯æ‡‰ç”¨ç¨‹å¼ï¼Œä¹Ÿæä¾› <strong>PostgreSQL è³‡æ–™åº«æœå‹™</strong>ï¼Œå…¶å„ªé»åŒ…æ‹¬ï¼š</p>
<ul>
<li>å…è²»æ–¹æ¡ˆå¯ç”¨ï¼ˆé©åˆé–‹ç™¼ &#x2F; æ¸¬è©¦ï¼‰ã€‚</li>
<li>å…§å»º <strong>è‡ªå‹•å‚™ä»½</strong> åŠŸèƒ½ã€‚</li>
<li>æä¾› <strong>Connection Info</strong>ï¼Œå¯ç›´æ¥è¤‡è£½é€£ç·šå­—ä¸²ä½¿ç”¨ã€‚</li>
<li>æ”¯æ´å¤–éƒ¨é€£ç·šï¼ˆå¯ç”¨ DBeaverã€pgAdminã€psql é€£ç·šï¼‰ã€‚</li>
<li>å…§å»º SSL å®‰å…¨æ©Ÿåˆ¶ï¼Œä¿éšœé€£ç·šå®‰å…¨ã€‚</li>
</ul>
<hr>
<h2 id="âœ…-å»ºç«‹-PostgreSQL-è³‡æ–™åº«"><a href="#âœ…-å»ºç«‹-PostgreSQL-è³‡æ–™åº«" class="headerlink" title="âœ… å»ºç«‹ PostgreSQL è³‡æ–™åº«"></a>âœ… å»ºç«‹ PostgreSQL è³‡æ–™åº«</h2><ol>
<li>é»æ“Šå³ä¸Šè§’çš„ <strong>ã€ŒNewã€</strong> æŒ‰éˆ•ã€‚</li>
<li>é¸æ“‡ã€Œ<strong>Postgres</strong>ã€ã€‚</li>
</ol>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day9-Render-DB/1-create-pg-database.png?raw=true" alt="Screenshot 2025-04-24 at 9.21.05 PM"></p>
<ol>
<li>è¨­å®šè³‡æ–™åº«ç´°ç¯€ï¼ˆå¦‚ä¸‹ï¼‰ï¼š<ul>
<li><strong>Name</strong>ï¼šè³‡æ–™åº« Instance åç¨±ã€‚</li>
<li><strong>Region</strong>ï¼šé¸æ“‡é è¿‘ä½ çš„åœ°å€ï¼ˆä¾‹å¦‚ Singapore æ–°åŠ å¡ï¼‰ã€‚</li>
<li><strong>Database Name &#x2F; User &#x2F; Password</strong>ï¼šRender æœƒè‡ªå‹•ç”¢ç”Ÿï¼Œä¹Ÿå¯ä»¥è‡ªè¨‚ã€‚</li>
<li><strong>Plan Option</strong>ï¼šå…ˆé¸æ“‡ Free æ–¹æ¡ˆå³å¯ï¼Œæ–¹ä¾¿æ¸¬è©¦ä½¿ç”¨ã€‚<br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day9-Render-DB/2-new-pg-db-info.png?raw=true" alt="dashboard.render.com_new_database"></li>
</ul>
</li>
<li>é»æ“Šã€Œ<strong>Create Database</strong>ã€ã€‚</li>
<li>ç­‰å¾… DB Instance ç”Ÿæˆå¾Œï¼Œå³å¯åœ¨ Dashboard ä¸­çœ‹åˆ°ã€‚</li>
</ol>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day9-Render-DB/3-db-instance.png?raw=true"></p>
<ol start="4">
<li>é»æ“Šå°æ‡‰çš„ Service Name ä»¥æŸ¥çœ‹è³‡æ–™åº«è©³ç´°è³‡è¨Šã€‚</li>
</ol>
<hr>
<h2 id="âœ…-è³‡æ–™åº«å­˜å–æ–¹å¼"><a href="#âœ…-è³‡æ–™åº«å­˜å–æ–¹å¼" class="headerlink" title="âœ… è³‡æ–™åº«å­˜å–æ–¹å¼"></a>âœ… è³‡æ–™åº«å­˜å–æ–¹å¼</h2><p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day9-Render-DB/4-external-url.png?raw=true"></p>
<p>Render æœƒè‡ªå‹•ç”¢ç”Ÿä¸€çµ„ <strong>å¤–éƒ¨é€£ç·šç¶²å€ï¼ˆExternal Connection URLï¼‰</strong>ï¼Œå¯ä¾›æ‡‰ç”¨ç¨‹å¼æˆ–åœ˜éšŠä½¿ç”¨ï¼š</p>
<ul>
<li>é€²å…¥ Postgres è³‡æ–™åº«é é¢ã€‚</li>
<li>åœ¨ã€Œ<strong>Connection Info</strong>ã€æ‰¾åˆ° <code>External Database URL</code>ã€‚</li>
<li>è¤‡è£½é€™çµ„ URLï¼Œä¸¦ç”¨æ–¼ <code>psql</code>ã€DBeaverã€æ‡‰ç”¨ç¨‹å¼æˆ– ORMã€‚</li>
</ul>
<p>â„¹ï¸ æ³¨æ„ï¼šé€™çµ„ URL å«æœ‰å¸³è™Ÿå¯†ç¢¼ï¼Œ<strong>å‹™å¿…ä¿è­·å¥½ï¼Œä¸è¦æ”¾åœ¨ GitHub ç­‰å…¬é–‹åœ°æ–¹</strong>ã€‚</p>
<hr>
<h3 id="External-Database-URL"><a href="#External-Database-URL" class="headerlink" title="External Database URL"></a>External Database URL</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">postgresql://node_ts_demo_db_user:&lt;password&gt;@dpg-d33uq4q4d50c73ejo3rg-a.singapore-postgres.render.com/node_ts_demo_db</span><br></pre></td></tr></table></figure>

<p>æ ¼å¼é€šå¸¸ç‚ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">postgres://&lt;user&gt;:&lt;password&gt;@&lt;host&gt;/&lt;dbname&gt;</span><br></pre></td></tr></table></figure>

<p>æ‹†è§£ï¼ˆè¨­å®š DBeaver å¯ç”¨ï¼‰ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨è€…</strong>ï¼šnode_ts_demo_db_user</li>
<li><strong>å¯†ç¢¼</strong>ï¼špassword</li>
<li><strong>ä¸»æ©Ÿ</strong>ï¼š<a href="http://dpg-d33uq4q4d50c73ejo3rg-a.singapore-postgres.render.com/">dpg-d33uq4q4d50c73ejo3rg-a.singapore-postgres.render.com</a></li>
<li><strong>è³‡æ–™åº«åç¨±</strong>ï¼šnode_ts_demo_db</li>
</ul>
<hr>
<h2 id="ç”¨-DBeaver-æ¸¬è©¦é€£ç·š"><a href="#ç”¨-DBeaver-æ¸¬è©¦é€£ç·š" class="headerlink" title="ç”¨ DBeaver æ¸¬è©¦é€£ç·š"></a>ç”¨ DBeaver æ¸¬è©¦é€£ç·š</h2><p><a href="https://dbeaver.io/">DBeaver</a> æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„é–‹æºè³‡æ–™åº«ç®¡ç†å·¥å…·ï¼Œæ”¯æ´ MySQLã€PostgreSQLã€SQLiteã€MongoDB ç­‰å¤šç¨®è³‡æ–™åº«ã€‚</p>
<h3 id="å®‰è£èˆ‡é€£ç·šæ­¥é©Ÿ"><a href="#å®‰è£èˆ‡é€£ç·šæ­¥é©Ÿ" class="headerlink" title="å®‰è£èˆ‡é€£ç·šæ­¥é©Ÿ"></a>å®‰è£èˆ‡é€£ç·šæ­¥é©Ÿ</h3><ol>
<li><p>ä¸‹è¼‰ä¸¦å®‰è£ DBeaverã€‚</p>
</li>
<li><p>é»é¸ã€Œ<strong>New Database Connection</strong>ã€ã€‚</p>
</li>
<li><p>é¸æ“‡ã€Œ<strong>PostgreSQL</strong>ã€ã€‚</p>
</li>
<li><p>è¼¸å…¥ Render æä¾›çš„è³‡è¨Šï¼š</p>
<ul>
<li><strong>Host</strong>ï¼š<code>dpg-xxxxx.singapore-postgres.render.com</code></li>
<li><strong>Database</strong>ï¼š<code>ts_template_db</code></li>
<li><strong>Username</strong>ï¼š<code>ts_template_db_user</code></li>
<li><strong>Password</strong>ï¼š<code>password</code></li>
<li><strong>Port</strong>ï¼š<code>5432</code><br><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day9-Render-DB/5-dbeaver-test-conn.png?raw=true"></li>
</ul>
</li>
<li><p>é»æ“Š <strong>Test Connection</strong>ï¼ŒæˆåŠŸæœƒé¡¯ç¤ºã€ŒConnectedã€ã€‚</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day9-Render-DB/6-db-connected.png?raw=true"></p>
</li>
</ol>
<hr>
<h2 id="Node-js-å°ˆæ¡ˆé€£ç·š-Render-è³‡æ–™åº«èˆ‡-API-æ¸¬è©¦"><a href="#Node-js-å°ˆæ¡ˆé€£ç·š-Render-è³‡æ–™åº«èˆ‡-API-æ¸¬è©¦" class="headerlink" title="Node.js å°ˆæ¡ˆé€£ç·š Render è³‡æ–™åº«èˆ‡ API æ¸¬è©¦"></a>Node.js å°ˆæ¡ˆé€£ç·š Render è³‡æ–™åº«èˆ‡ API æ¸¬è©¦</h2><h3 id="ä¿®æ”¹-env-æª”æ¡ˆï¼ŒåŠ å…¥è³‡æ–™åº«é€£ç·šè³‡è¨Š"><a href="#ä¿®æ”¹-env-æª”æ¡ˆï¼ŒåŠ å…¥è³‡æ–™åº«é€£ç·šè³‡è¨Š" class="headerlink" title="ä¿®æ”¹ .env æª”æ¡ˆï¼ŒåŠ å…¥è³‡æ–™åº«é€£ç·šè³‡è¨Š"></a>ä¿®æ”¹ <code>.env</code> æª”æ¡ˆï¼ŒåŠ å…¥è³‡æ–™åº«é€£ç·šè³‡è¨Š</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">DB_HOST=dpg-d33uq4q4d50c73ejo3rg-a.singapore-postgres.render.com</span><br><span class="line">DB_NAME=node_ts_demo_db</span><br><span class="line">DB_USERNAME=node_ts_demo_db_user</span><br><span class="line">DB_PASSWORD=password</span><br><span class="line">DB_PORT=5432</span><br></pre></td></tr></table></figure>

<h3 id="å•Ÿå‹•ä¼ºæœå™¨ä¸¦æ¸¬è©¦é€£ç·š"><a href="#å•Ÿå‹•ä¼ºæœå™¨ä¸¦æ¸¬è©¦é€£ç·š" class="headerlink" title="å•Ÿå‹•ä¼ºæœå™¨ä¸¦æ¸¬è©¦é€£ç·š"></a>å•Ÿå‹•ä¼ºæœå™¨ä¸¦æ¸¬è©¦é€£ç·š</h3><p>ä½¿ç”¨å…ˆå‰ Day 6 è¨­å®šå¥½çš„ scriptï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day9-Render-DB/7-ssl-problem.png?raw=true"></p>
<p>æœƒç™¼ç¾é€£ç·šå¤±æ•—ï¼Œå› ç‚º SSL ç›¸é—œå•é¡Œã€‚</p>
<hr>
<h3 id="è§£æ±º-SSL-å•é¡Œ"><a href="#è§£æ±º-SSL-å•é¡Œ" class="headerlink" title="è§£æ±º SSL å•é¡Œ"></a>è§£æ±º SSL å•é¡Œ</h3><ul>
<li><strong>é–‹ç™¼ç’°å¢ƒ</strong>ï¼šå¯æš«æ™‚é—œé–‰é©—è­‰ä»¥ä¾¿å¿«é€Ÿæ¸¬è©¦ã€‚</li>
<li><strong>æ­£å¼ç’°å¢ƒï¼ˆProductionï¼‰</strong>ï¼šå»ºè­°ä¿æŒé è¨­é©—è­‰ï¼ˆ<code>true</code>ï¼‰ï¼Œä»¥ç¢ºä¿å®‰å…¨æ€§ã€‚</li>
</ul>
<p>è‹¥é‡åˆ° SSL é€£ç·šéŒ¯èª¤ï¼Œåœ¨ <code>db.ts</code> çš„ <code>AppDataSource</code> é…ç½®ä¸­åŠ å…¥ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="attr">ssl</span>: &#123; <span class="attr">rejectUnauthorized</span>: <span class="literal">false</span> &#125;,</span><br></pre></td></tr></table></figure>

<p>æ›´æ–°å¾Œçš„ <code>src/config/db.ts</code>ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">AppDataSource</span> = <span class="keyword">new</span> <span class="title class_">DataSource</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;postgres&quot;</span>,</span><br><span class="line">  <span class="attr">host</span>: process.<span class="property">env</span>.<span class="property">DB_HOST</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="title class_">Number</span>(process.<span class="property">env</span>.<span class="property">DB_PORT</span>),</span><br><span class="line">  <span class="attr">username</span>: process.<span class="property">env</span>.<span class="property">DB_USERNAME</span>,</span><br><span class="line">  <span class="attr">password</span>: process.<span class="property">env</span>.<span class="property">DB_PASSWORD</span>,</span><br><span class="line">  <span class="attr">database</span>: process.<span class="property">env</span>.<span class="property">DB_NAME</span>,</span><br><span class="line">  <span class="attr">entities</span>: [<span class="title class_">Todo</span>],</span><br><span class="line">  <span class="attr">synchronize</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">logging</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">ssl</span>: &#123; <span class="attr">rejectUnauthorized</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>âœ… æˆåŠŸé€£ç·šçš„çµ‚ç«¯æ©Ÿç•«é¢ï¼š</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day9-Render-DB/8-nodejs-conn-success.png?raw=true"></p>
<p>(å¯è§€å¯Ÿåˆ° typeORM å·²ç¶“è·Ÿè³‡æ–™åº«äº’å‹•ä¸¦è—‰ç”± Todo Entity å‰µç«‹ Todo è¡¨æ ¼)</p>
<p>DBeaver ç•«é¢ï¼š</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day9-Render-DB/9-todo-table.png?raw=true"></p>
<hr>
<h2 id="API-æ¸¬è©¦ç¯„ä¾‹"><a href="#API-æ¸¬è©¦ç¯„ä¾‹" class="headerlink" title="API æ¸¬è©¦ç¯„ä¾‹"></a>API æ¸¬è©¦ç¯„ä¾‹</h2><p>ä½¿ç”¨ Postman æ¸¬è©¦å¹¾å€‹ç°¡å–®çš„ APIï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è·¯å¾‘</th>
<th>Body ç¯„ä¾‹</th>
<th>å›æ‡‰ç¯„ä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td>GET</td>
<td><code>/api/todos</code></td>
<td>-</td>
<td><code>&#123; &quot;status&quot;: &quot;success&quot;, &quot;data&quot;: [ ... ] &#125;</code></td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/todos</code></td>
<td><code>&#123; &quot;title&quot;: &quot;å­¸ TypeScript&quot; &#125;</code></td>
<td><code>&#123; &quot;status&quot;: &quot;success&quot;, &quot;data&quot;: &#123; &quot;id&quot;: &quot;xxx&quot;, &quot;title&quot;: &quot;å­¸ TypeScript&quot;, &quot;completed&quot;: false &#125; &#125;</code></td>
</tr>
<tr>
<td>PUT</td>
<td><code>/api/todos/&lt;uuid&gt;</code></td>
<td><code>&#123; &quot;completed&quot;: true &#125;</code></td>
<td><code>&#123; &quot;status&quot;: &quot;success&quot;, &quot;data&quot;: &#123; &quot;id&quot;: &quot;1&quot;, &quot;title&quot;: &quot;å­¸ TypeScript&quot;, &quot;completed&quot;: true &#125; &#125;</code></td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/api/todos/&lt;uuid&gt;</code></td>
<td>-</td>
<td><code>&#123; &quot;status&quot;: &quot;success&quot;, &quot;data&quot;: &#123; &quot;affected&quot;: 1 &#125; &#125;</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="Postman-æ¸¬è©¦çµæœ"><a href="#Postman-æ¸¬è©¦çµæœ" class="headerlink" title="Postman æ¸¬è©¦çµæœ"></a>Postman æ¸¬è©¦çµæœ</h2><p>æˆåŠŸæ–°å¢ API è³‡æ–™ï¼š</p>
<p><img src="https://github.com/ArvinYang1925/iThome-2025/blob/main/images/Day9-Render-DB/10-postman-create-todo.png?raw=true"></p>
<hr>
<h2 id="ğŸ¯-ä»Šæ—¥æ”¶ç©«"><a href="#ğŸ¯-ä»Šæ—¥æ”¶ç©«" class="headerlink" title="ğŸ¯ ä»Šæ—¥æ”¶ç©«"></a>ğŸ¯ ä»Šæ—¥æ”¶ç©«</h2><p>ä»Šå¤©æˆ‘å€‘ä¸åªå­¸æœƒäº†å¦‚ä½•åœ¨ Render ä¸Šå»ºç«‹ PostgreSQL è³‡æ–™åº«ï¼Œé‚„å¯¦éš›å®Œæˆäº†å¹¾ä»¶é—œéµä»»å‹™ï¼š</p>
<ul>
<li>äº†è§£äº† <strong>è³‡æ–™åº«çš„åŸºæœ¬æ¦‚å¿µ</strong>ï¼Œä¸¦æ¯”è¼ƒäº† MySQL èˆ‡ PostgreSQL çš„å·®ç•°ã€‚</li>
<li>åœ¨ Render å»ºç«‹äº† <strong>Postgres è³‡æ–™åº«æœå‹™</strong>ï¼Œä¸¦ç†Ÿæ‚‰äº†é€£ç·šæ–¹å¼ã€‚</li>
<li>ä½¿ç”¨ <strong>DBeaver</strong> æˆåŠŸæ¸¬è©¦é€£ç·šï¼Œç¢ºèªè³‡æ–™åº«å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</li>
<li>åœ¨ <strong>Node.js + TypeORM å°ˆæ¡ˆ</strong>ä¸­å®Œæˆé€£ç·šï¼Œä¸¦è™•ç† SSL å•é¡Œã€‚</li>
<li>ç”¨ <strong>Postman</strong> é©—è­‰äº† API èˆ‡è³‡æ–™åº«çš„äº’å‹•ï¼Œç¢ºèª CRUD åŠŸèƒ½æ­£å¸¸ã€‚</li>
</ul>
<p>ğŸ‘‰ åˆ°é€™ä¸€æ­¥ï¼Œæˆ‘å€‘çš„å°ˆæ¡ˆå·²ç¶“æœ‰äº†ã€Œ<strong>å®Œæ•´çš„å¾Œç«¯ + çœŸå¯¦çš„é›²ç«¯è³‡æ–™åº«</strong>ã€ï¼Œä¸‹ä¸€æ­¥å°±èƒ½é€²ä¸€æ­¥å˜—è©¦éƒ¨ç½²å°ˆæ¡ˆäº†ï¼ ğŸš€</p>
<h2 id="è£œå……è³‡æ–™"><a href="#è£œå……è³‡æ–™" class="headerlink" title="è£œå……è³‡æ–™"></a>è£œå……è³‡æ–™</h2><p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/280a18f58c08410d2aebf95f6781766a45b18946">Github ç¯„ä¾‹ç¨‹å¼ç¢¼</a></p>
<blockquote>
<p>git commit : setup render database connection info</p>
</blockquote>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
        <tag>Render</tag>
        <tag>pgSQL</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¸ç”¨ Hexo æŒ‡ä»¤å¸¶ä½ ç„¡å¾€ä¸åˆ©</title>
    <url>/2024/06/07/%E5%B8%B8%E7%94%A8%20Hexo%20%E6%8C%87%E4%BB%A4%E5%B8%B6%E4%BD%A0%E7%84%A1%E5%BE%80%E4%B8%8D%E5%88%A9/</url>
    <content><![CDATA[<p>Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€å•ä¸”åŠŸèƒ½å¼ºå¤§çš„é™æ€åšå®¢æ¡†æ¶ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ Hexo æŒ‡ä»¤ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo new æ–‡ç« åç¨±</span><br><span class="line">hexo generate ç”¢ç”Ÿ public è³‡æ–™å¤¾å…§å®¹</span><br><span class="line">hexo server</span><br><span class="line">hexo clean æ¸…ç†ç·©å­˜</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<ol>
<li><p><strong>å®‰è£… Hexo</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>åˆå§‹åŒ– Hexo é¡¹ç›®</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line"><span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ç”Ÿæˆé™æ€æ–‡ä»¶</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æ–°å»ºæ–‡ç« </strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo new &lt;title&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å‘å¸ƒæ–‡ç« </strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æ¸…ç†ç¼“å­˜å’Œç”Ÿæˆçš„é™æ€æ–‡ä»¶</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>åˆ—å‡ºæ‰€æœ‰ Hexo å‘½ä»¤</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo list</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æŸ¥çœ‹ Hexo å¸®åŠ©ä¿¡æ¯</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo <span class="built_in">help</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å®‰è£…æ’ä»¶</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">npm install &lt;plugin-name&gt; --save</span><br></pre></td></tr></table></figure></li>
</ol>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›é¢å¤–çš„æœ‰ç”¨å‘½ä»¤å’Œæ“ä½œï¼š</p>
<ul>
<li><p><strong>æ–°å»ºé¡µé¢</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo new page &lt;page-name&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>è‰ç¨¿è½¬å‘å¸ƒ</strong><br>å¦‚æœä½ ä½¿ç”¨ <code>hexo new draft &lt;title&gt;</code> åˆ›å»ºäº†è‰ç¨¿ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°†è‰ç¨¿å‘å¸ƒä¸ºæ­£å¼æ–‡ç« ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo publish &lt;title&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ç”Ÿæˆå¹¶éƒ¨ç½²</strong><br>è¿™ä¼šåœ¨ç”Ÿæˆé™æ€æ–‡ä»¶åç«‹å³éƒ¨ç½²å®ƒä»¬ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo generate --deploy</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>æŸ¥çœ‹å½“å‰é…ç½®</strong><br>ä½ å¯ä»¥ç›´æ¥ç¼–è¾‘ <code>_config.yml</code> æ–‡ä»¶æ¥é…ç½® Hexoï¼Œä½†ä¹Ÿå¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰é…ç½®ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hexo config</span><br></pre></td></tr></table></figure></li>
</ul>
<p>è¿™äº›å‘½ä»¤æ¶µç›–äº† Hexo çš„å¤§éƒ¨åˆ†åŸºæœ¬åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹å¹¶ç®¡ç†ä½ çš„åšå®¢ã€‚</p>
]]></content>
      <tags>
        <tag>Hexo æŒ‡ä»¤</tag>
      </tags>
  </entry>
  <entry>
    <title>é—œæ–¼åš´æ ¼æ¨¡å¼</title>
    <url>/2024/06/12/%E9%97%9C%E6%96%BC%E5%9A%B4%E6%A0%BC%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<p>åœ¨ JavaScript å’Œ PHP ä¸­ï¼Œåš´æ ¼æ¨¡å¼ï¼ˆstrict modeï¼‰éƒ½æ˜¯å¾ŒæœŸå¼•å…¥çš„ã€‚</p>
<span id="more"></span>

<h2 id="JavaScript-çš„åš´æ ¼æ¨¡å¼"><a href="#JavaScript-çš„åš´æ ¼æ¨¡å¼" class="headerlink" title="JavaScript çš„åš´æ ¼æ¨¡å¼"></a>JavaScript çš„åš´æ ¼æ¨¡å¼</h2><p>JavaScript çš„åš´æ ¼æ¨¡å¼é¦–æ¬¡å‡ºç¾åœ¨ ECMAScript 5ï¼ˆES5ï¼‰æ¨™æº–ä¸­ï¼Œæ–¼ 2009 å¹´ç™¼å¸ƒã€‚åš´æ ¼æ¨¡å¼é€šé <code>&quot;use strict&quot;;</code> æŒ‡ä»¤ä¾†å•Ÿç”¨ï¼Œå®ƒå°‡ä»£ç¢¼åŸ·è¡Œæ¨¡å¼å¾å¯¬é¬†æ¨¡å¼åˆ‡æ›åˆ°åš´æ ¼æ¨¡å¼ï¼Œä¸¦å¼•å…¥äº†ä¸€äº›æ–°çš„é™åˆ¶å’Œæ”¹è®Šï¼Œä»¥å¹«åŠ©é–‹ç™¼è€…é¿å…å¸¸è¦‹çš„å•é¡Œï¼Œæé«˜ä»£ç¢¼çš„å“è³ªå’Œæ€§èƒ½ã€‚</p>
<h2 id="PHP-çš„åš´æ ¼æ¨¡å¼"><a href="#PHP-çš„åš´æ ¼æ¨¡å¼" class="headerlink" title="PHP çš„åš´æ ¼æ¨¡å¼"></a>PHP çš„åš´æ ¼æ¨¡å¼</h2><p>PHP çš„åš´æ ¼æ¨¡å¼é¦–æ¬¡å‡ºç¾åœ¨ PHP 7.0 ç‰ˆæœ¬ä¸­ï¼Œæ–¼ 2015 å¹´ç™¼å¸ƒã€‚å®ƒé€šéå¼•å…¥ <code>declare(strict_types=1);</code> ä¾†å•Ÿç”¨ï¼Œç”¨æ–¼å¼·åˆ¶å‡½æ•¸å’Œæ–¹æ³•çš„å‚³å…¥åƒæ•¸å’Œè¿”å›å€¼é€²è¡Œåš´æ ¼çš„é¡å‹æª¢æŸ¥ã€‚åœ¨åš´æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•¸å’Œæ–¹æ³•çš„åƒæ•¸é¡å‹å’Œè¿”å›é¡å‹å¿…é ˆèˆ‡å‡½æ•¸å’Œæ–¹æ³•çš„è²æ˜ä¸€è‡´ï¼Œå¦å‰‡å°‡å¼•ç™¼è‡´å‘½éŒ¯èª¤ã€‚</p>
<h2 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h2><p>å„˜ç®¡åš´æ ¼æ¨¡å¼åœ¨ JavaScript å’Œ PHP ä¸­çš„å¯¦ç¾æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œä½†å®ƒå€‘çš„ç›®æ¨™éƒ½æ˜¯æé«˜ä»£ç¢¼çš„å“è³ªå’Œå¯é æ€§ï¼Œä¸¦å¹«åŠ©é–‹ç™¼è€…é¿å…å¸¸è¦‹çš„éŒ¯èª¤ã€‚JavaScript çš„åš´æ ¼æ¨¡å¼æ–¼ ECMAScript 5 ä¸­é¦–æ¬¡å‡ºç¾ï¼Œè€Œ PHP çš„åš´æ ¼æ¨¡å¼å‰‡åœ¨ PHP 7.0 ä¸­é¦–æ¬¡å¼•å…¥ã€‚</p>
]]></content>
      <tags>
        <tag>JavaScript</tag>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>Day 8 - æ‰“é€ ä½ çš„ç¬¬ä¸€å€‹ TodoList APIï¼šä¸€æ­¥æ­¥å¯¦ç¾ CRUD åŠŸèƒ½</title>
    <url>/2025/09/22/Day8%20-%20TS-Node-TodoList%20API/</url>
    <content><![CDATA[<p>åœ¨å­¸ç¿’ <strong>Express + TypeScript + TypeORM</strong> çš„éç¨‹ä¸­ï¼Œ<code>TodoList API</code> æ˜¯éå¸¸é©åˆæ–°æ‰‹ä¸Šæ‰‹çš„ç·´ç¿’æ¡ˆä¾‹ã€‚</p>
<p>å› ç‚ºå®ƒçš„é‚è¼¯ç°¡å–®ï¼ˆæ–°å¢ã€è®€å–ã€æ›´æ–°ã€åˆªé™¤ï¼‰ï¼Œå»åˆæ¶µè“‹äº† RESTful API çš„æ ¸å¿ƒæ¦‚å¿µï¼š</p>
<ul>
<li><strong>CRUD</strong>ï¼ˆCreate &#x2F; Read &#x2F; Update &#x2F; Deleteï¼‰</li>
<li><strong>Controller &#x2F; Route åˆ†å±¤</strong></li>
<li><strong>èˆ‡è³‡æ–™åº«çš„äº’å‹•ï¼ˆRepositoryï¼‰</strong></li>
</ul>
<p>é€™æ¨£çš„ç·´ç¿’ä¸åƒ…å¯ä»¥æ‰“å¥½åŸºç¤ï¼Œé‚„èƒ½å¿«é€Ÿç†è§£ <strong>å¾Œç«¯æ¶æ§‹è¨­è¨ˆ</strong> çš„å¸¸è¦‹æ¨¡å¼ã€‚</p>
<span id="more"></span>

<hr>
<h2 id="å»ºç«‹-Controller"><a href="#å»ºç«‹-Controller" class="headerlink" title="å»ºç«‹ Controller"></a>å»ºç«‹ Controller</h2><p>Controllerï¼ˆæ§åˆ¶å™¨ï¼‰æ˜¯ <strong>å°ˆé–€è² è²¬è™•ç†æ¥­å‹™é‚è¼¯</strong> çš„åœ°æ–¹ï¼š</p>
<ul>
<li>æ”¶åˆ°è«‹æ±‚ (<code>req</code>) â†’ é©—è­‰&#x2F;è™•ç† â†’ å›å‚³å›æ‡‰ (<code>res</code>)</li>
<li>ä¸ç›´æ¥æ±ºå®šè·¯ç”±ï¼Œè€Œæ˜¯æä¾›ã€ŒåŠŸèƒ½ã€è®“ Route ä½¿ç”¨</li>
<li>å¥½è™•æ˜¯ï¼š<strong>ç¨‹å¼ç¢¼çµæ§‹æ¸…æ¥šã€å¯è®€æ€§ä½³ã€æ–¹ä¾¿æ¸¬è©¦èˆ‡ç¶­è­·</strong></li>
</ul>
<p>å»ºç«‹ <code>src/controllers/todoController.ts</code>ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Request</span>, <span class="title class_">Response</span>, <span class="title class_">NextFunction</span> &#125; <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppDataSource</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../config/db&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Todo</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../entities/Todo&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todoRepository = <span class="title class_">AppDataSource</span>.<span class="title function_">getRepository</span>(<span class="title class_">Todo</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getTodos</span>(<span class="params"></span></span><br><span class="line"><span class="params">  req: Request,</span></span><br><span class="line"><span class="params">  res: Response,</span></span><br><span class="line"><span class="params">  next: NextFunction</span></span><br><span class="line"><span class="params"></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> todos = <span class="keyword">await</span> todoRepository.<span class="title function_">find</span>();</span><br><span class="line">    res.<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">data</span>: todos &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createTodo</span>(<span class="params"></span></span><br><span class="line"><span class="params">  req: Request,</span></span><br><span class="line"><span class="params">  res: Response,</span></span><br><span class="line"><span class="params">  next: NextFunction</span></span><br><span class="line"><span class="params"></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; title &#125; = req.<span class="property">body</span>;</span><br><span class="line">    <span class="keyword">if</span> (!title) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;error&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;Title is required&quot;</span> &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> newTodo = todoRepository.<span class="title function_">create</span>(&#123; title &#125;);</span><br><span class="line">    <span class="keyword">const</span> savedTodo = <span class="keyword">await</span> todoRepository.<span class="title function_">save</span>(newTodo);</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">201</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">data</span>: savedTodo &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">updateTodo</span>(<span class="params"></span></span><br><span class="line"><span class="params">  req: Request,</span></span><br><span class="line"><span class="params">  res: Response,</span></span><br><span class="line"><span class="params">  next: NextFunction</span></span><br><span class="line"><span class="params"></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; id &#125; = req.<span class="property">params</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; title, completed &#125; = req.<span class="property">body</span>;</span><br><span class="line">    <span class="keyword">const</span> todo = <span class="keyword">await</span> todoRepository.<span class="title function_">findOneBy</span>(&#123; id &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!todo) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;error&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;Todo not found&quot;</span> &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    todo.<span class="property">title</span> = title !== <span class="literal">undefined</span> ? title : todo.<span class="property">title</span>;</span><br><span class="line">    todo.<span class="property">completed</span> = completed !== <span class="literal">undefined</span> ? completed : todo.<span class="property">completed</span>;</span><br><span class="line">    <span class="keyword">const</span> updatedTodo = <span class="keyword">await</span> todoRepository.<span class="title function_">save</span>(todo);</span><br><span class="line">    res.<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">data</span>: updatedTodo &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">deleteTodo</span>(<span class="params"></span></span><br><span class="line"><span class="params">  req: Request,</span></span><br><span class="line"><span class="params">  res: Response,</span></span><br><span class="line"><span class="params">  next: NextFunction</span></span><br><span class="line"><span class="params"></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; id &#125; = req.<span class="property">params</span>;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> todoRepository.<span class="title function_">delete</span>(&#123; id &#125;);</span><br><span class="line">    <span class="keyword">if</span> (result.<span class="property">affected</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;error&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;Todo not found&quot;</span> &#125;);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    res.<span class="title function_">json</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">data</span>: result &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="è¨­å®šè·¯ç”±"><a href="#è¨­å®šè·¯ç”±" class="headerlink" title="è¨­å®šè·¯ç”±"></a>è¨­å®šè·¯ç”±</h2><p>Routeï¼ˆè·¯ç”±ï¼‰çš„å·¥ä½œå°±æ˜¯ <strong>æ±ºå®šè«‹æ±‚è¦äº¤çµ¦å“ªå€‹ Controller è™•ç†</strong>ã€‚</p>
<p>å®ƒå°±åƒæ˜¯ <strong>å°èˆªåœ°åœ–</strong>ï¼š</p>
<ul>
<li><code>GET /todos</code> â†’ æŸ¥è©¢æ‰€æœ‰ä»£è¾¦äº‹é … â†’ <code>getTodos</code></li>
<li><code>POST /todos</code> â†’ å»ºç«‹æ–°ä»£è¾¦ â†’ <code>createTodo</code></li>
<li><code>PUT /todos/:id</code> â†’ æ›´æ–°æŸç­†ä»£è¾¦ â†’ <code>updateTodo</code></li>
<li><code>DELETE /todos/:id</code> â†’ åˆªé™¤æŸç­†ä»£è¾¦ â†’ <code>deleteTodo</code></li>
</ul>
<p>é€™æ¨£ä¸€ä¾†ï¼ŒController å’Œ Route çš„è²¬ä»»å°±åˆ†å¾—å¾ˆæ¸…æ¥šï¼š</p>
<ul>
<li><strong>Route &#x3D; è«‹æ±‚åˆ†é…å™¨</strong></li>
<li><strong>Controller &#x3D; è™•ç†é‚è¼¯</strong></li>
</ul>
<p>å»ºç«‹ <code>src/routes/todoRoutes.ts</code>ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Router</span> &#125; <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  getTodos,</span><br><span class="line">  createTodo,</span><br><span class="line">  updateTodo,</span><br><span class="line">  deleteTodo,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;../controllers/todoController&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, getTodos);</span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/&quot;</span>, createTodo);</span><br><span class="line">router.<span class="title function_">put</span>(<span class="string">&quot;/:id&quot;</span>, updateTodo);</span><br><span class="line">router.<span class="title function_">delete</span>(<span class="string">&quot;/:id&quot;</span>, deleteTodo);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ•´åˆåˆ°ä¸»ç¨‹å¼"><a href="#æ•´åˆåˆ°ä¸»ç¨‹å¼" class="headerlink" title="æ•´åˆåˆ°ä¸»ç¨‹å¼"></a>æ•´åˆåˆ°ä¸»ç¨‹å¼</h2><p>æœ€å¾Œä¸€æ­¥å°±æ˜¯åœ¨ <code>app.ts</code> è£¡ï¼ŒæŠŠ <code>todoRoutes</code> æ•´åˆé€²ä¸»ç¨‹å¼ã€‚</p>
<p>é€™æ¨£ç•¶ä½¿ç”¨è€…ç™¼é€è«‹æ±‚åˆ° <code>/api/todos</code> æ™‚ï¼ŒExpress å°±æœƒæŠŠå®ƒäº¤çµ¦æˆ‘å€‘å‰›å‰›å¯«å¥½çš„ <code>todoRoutes</code>ï¼Œå†ç”±å°æ‡‰çš„ Controller å»è™•ç†ã€‚</p>
<p>ä¿®æ”¹ <code>src/app.ts</code>ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;reflect-metadata&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppDataSource</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./config/db&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> todoRoutes <span class="keyword">from</span> <span class="string">&quot;./routes/todoRoutes&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> dotenv <span class="keyword">from</span> <span class="string">&quot;dotenv&quot;</span>;</span><br><span class="line"></span><br><span class="line">dotenv.<span class="title function_">config</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/api/todos&quot;</span>, todoRoutes); <span class="comment">// åŠ ä¸Š Todo è·¯ç”±</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;Hello, iThome 2025!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">AppDataSource</span>.<span class="title function_">initialize</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸ“¦ DB Connected!&quot;</span>);</span><br><span class="line">    app.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ğŸš€ Server running on http://localhost:<span class="subst">$&#123;PORT&#125;</span>`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;âŒ DB connection failed:&quot;</span>, err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<hr>
<p>ğŸ‘‰ åˆ°é€™è£¡ï¼Œæˆ‘å€‘å°±å®Œæˆäº†ä¸€å€‹æœ€åŸºç¤çš„ TodoList APIã€‚</p>
<p>ä½†æ˜¯ç›®å‰é‚„æ²’æœ‰è³‡æ–™åº«å¯ä»¥æ¸¬è©¦ (é‚„ä¸èƒ½ç”¨ Postman æ‰“ API ğŸ˜‚)ï¼Œä¸‹ä¸€ç¯‡æˆ‘å€‘å°±ä¾†ä»‹ç´¹ Render æœå‹™ä¸Šçš„è³‡æ–™åº«æ‡‰ç”¨ï¼ŒæŠŠæ•´æ®µä¸²æ¥èµ·ä¾†ã€‚</p>
<hr>
<h2 id="è£œå……è³‡æ–™"><a href="#è£œå……è³‡æ–™" class="headerlink" title="è£œå……è³‡æ–™"></a>è£œå……è³‡æ–™</h2><p><a href="https://github.com/ArvinYang1925/iThome2025-node-ts/commit/d766050e40229dd97cd90a5c94c667d14cc90c2f">Github ç¯„ä¾‹ç¨‹å¼ç¢¼</a></p>
<blockquote>
<p>commit : Day 8 initialize todoâ€‘list API</p>
</blockquote>
<hr>
]]></content>
      <tags>
        <tag>TypeScript</tag>
        <tag>Node.js</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2025/08/27/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<span id="more"></span>

<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
</search>
